(function(Tr,or){typeof exports=="object"&&typeof module<"u"?module.exports=or():typeof define=="function"&&define.amd?define(or):(Tr=typeof globalThis<"u"?globalThis:Tr||self,Tr.fengariWeb=or())})(this,(function(){"use strict";function Tr(lr){return lr&&lr.__esModule&&Object.prototype.hasOwnProperty.call(lr,"default")?lr.default:lr}var or={exports:{}},Zr;function dn(){return Zr||(Zr=1,(function(lr,Nn){(function(e,ga){lr.exports=ga()})(window,function(){return(function(e){var ga={};function d(o){if(ga[o])return ga[o].exports;var s=ga[o]={i:o,l:!1,exports:{}};return e[o].call(s.exports,s,s.exports,d),s.l=!0,s.exports}return d.m=e,d.c=ga,d.d=function(o,s,m){d.o(o,s)||Object.defineProperty(o,s,{enumerable:!0,get:m})},d.r=function(o){typeof Symbol<"u"&&Symbol.toStringTag&&Object.defineProperty(o,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(o,"__esModule",{value:!0})},d.t=function(o,s){if(1&s&&(o=d(o)),8&s||4&s&&typeof o=="object"&&o&&o.__esModule)return o;var m=Object.create(null);if(d.r(m),Object.defineProperty(m,"default",{enumerable:!0,value:o}),2&s&&typeof o!="string")for(var ge in o)d.d(m,ge,(function(b){return o[b]}).bind(null,ge));return m},d.n=function(o){var s=o&&o.__esModule?function(){return o.default}:function(){return o};return d.d(s,"a",s),s},d.o=function(o,s){return Object.prototype.hasOwnProperty.call(o,s)},d.p="",d(d.s=34)})([function(e,ga,d){var o=d(5);e.exports.FENGARI_AUTHORS=o.FENGARI_AUTHORS,e.exports.FENGARI_COPYRIGHT=o.FENGARI_COPYRIGHT,e.exports.FENGARI_RELEASE=o.FENGARI_RELEASE,e.exports.FENGARI_VERSION=o.FENGARI_VERSION,e.exports.FENGARI_VERSION_MAJOR=o.FENGARI_VERSION_MAJOR,e.exports.FENGARI_VERSION_MINOR=o.FENGARI_VERSION_MINOR,e.exports.FENGARI_VERSION_NUM=o.FENGARI_VERSION_NUM,e.exports.FENGARI_VERSION_RELEASE=o.FENGARI_VERSION_RELEASE,e.exports.luastring_eq=o.luastring_eq,e.exports.luastring_indexOf=o.luastring_indexOf,e.exports.luastring_of=o.luastring_of,e.exports.to_jsstring=o.to_jsstring,e.exports.to_luastring=o.to_luastring,e.exports.to_uristring=o.to_uristring;var s=d(3),m=d(2),ge=d(7),b=d(17);e.exports.luaconf=s,e.exports.lua=m,e.exports.lauxlib=ge,e.exports.lualib=b},function(e,ga,d){var o,s,m;if(o=typeof Uint8Array.from=="function"?Uint8Array.from.bind(Uint8Array):function(Le){for(var fe=0,Ge=Le.length,te=new Uint8Array(Ge);Ge>fe;)te[fe]=Le[fe++];return te},typeof new Uint8Array().indexOf=="function")s=function(Le,fe,Ge){return Le.indexOf(fe,Ge)};else{var ge=[].indexOf;if(ge.call(new Uint8Array(1),0)!==0)throw Error("missing .indexOf");s=function(Le,fe,Ge){return ge.call(Le,fe,Ge)}}m=typeof Uint8Array.of=="function"?Uint8Array.of.bind(Uint8Array):function(){return o(arguments)};var b=function(Le){return Le instanceof Uint8Array},y="cannot convert invalid utf8 to javascript string",N=";,/?:@&=+$abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789,-_.!~*'()#".split("").reduce(function(Le,fe){return Le[fe.charCodeAt(0)]=!0,Le},{}),pe={},q=function(Le,fe){if(typeof Le!="string")throw new TypeError("to_luastring expects a javascript string");if(fe){var Ge=pe[Le];if(b(Ge))return Ge}for(var te=Le.length,ne=Array(te),Q=0,ea=0;ea<te;++ea){var Pe=Le.charCodeAt(ea);if(Pe<=127)ne[Q++]=Pe;else if(Pe<=2047)ne[Q++]=192|Pe>>6,ne[Q++]=128|63&Pe;else{if(Pe>=55296&&Pe<=56319&&ea+1<te){var Xe=Le.charCodeAt(ea+1);Xe>=56320&&Xe<=57343&&(ea++,Pe=1024*(Pe-55296)+Xe+9216)}Pe<=65535?(ne[Q++]=224|Pe>>12,ne[Q++]=128|Pe>>6&63,ne[Q++]=128|63&Pe):(ne[Q++]=240|Pe>>18,ne[Q++]=128|Pe>>12&63,ne[Q++]=128|Pe>>6&63,ne[Q++]=128|63&Pe)}}return ne=o(ne),fe&&(pe[Le]=ne),ne};e.exports.luastring_from=o,e.exports.luastring_indexOf=s,e.exports.luastring_of=m,e.exports.is_luastring=b,e.exports.luastring_eq=function(Le,fe){if(Le!==fe){var Ge=Le.length;if(Ge!==fe.length)return!1;for(var te=0;te<Ge;te++)if(Le[te]!==fe[te])return!1}return!0},e.exports.to_jsstring=function(Le,fe,Ge,te){if(!b(Le))throw new TypeError("to_jsstring expects a Uint8Array");Ge=Ge===void 0?Le.length:Math.min(Le.length,Ge);for(var ne="",Q=fe!==void 0?fe:0;Q<Ge;){var ea=Le[Q++];if(ea<128)ne+=String.fromCharCode(ea);else if(ea<194||ea>244){if(!te)throw RangeError(y);ne+="�"}else if(ea<=223){if(Q>=Ge){if(!te)throw RangeError(y);ne+="�";continue}var Pe=Le[Q++];if((192&Pe)!=128){if(!te)throw RangeError(y);ne+="�";continue}ne+=String.fromCharCode(((31&ea)<<6)+(63&Pe))}else if(ea<=239){if(Q+1>=Ge){if(!te)throw RangeError(y);ne+="�";continue}var Xe=Le[Q++];if((192&Xe)!=128){if(!te)throw RangeError(y);ne+="�";continue}var De=Le[Q++];if((192&De)!=128){if(!te)throw RangeError(y);ne+="�";continue}var aa=((15&ea)<<12)+((63&Xe)<<6)+(63&De);if(aa<=65535)ne+=String.fromCharCode(aa);else{var w=55296+((aa-=65536)>>10),j=aa%1024+56320;ne+=String.fromCharCode(w,j)}}else{if(Q+2>=Ge){if(!te)throw RangeError(y);ne+="�";continue}var I=Le[Q++];if((192&I)!=128){if(!te)throw RangeError(y);ne+="�";continue}var G=Le[Q++];if((192&G)!=128){if(!te)throw RangeError(y);ne+="�";continue}var Oe=Le[Q++];if((192&Oe)!=128){if(!te)throw RangeError(y);ne+="�";continue}var me=((7&ea)<<18)+((63&I)<<12)+((63&G)<<6)+(63&Oe),Z=55296+((me-=65536)>>10),de=me%1024+56320;ne+=String.fromCharCode(Z,de)}}return ne},e.exports.to_uristring=function(Le){if(!b(Le))throw new TypeError("to_uristring expects a Uint8Array");for(var fe="",Ge=0;Ge<Le.length;Ge++){var te=Le[Ge];N[te]?fe+=String.fromCharCode(te):fe+="%"+(te<16?"0":"")+te.toString(16)}return fe},e.exports.to_luastring=q,e.exports.from_userstring=function(Le){if(!b(Le)){if(typeof Le!="string")throw new TypeError("expects an array of bytes or javascript string");Le=q(Le)}return Le};var Ne=q("\x1BLua");e.exports.LUA_SIGNATURE=Ne,e.exports.LUA_VERSION_MAJOR="5",e.exports.LUA_VERSION_MINOR="3",e.exports.LUA_VERSION_NUM=503,e.exports.LUA_VERSION_RELEASE="4",e.exports.LUA_VERSION="Lua 5.3",e.exports.LUA_RELEASE="Lua 5.3.4",e.exports.LUA_COPYRIGHT="Lua 5.3.4  Copyright (C) 1994-2017 Lua.org, PUC-Rio",e.exports.LUA_AUTHORS="R. Ierusalimschy, L. H. de Figueiredo, W. Celes";var K={LUA_TNONE:-1,LUA_TNIL:0,LUA_TBOOLEAN:1,LUA_TLIGHTUSERDATA:2,LUA_TNUMBER:3,LUA_TSTRING:4,LUA_TTABLE:5,LUA_TFUNCTION:6,LUA_TUSERDATA:7,LUA_TTHREAD:8,LUA_NUMTAGS:9};K.LUA_TSHRSTR=0|K.LUA_TSTRING,K.LUA_TLNGSTR=16|K.LUA_TSTRING,K.LUA_TNUMFLT=0|K.LUA_TNUMBER,K.LUA_TNUMINT=16|K.LUA_TNUMBER,K.LUA_TLCL=0|K.LUA_TFUNCTION,K.LUA_TLCF=16|K.LUA_TFUNCTION,K.LUA_TCCL=32|K.LUA_TFUNCTION;var Y=-d(3).LUAI_MAXSTACK-1e3;e.exports.LUA_HOOKCALL=0,e.exports.LUA_HOOKCOUNT=3,e.exports.LUA_HOOKLINE=2,e.exports.LUA_HOOKRET=1,e.exports.LUA_HOOKTAILCALL=4,e.exports.LUA_MASKCALL=1,e.exports.LUA_MASKCOUNT=8,e.exports.LUA_MASKLINE=4,e.exports.LUA_MASKRET=2,e.exports.LUA_MINSTACK=20,e.exports.LUA_MULTRET=-1,e.exports.LUA_OPADD=0,e.exports.LUA_OPBAND=7,e.exports.LUA_OPBNOT=13,e.exports.LUA_OPBOR=8,e.exports.LUA_OPBXOR=9,e.exports.LUA_OPDIV=5,e.exports.LUA_OPEQ=0,e.exports.LUA_OPIDIV=6,e.exports.LUA_OPLE=2,e.exports.LUA_OPLT=1,e.exports.LUA_OPMOD=3,e.exports.LUA_OPMUL=2,e.exports.LUA_OPPOW=4,e.exports.LUA_OPSHL=10,e.exports.LUA_OPSHR=11,e.exports.LUA_OPSUB=1,e.exports.LUA_OPUNM=12,e.exports.LUA_REGISTRYINDEX=Y,e.exports.LUA_RIDX_GLOBALS=2,e.exports.LUA_RIDX_LAST=2,e.exports.LUA_RIDX_MAINTHREAD=1,e.exports.constant_types=K,e.exports.lua_Debug=function Le(){(function(fe,Ge){if(!(fe instanceof Ge))throw new TypeError("Cannot call a class as a function")})(this,Le),this.event=NaN,this.name=null,this.namewhat=null,this.what=null,this.source=null,this.currentline=NaN,this.linedefined=NaN,this.lastlinedefined=NaN,this.nups=NaN,this.nparams=NaN,this.isvararg=NaN,this.istailcall=NaN,this.short_src=null,this.i_ci=null},e.exports.lua_upvalueindex=function(Le){return Y-Le},e.exports.thread_status={LUA_OK:0,LUA_YIELD:1,LUA_ERRRUN:2,LUA_ERRSYNTAX:3,LUA_ERRMEM:4,LUA_ERRGCMM:5,LUA_ERRERR:6}},function(e,ga,d){var o=d(1),s=d(19),m=d(11),ge=d(8),b=d(12);e.exports.LUA_AUTHORS=o.LUA_AUTHORS,e.exports.LUA_COPYRIGHT=o.LUA_COPYRIGHT,e.exports.LUA_ERRERR=o.thread_status.LUA_ERRERR,e.exports.LUA_ERRGCMM=o.thread_status.LUA_ERRGCMM,e.exports.LUA_ERRMEM=o.thread_status.LUA_ERRMEM,e.exports.LUA_ERRRUN=o.thread_status.LUA_ERRRUN,e.exports.LUA_ERRSYNTAX=o.thread_status.LUA_ERRSYNTAX,e.exports.LUA_HOOKCALL=o.LUA_HOOKCALL,e.exports.LUA_HOOKCOUNT=o.LUA_HOOKCOUNT,e.exports.LUA_HOOKLINE=o.LUA_HOOKLINE,e.exports.LUA_HOOKRET=o.LUA_HOOKRET,e.exports.LUA_HOOKTAILCALL=o.LUA_HOOKTAILCALL,e.exports.LUA_MASKCALL=o.LUA_MASKCALL,e.exports.LUA_MASKCOUNT=o.LUA_MASKCOUNT,e.exports.LUA_MASKLINE=o.LUA_MASKLINE,e.exports.LUA_MASKRET=o.LUA_MASKRET,e.exports.LUA_MINSTACK=o.LUA_MINSTACK,e.exports.LUA_MULTRET=o.LUA_MULTRET,e.exports.LUA_NUMTAGS=o.constant_types.LUA_NUMTAGS,e.exports.LUA_OK=o.thread_status.LUA_OK,e.exports.LUA_OPADD=o.LUA_OPADD,e.exports.LUA_OPBAND=o.LUA_OPBAND,e.exports.LUA_OPBNOT=o.LUA_OPBNOT,e.exports.LUA_OPBOR=o.LUA_OPBOR,e.exports.LUA_OPBXOR=o.LUA_OPBXOR,e.exports.LUA_OPDIV=o.LUA_OPDIV,e.exports.LUA_OPEQ=o.LUA_OPEQ,e.exports.LUA_OPIDIV=o.LUA_OPIDIV,e.exports.LUA_OPLE=o.LUA_OPLE,e.exports.LUA_OPLT=o.LUA_OPLT,e.exports.LUA_OPMOD=o.LUA_OPMOD,e.exports.LUA_OPMUL=o.LUA_OPMUL,e.exports.LUA_OPPOW=o.LUA_OPPOW,e.exports.LUA_OPSHL=o.LUA_OPSHL,e.exports.LUA_OPSHR=o.LUA_OPSHR,e.exports.LUA_OPSUB=o.LUA_OPSUB,e.exports.LUA_OPUNM=o.LUA_OPUNM,e.exports.LUA_REGISTRYINDEX=o.LUA_REGISTRYINDEX,e.exports.LUA_RELEASE=o.LUA_RELEASE,e.exports.LUA_RIDX_GLOBALS=o.LUA_RIDX_GLOBALS,e.exports.LUA_RIDX_LAST=o.LUA_RIDX_LAST,e.exports.LUA_RIDX_MAINTHREAD=o.LUA_RIDX_MAINTHREAD,e.exports.LUA_SIGNATURE=o.LUA_SIGNATURE,e.exports.LUA_TNONE=o.constant_types.LUA_TNONE,e.exports.LUA_TNIL=o.constant_types.LUA_TNIL,e.exports.LUA_TBOOLEAN=o.constant_types.LUA_TBOOLEAN,e.exports.LUA_TLIGHTUSERDATA=o.constant_types.LUA_TLIGHTUSERDATA,e.exports.LUA_TNUMBER=o.constant_types.LUA_TNUMBER,e.exports.LUA_TSTRING=o.constant_types.LUA_TSTRING,e.exports.LUA_TTABLE=o.constant_types.LUA_TTABLE,e.exports.LUA_TFUNCTION=o.constant_types.LUA_TFUNCTION,e.exports.LUA_TUSERDATA=o.constant_types.LUA_TUSERDATA,e.exports.LUA_TTHREAD=o.constant_types.LUA_TTHREAD,e.exports.LUA_VERSION=o.LUA_VERSION,e.exports.LUA_VERSION_MAJOR=o.LUA_VERSION_MAJOR,e.exports.LUA_VERSION_MINOR=o.LUA_VERSION_MINOR,e.exports.LUA_VERSION_NUM=o.LUA_VERSION_NUM,e.exports.LUA_VERSION_RELEASE=o.LUA_VERSION_RELEASE,e.exports.LUA_YIELD=o.thread_status.LUA_YIELD,e.exports.lua_Debug=o.lua_Debug,e.exports.lua_upvalueindex=o.lua_upvalueindex,e.exports.lua_absindex=s.lua_absindex,e.exports.lua_arith=s.lua_arith,e.exports.lua_atpanic=s.lua_atpanic,e.exports.lua_atnativeerror=s.lua_atnativeerror,e.exports.lua_call=s.lua_call,e.exports.lua_callk=s.lua_callk,e.exports.lua_checkstack=s.lua_checkstack,e.exports.lua_close=b.lua_close,e.exports.lua_compare=s.lua_compare,e.exports.lua_concat=s.lua_concat,e.exports.lua_copy=s.lua_copy,e.exports.lua_createtable=s.lua_createtable,e.exports.lua_dump=s.lua_dump,e.exports.lua_error=s.lua_error,e.exports.lua_gc=s.lua_gc,e.exports.lua_getallocf=s.lua_getallocf,e.exports.lua_getextraspace=s.lua_getextraspace,e.exports.lua_getfield=s.lua_getfield,e.exports.lua_getglobal=s.lua_getglobal,e.exports.lua_gethook=m.lua_gethook,e.exports.lua_gethookcount=m.lua_gethookcount,e.exports.lua_gethookmask=m.lua_gethookmask,e.exports.lua_geti=s.lua_geti,e.exports.lua_getinfo=m.lua_getinfo,e.exports.lua_getlocal=m.lua_getlocal,e.exports.lua_getmetatable=s.lua_getmetatable,e.exports.lua_getstack=m.lua_getstack,e.exports.lua_gettable=s.lua_gettable,e.exports.lua_gettop=s.lua_gettop,e.exports.lua_getupvalue=s.lua_getupvalue,e.exports.lua_getuservalue=s.lua_getuservalue,e.exports.lua_insert=s.lua_insert,e.exports.lua_isboolean=s.lua_isboolean,e.exports.lua_iscfunction=s.lua_iscfunction,e.exports.lua_isfunction=s.lua_isfunction,e.exports.lua_isinteger=s.lua_isinteger,e.exports.lua_islightuserdata=s.lua_islightuserdata,e.exports.lua_isnil=s.lua_isnil,e.exports.lua_isnone=s.lua_isnone,e.exports.lua_isnoneornil=s.lua_isnoneornil,e.exports.lua_isnumber=s.lua_isnumber,e.exports.lua_isproxy=s.lua_isproxy,e.exports.lua_isstring=s.lua_isstring,e.exports.lua_istable=s.lua_istable,e.exports.lua_isthread=s.lua_isthread,e.exports.lua_isuserdata=s.lua_isuserdata,e.exports.lua_isyieldable=ge.lua_isyieldable,e.exports.lua_len=s.lua_len,e.exports.lua_load=s.lua_load,e.exports.lua_newstate=b.lua_newstate,e.exports.lua_newtable=s.lua_newtable,e.exports.lua_newthread=b.lua_newthread,e.exports.lua_newuserdata=s.lua_newuserdata,e.exports.lua_next=s.lua_next,e.exports.lua_pcall=s.lua_pcall,e.exports.lua_pcallk=s.lua_pcallk,e.exports.lua_pop=s.lua_pop,e.exports.lua_pushboolean=s.lua_pushboolean,e.exports.lua_pushcclosure=s.lua_pushcclosure,e.exports.lua_pushcfunction=s.lua_pushcfunction,e.exports.lua_pushfstring=s.lua_pushfstring,e.exports.lua_pushglobaltable=s.lua_pushglobaltable,e.exports.lua_pushinteger=s.lua_pushinteger,e.exports.lua_pushjsclosure=s.lua_pushjsclosure,e.exports.lua_pushjsfunction=s.lua_pushjsfunction,e.exports.lua_pushlightuserdata=s.lua_pushlightuserdata,e.exports.lua_pushliteral=s.lua_pushliteral,e.exports.lua_pushlstring=s.lua_pushlstring,e.exports.lua_pushnil=s.lua_pushnil,e.exports.lua_pushnumber=s.lua_pushnumber,e.exports.lua_pushstring=s.lua_pushstring,e.exports.lua_pushthread=s.lua_pushthread,e.exports.lua_pushvalue=s.lua_pushvalue,e.exports.lua_pushvfstring=s.lua_pushvfstring,e.exports.lua_rawequal=s.lua_rawequal,e.exports.lua_rawget=s.lua_rawget,e.exports.lua_rawgeti=s.lua_rawgeti,e.exports.lua_rawgetp=s.lua_rawgetp,e.exports.lua_rawlen=s.lua_rawlen,e.exports.lua_rawset=s.lua_rawset,e.exports.lua_rawseti=s.lua_rawseti,e.exports.lua_rawsetp=s.lua_rawsetp,e.exports.lua_register=s.lua_register,e.exports.lua_remove=s.lua_remove,e.exports.lua_replace=s.lua_replace,e.exports.lua_resume=ge.lua_resume,e.exports.lua_rotate=s.lua_rotate,e.exports.lua_setallof=ge.lua_setallof,e.exports.lua_setfield=s.lua_setfield,e.exports.lua_setglobal=s.lua_setglobal,e.exports.lua_sethook=m.lua_sethook,e.exports.lua_seti=s.lua_seti,e.exports.lua_setlocal=m.lua_setlocal,e.exports.lua_setmetatable=s.lua_setmetatable,e.exports.lua_settable=s.lua_settable,e.exports.lua_settop=s.lua_settop,e.exports.lua_setupvalue=s.lua_setupvalue,e.exports.lua_setuservalue=s.lua_setuservalue,e.exports.lua_status=s.lua_status,e.exports.lua_stringtonumber=s.lua_stringtonumber,e.exports.lua_toboolean=s.lua_toboolean,e.exports.lua_todataview=s.lua_todataview,e.exports.lua_tointeger=s.lua_tointeger,e.exports.lua_tointegerx=s.lua_tointegerx,e.exports.lua_tojsstring=s.lua_tojsstring,e.exports.lua_tolstring=s.lua_tolstring,e.exports.lua_tonumber=s.lua_tonumber,e.exports.lua_tonumberx=s.lua_tonumberx,e.exports.lua_topointer=s.lua_topointer,e.exports.lua_toproxy=s.lua_toproxy,e.exports.lua_tostring=s.lua_tostring,e.exports.lua_tothread=s.lua_tothread,e.exports.lua_touserdata=s.lua_touserdata,e.exports.lua_type=s.lua_type,e.exports.lua_typename=s.lua_typename,e.exports.lua_upvalueid=s.lua_upvalueid,e.exports.lua_upvaluejoin=s.lua_upvaluejoin,e.exports.lua_version=s.lua_version,e.exports.lua_xmove=s.lua_xmove,e.exports.lua_yield=ge.lua_yield,e.exports.lua_yieldk=ge.lua_yieldk,e.exports.lua_tocfunction=s.lua_tocfunction},function(e,ga,d){var o={},s=d(1),m=s.LUA_VERSION_MAJOR,ge=s.LUA_VERSION_MINOR,b=s.to_luastring;e.exports.LUA_PATH_SEP=";",e.exports.LUA_PATH_MARK="?",e.exports.LUA_EXEC_DIR="!";var y=m+"."+ge;e.exports.LUA_VDIR=y,e.exports.LUA_DIRSEP="/";var N="./lua/"+y+"/";e.exports.LUA_LDIR=N;var pe=N;e.exports.LUA_JSDIR=pe;var q=b(N+"?.lua;"+N+"?/init.lua;./?.lua;./?/init.lua");e.exports.LUA_PATH_DEFAULT=q;var Ne=b(pe+"?.js;"+pe+"loadall.js;./?.js");e.exports.LUA_JSPATH_DEFAULT=Ne;var K=o.LUA_COMPAT_FLOATSTRING||!1,Y=o.LUAI_MAXSTACK||1e6,Le=o.LUA_IDSIZE||59,fe="%".concat("","d"),Ge=o.LUAL_BUFFERSIZE||8192,te=function(ne,Q){for(var ea=Math.min(3,Math.ceil(Math.abs(Q)/1023)),Pe=ne,Xe=0;Xe<ea;Xe++)Pe*=Math.pow(2,Math.floor((Q+Xe)/ea));return Pe};e.exports.LUAI_MAXSTACK=Y,e.exports.LUA_COMPAT_FLOATSTRING=K,e.exports.LUA_IDSIZE=Le,e.exports.LUA_INTEGER_FMT=fe,e.exports.LUA_INTEGER_FRMLEN="",e.exports.LUA_MAXINTEGER=2147483647,e.exports.LUA_MININTEGER=-2147483648,e.exports.LUA_NUMBER_FMT="%.14g",e.exports.LUA_NUMBER_FRMLEN="",e.exports.LUAL_BUFFERSIZE=Ge,e.exports.frexp=function(ne){if(ne===0)return[ne,0];var Q=new DataView(new ArrayBuffer(8));Q.setFloat64(0,ne);var ea=Q.getUint32(0)>>>20&2047;ea===0&&(Q.setFloat64(0,ne*Math.pow(2,64)),ea=(Q.getUint32(0)>>>20&2047)-64);var Pe=ea-1022;return[te(ne,-Pe),Pe]},e.exports.ldexp=te,e.exports.lua_getlocaledecpoint=function(){return 46},e.exports.lua_integer2str=function(ne){return String(ne)},e.exports.lua_number2str=function(ne){return String(Number(ne.toPrecision(14)))},e.exports.lua_numbertointeger=function(ne){return ne>=-2147483648&&ne<2147483648&&ne},e.exports.luai_apicheck=function(ne,Q){if(!Q)throw Error(Q)}},function(e,ga,d){var o=d(3).luai_apicheck,s=function(m){if(!m)throw Error("assertion failed")};e.exports.lua_assert=s,e.exports.luai_apicheck=o||function(m,ge){return s(ge)},e.exports.api_check=function(m,ge,b){return o(m,ge&&b)},e.exports.LUAI_MAXCCALLS=200,e.exports.LUA_MINBUFFER=32,e.exports.luai_nummod=function(m,ge,b){var y=ge%b;return y*b<0&&(y+=b),y},e.exports.MAX_INT=2147483647,e.exports.MIN_INT=-2147483648},function(e,ga,d){var o=d(1),s=`Fengari 0.1.4  Copyright (C) 2017-2018 B. Giannangeli, Daurnimator
Based on: `+o.LUA_COPYRIGHT;e.exports.FENGARI_AUTHORS="B. Giannangeli, Daurnimator",e.exports.FENGARI_COPYRIGHT=s,e.exports.FENGARI_RELEASE="Fengari 0.1.4",e.exports.FENGARI_VERSION="Fengari 0.1",e.exports.FENGARI_VERSION_MAJOR="0",e.exports.FENGARI_VERSION_MINOR="1",e.exports.FENGARI_VERSION_NUM=1,e.exports.FENGARI_VERSION_RELEASE="4",e.exports.is_luastring=o.is_luastring,e.exports.luastring_eq=o.luastring_eq,e.exports.luastring_from=o.luastring_from,e.exports.luastring_indexOf=o.luastring_indexOf,e.exports.luastring_of=o.luastring_of,e.exports.to_jsstring=o.to_jsstring,e.exports.to_luastring=o.to_luastring,e.exports.to_uristring=o.to_uristring,e.exports.from_userstring=o.from_userstring},function(e,ga,d){var o;function s(A){return(s=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(M){return typeof M}:function(M){return M&&typeof Symbol=="function"&&M.constructor===Symbol&&M!==Symbol.prototype?"symbol":typeof M})(A)}function m(A,M,ue){return M in A?Object.defineProperty(A,M,{value:ue,enumerable:!0,configurable:!0,writable:!0}):A[M]=ue,A}function ge(A,M){if(!(A instanceof M))throw new TypeError("Cannot call a class as a function")}function b(A,M){for(var ue=0;ue<M.length;ue++){var oe=M[ue];oe.enumerable=oe.enumerable||!1,oe.configurable=!0,"value"in oe&&(oe.writable=!0),Object.defineProperty(A,oe.key,oe)}}var y=d(1),N=y.LUA_OPADD,pe=y.LUA_OPBAND,q=y.LUA_OPBNOT,Ne=y.LUA_OPBOR,K=y.LUA_OPBXOR,Y=y.LUA_OPDIV,Le=y.LUA_OPIDIV,fe=y.LUA_OPMOD,Ge=y.LUA_OPMUL,te=y.LUA_OPPOW,ne=y.LUA_OPSHL,Q=y.LUA_OPSHR,ea=y.LUA_OPSUB,Pe=y.LUA_OPUNM,Xe=y.constant_types,De=Xe.LUA_NUMTAGS,aa=Xe.LUA_TBOOLEAN,w=Xe.LUA_TCCL,j=Xe.LUA_TFUNCTION,I=Xe.LUA_TLCF,G=Xe.LUA_TLCL,Oe=Xe.LUA_TLIGHTUSERDATA,me=Xe.LUA_TLNGSTR,Z=Xe.LUA_TNIL,de=Xe.LUA_TNUMBER,We=Xe.LUA_TNUMFLT,se=Xe.LUA_TNUMINT,Ue=Xe.LUA_TSHRSTR,P=Xe.LUA_TSTRING,C=Xe.LUA_TTABLE,T=Xe.LUA_TTHREAD,E=Xe.LUA_TUSERDATA,X=y.from_userstring,R=y.luastring_indexOf,_e=y.luastring_of,Te=y.to_jsstring,na=y.to_luastring,qe=d(22),fa=qe.lisdigit,va=qe.lisprint,U=qe.lisspace,S=qe.lisxdigit,ve=d(11),F=d(8),Je=d(12),Ye=d(10),Ze=Ye.luaS_bless,he=Ye.luaS_new,ha=d(9),La=d(3),z=La.LUA_COMPAT_FLOATSTRING,je=La.ldexp,Ke=La.lua_integer2str,i=La.lua_number2str,$=d(15),ke=d(4),Qe=ke.MAX_INT,sa=ke.luai_nummod,xa=ke.lua_assert,Ma=d(14),_a=De,Ua=De+1,Ra=(function(){function A(M,ue){ge(this,A),this.type=M,this.value=ue}return(function(M,ue,oe){ue&&b(M.prototype,ue)})(A,[{key:"ttype",value:function(){return 63&this.type}},{key:"ttnov",value:function(){return 15&this.type}},{key:"checktag",value:function(M){return this.type===M}},{key:"checktype",value:function(M){return this.ttnov()===M}},{key:"ttisnumber",value:function(){return this.checktype(de)}},{key:"ttisfloat",value:function(){return this.checktag(We)}},{key:"ttisinteger",value:function(){return this.checktag(se)}},{key:"ttisnil",value:function(){return this.checktag(Z)}},{key:"ttisboolean",value:function(){return this.checktag(aa)}},{key:"ttislightuserdata",value:function(){return this.checktag(Oe)}},{key:"ttisstring",value:function(){return this.checktype(P)}},{key:"ttisshrstring",value:function(){return this.checktag(Ue)}},{key:"ttislngstring",value:function(){return this.checktag(me)}},{key:"ttistable",value:function(){return this.checktag(C)}},{key:"ttisfunction",value:function(){return this.checktype(j)}},{key:"ttisclosure",value:function(){return(31&this.type)===j}},{key:"ttisCclosure",value:function(){return this.checktag(w)}},{key:"ttisLclosure",value:function(){return this.checktag(G)}},{key:"ttislcf",value:function(){return this.checktag(I)}},{key:"ttisfulluserdata",value:function(){return this.checktag(E)}},{key:"ttisthread",value:function(){return this.checktag(T)}},{key:"ttisdeadkey",value:function(){return this.checktag(Ua)}},{key:"l_isfalse",value:function(){return this.ttisnil()||this.ttisboolean()&&this.value===!1}},{key:"setfltvalue",value:function(M){this.type=We,this.value=M}},{key:"chgfltvalue",value:function(M){xa(this.type==We),this.value=M}},{key:"setivalue",value:function(M){this.type=se,this.value=M}},{key:"chgivalue",value:function(M){xa(this.type==se),this.value=M}},{key:"setnilvalue",value:function(){this.type=Z,this.value=null}},{key:"setfvalue",value:function(M){this.type=I,this.value=M}},{key:"setpvalue",value:function(M){this.type=Oe,this.value=M}},{key:"setbvalue",value:function(M){this.type=aa,this.value=M}},{key:"setsvalue",value:function(M){this.type=me,this.value=M}},{key:"setuvalue",value:function(M){this.type=E,this.value=M}},{key:"setthvalue",value:function(M){this.type=T,this.value=M}},{key:"setclLvalue",value:function(M){this.type=G,this.value=M}},{key:"setclCvalue",value:function(M){this.type=w,this.value=M}},{key:"sethvalue",value:function(M){this.type=C,this.value=M}},{key:"setdeadvalue",value:function(){this.type=Ua,this.value=null}},{key:"setfrom",value:function(M){this.type=M.type,this.value=M.value}},{key:"tsvalue",value:function(){return xa(this.ttisstring()),this.value}},{key:"svalue",value:function(){return this.tsvalue().getstr()}},{key:"vslen",value:function(){return this.tsvalue().tsslen()}},{key:"jsstring",value:function(M,ue){return Te(this.svalue(),M,ue,!0)}}]),A})(),Va=function(A,M,ue){A.stack[M].setsvalue(ue)},h=new Ra(Z,null);Object.freeze(h),e.exports.luaO_nilobject=h;var ce=function A(M,ue){ge(this,A),this.id=M.l_G.id_counter++,this.p=null,this.nupvalues=ue,this.upvals=new Array(ue)},Se=function A(M,ue,oe){for(ge(this,A),this.id=M.l_G.id_counter++,this.f=ue,this.nupvalues=oe,this.upvalue=new Array(oe);oe--;)this.upvalue[oe]=new Ra(Z,null)},Ee=function A(M,ue){ge(this,A),this.id=M.l_G.id_counter++,this.metatable=null,this.uservalue=new Ra(Z,null),this.len=ue,this.data=Object.create(null)},xe=na("..."),ee=na('[string "'),ra=na('"]'),da=function(A){return fa(A)?A-48:(223&A)-55},Oa=function(A,M){var ue=1;if(xa(M<=1114111),M<128)A[7]=M;else{var oe=63;do A[8-ue++]=128|63&M,M>>=6,oe>>=1;while(M>oe);A[8-ue]=~oe<<1|M}return ue},Ea=function(A,M){var ue=M==="x"?(function(oe){for(var Ta,Ve=0,H=0,Ae=0,He=0,$e=0,ka=!1;U(oe[Ve]);)Ve++;if(((Ta=oe[Ve]===45)||oe[Ve]===43)&&Ve++,oe[Ve]!==48||oe[Ve+1]!==120&&oe[Ve+1]!==88)return null;for(Ve+=2;;Ve++)if(oe[Ve]===46){if(ka)break;ka=!0}else{if(!S(oe[Ve]))break;Ae===0&&oe[Ve]===48?He++:++Ae<=30?H=16*H+da(oe[Ve]):$e++,ka&&$e--}if(He+Ae===0)return null;if($e*=4,oe[Ve]===112||oe[Ve]===80){var Sa,wa=0;if(((Sa=oe[++Ve]===45)||oe[Ve]===43)&&Ve++,!fa(oe[Ve]))return null;for(;fa(oe[Ve]);)wa=10*wa+oe[Ve++]-48;Sa&&(wa=-wa),$e+=wa}return Ta&&(H=-H),{n:je(H,$e),i:Ve}})(A):(function(oe){try{oe=Te(oe)}catch{return null}var Ta=/^[\t\v\f \n\r]*[+-]?(?:[0-9]+\.?[0-9]*|\.[0-9]*)(?:[eE][+-]?[0-9]+)?/.exec(oe);if(!Ta)return null;var Ve=parseFloat(Ta[0]);return isNaN(Ve)?null:{n:Ve,i:Ta[0].length}})(A);if(ue===null)return null;for(;U(A[ue.i]);)ue.i++;return ue.i===A.length||A[ue.i]===0?ue:null},Ia=[46,120,88,110,78],pa=(m(o={},46,"."),m(o,120,"x"),m(o,88,"x"),m(o,110,"n"),m(o,78,"n"),o),a=Math.floor(Qe/10),p=Qe%10,r=function(A,M){var ue;if(M.ttisinteger())ue=na(Ke(M.value));else{var oe=i(M.value);!z&&/^[-0123456789]+$/.test(oe)&&(oe+=".0"),ue=na(oe)}M.setsvalue(Ze(A,ue))},n=function(A,M){F.luaD_inctop(A),Va(A,A.top-1,he(A,M))},L=function(A,M,ue){for(var oe,Ta=0,Ve=0,H=0;(oe=R(M,37,Ve))!=-1;){switch(n(A,M.subarray(Ve,oe)),M[oe+1]){case 115:var Ae=ue[H++];if(Ae===null)Ae=na("(null)",!0);else{Ae=X(Ae);var He=R(Ae,0);He!==-1&&(Ae=Ae.subarray(0,He))}n(A,Ae);break;case 99:var $e=ue[H++];va($e)?n(A,_e($e)):l(A,na("<\\%d>",!0),$e);break;case 100:case 73:F.luaD_inctop(A),A.stack[A.top-1].setivalue(ue[H++]),r(A,A.stack[A.top-1]);break;case 102:F.luaD_inctop(A),A.stack[A.top-1].setfltvalue(ue[H++]),r(A,A.stack[A.top-1]);break;case 112:var ka=ue[H++];if(ka instanceof Je.lua_State||ka instanceof ha.Table||ka instanceof Ee||ka instanceof ce||ka instanceof Se)n(A,na("0x"+ka.id.toString(16)));else switch(s(ka)){case"undefined":n(A,na("undefined"));break;case"number":n(A,na("Number("+ka+")"));break;case"string":n(A,na("String("+JSON.stringify(ka)+")"));break;case"boolean":n(A,na(ka?"Boolean(true)":"Boolean(false)"));break;case"object":if(ka===null){n(A,na("null"));break}case"function":var Sa=A.l_G.ids.get(ka);Sa||(Sa=A.l_G.id_counter++,A.l_G.ids.set(ka,Sa)),n(A,na("0x"+Sa.toString(16)));break;default:n(A,na("<id NYI>"))}break;case 85:var wa=new Uint8Array(8),Fa=Oa(wa,ue[H++]);n(A,wa.subarray(8-Fa));break;case 37:n(A,na("%",!0));break;default:ve.luaG_runerror(A,na("invalid option '%%%c' to 'lua_pushfstring'"),M[oe+1])}Ta+=2,Ve=oe+2}return F.luaD_checkstack(A,1),n(A,M.subarray(Ve)),Ta>0&&$.luaV_concat(A,Ta+1),A.stack[A.top-1].svalue()},l=function(A,M){for(var ue=arguments.length,oe=new Array(ue>2?ue-2:0),Ta=2;Ta<ue;Ta++)oe[Ta-2]=arguments[Ta];return L(A,M,oe)},_=function(A,M,ue,oe){switch(M){case N:return ue+oe|0;case ea:return ue-oe|0;case Ge:return $.luaV_imul(ue,oe);case fe:return $.luaV_mod(A,ue,oe);case Le:return $.luaV_div(A,ue,oe);case pe:return ue&oe;case Ne:return ue|oe;case K:return ue^oe;case ne:return $.luaV_shiftl(ue,oe);case Q:return $.luaV_shiftl(ue,-oe);case Pe:return 0-ue|0;case q:return-1^ue;default:xa(0)}},B=function(A,M,ue,oe){switch(M){case N:return ue+oe;case ea:return ue-oe;case Ge:return ue*oe;case Y:return ue/oe;case te:return Math.pow(ue,oe);case Le:return Math.floor(ue/oe);case Pe:return-ue;case fe:return sa(A,ue,oe);default:xa(0)}};e.exports.CClosure=Se,e.exports.LClosure=ce,e.exports.LUA_TDEADKEY=Ua,e.exports.LUA_TPROTO=_a,e.exports.LocVar=function A(){ge(this,A),this.varname=null,this.startpc=NaN,this.endpc=NaN},e.exports.TValue=Ra,e.exports.Udata=Ee,e.exports.UTF8BUFFSZ=8,e.exports.luaO_arith=function(A,M,ue,oe,Ta){var Ve=typeof Ta=="number"?A.stack[Ta]:Ta;switch(M){case pe:case Ne:case K:case ne:case Q:case q:var H,Ae;if((H=$.tointeger(ue))!==!1&&(Ae=$.tointeger(oe))!==!1)return void Ve.setivalue(_(A,M,H,Ae));break;case Y:case te:var He,$e;if((He=$.tonumber(ue))!==!1&&($e=$.tonumber(oe))!==!1)return void Ve.setfltvalue(B(A,M,He,$e));break;default:var ka,Sa;if(ue.ttisinteger()&&oe.ttisinteger())return void Ve.setivalue(_(A,M,ue.value,oe.value));if((ka=$.tonumber(ue))!==!1&&(Sa=$.tonumber(oe))!==!1)return void Ve.setfltvalue(B(A,M,ka,Sa))}xa(A!==null),Ma.luaT_trybinTM(A,ue,oe,Ta,M-N+Ma.TMS.TM_ADD)},e.exports.luaO_chunkid=function(A,M){var ue,oe=A.length;if(A[0]===61)oe<M?(ue=new Uint8Array(oe-1)).set(A.subarray(1)):(ue=new Uint8Array(M)).set(A.subarray(1,M+1));else if(A[0]===64)oe<=M?(ue=new Uint8Array(oe-1)).set(A.subarray(1)):((ue=new Uint8Array(M)).set(xe),M-=xe.length,ue.set(A.subarray(oe-M),xe.length));else{ue=new Uint8Array(M);var Ta=R(A,10);ue.set(ee);var Ve=ee.length;oe<(M-=ee.length+xe.length+ra.length)&&Ta===-1?(ue.set(A,Ve),Ve+=A.length):(Ta!==-1&&(oe=Ta),oe>M&&(oe=M),ue.set(A.subarray(0,oe),Ve),Ve+=oe,ue.set(xe,Ve),Ve+=xe.length),ue.set(ra,Ve),Ve+=ra.length,ue=ue.subarray(0,Ve)}return ue},e.exports.luaO_hexavalue=da,e.exports.luaO_int2fb=function(A){var M=0;if(A<8)return A;for(;A>=128;)A=A+15>>4,M+=4;for(;A>=16;)A=A+1>>1,M++;return M+1<<3|A-8},e.exports.luaO_pushfstring=l,e.exports.luaO_pushvfstring=L,e.exports.luaO_str2num=function(A,M){var ue=(function(oe){for(var Ta,Ve=0,H=0,Ae=!0;U(oe[Ve]);)Ve++;if(((Ta=oe[Ve]===45)||oe[Ve]===43)&&Ve++,oe[Ve]!==48||oe[Ve+1]!==120&&oe[Ve+1]!==88)for(;Ve<oe.length&&fa(oe[Ve]);Ve++){var He=oe[Ve]-48;if(H>=a&&(H>a||He>p+Ta))return null;H=10*H+He|0,Ae=!1}else for(Ve+=2;Ve<oe.length&&S(oe[Ve]);Ve++)H=16*H+da(oe[Ve])|0,Ae=!1;for(;Ve<oe.length&&U(oe[Ve]);)Ve++;return Ae||Ve!==oe.length&&oe[Ve]!==0?null:{n:0|(Ta?-H:H),i:Ve}})(A);return ue!==null?(M.setivalue(ue.n),ue.i+1):(ue=(function(oe){for(var Ta=oe.length,Ve=0,H=0;H<Ta;H++){var Ae=oe[H];if(Ia.indexOf(Ae)!==-1){Ve=Ae;break}}var He=pa[Ve];return He==="n"?null:Ea(oe,He)})(A))!==null?(M.setfltvalue(ue.n),ue.i+1):0},e.exports.luaO_tostring=r,e.exports.luaO_utf8esc=Oa,e.exports.numarith=B,e.exports.pushobj2s=function(A,M){A.stack[A.top++]=new Ra(M.type,M.value)},e.exports.pushsvalue2s=function(A,M){A.stack[A.top++]=new Ra(me,M)},e.exports.setobjs2s=function(A,M,ue){A.stack[M].setfrom(A.stack[ue])},e.exports.setobj2s=function(A,M,ue){A.stack[M].setfrom(ue)},e.exports.setsvalue2s=Va},function(e,ga,d){function o(u,g){if(!(u instanceof g))throw new TypeError("Cannot call a class as a function")}var s,m,ge=d(3).LUAL_BUFFERSIZE,b=d(2),y=b.LUA_ERRERR,N=b.LUA_MULTRET,pe=b.LUA_REGISTRYINDEX,q=b.LUA_SIGNATURE,Ne=b.LUA_TBOOLEAN,K=b.LUA_TLIGHTUSERDATA,Y=b.LUA_TNIL,Le=b.LUA_TNONE,fe=b.LUA_TNUMBER,Ge=b.LUA_TSTRING,te=b.LUA_TTABLE,ne=b.LUA_VERSION_NUM,Q=b.lua_Debug,ea=b.lua_absindex,Pe=b.lua_atpanic,Xe=b.lua_call,De=b.lua_checkstack,aa=b.lua_concat,w=b.lua_copy,j=b.lua_createtable,I=b.lua_error,G=b.lua_getfield,Oe=b.lua_getinfo,me=b.lua_getmetatable,Z=b.lua_getstack,de=b.lua_gettop,We=b.lua_insert,se=b.lua_isinteger,Ue=b.lua_isnil,P=b.lua_isnumber,C=b.lua_isstring,T=b.lua_istable,E=b.lua_len,X=b.lua_load,R=b.lua_newstate,_e=b.lua_newtable,Te=b.lua_next,na=b.lua_pcall,qe=b.lua_pop,fa=b.lua_pushboolean,va=b.lua_pushcclosure,U=b.lua_pushcfunction,S=b.lua_pushfstring,ve=b.lua_pushinteger,F=b.lua_pushliteral,Je=b.lua_pushlstring,Ye=b.lua_pushnil,Ze=b.lua_pushstring,he=b.lua_pushvalue,ha=b.lua_pushvfstring,La=b.lua_rawequal,z=b.lua_rawget,je=b.lua_rawgeti,Ke=b.lua_rawlen,i=b.lua_rawseti,$=b.lua_remove,ke=b.lua_setfield,Qe=b.lua_setglobal,sa=b.lua_setmetatable,xa=b.lua_settop,Ma=b.lua_toboolean,_a=b.lua_tointeger,Ua=b.lua_tointegerx,Ra=b.lua_tojsstring,Va=b.lua_tolstring,h=b.lua_tonumber,ce=b.lua_tonumberx,Se=b.lua_topointer,Ee=b.lua_tostring,xe=b.lua_touserdata,ee=b.lua_type,ra=b.lua_typename,da=b.lua_version,Oa=d(5),Ea=Oa.from_userstring,Ia=Oa.luastring_eq,pa=Oa.to_luastring,a=Oa.to_uristring,p=y+1,r=pa("_LOADED"),n=pa("_PRELOAD"),L=pa("FILE*"),l=pa("__name"),_=pa("__tostring"),B=new Uint8Array(0),A=function u(){o(this,u),this.L=null,this.b=B,this.n=0},M=function(u,g){var V=de(u);if(Oe(u,pa("f"),g),G(u,pe,r),(function ca(ba,Na,Da){if(Da===0||!T(ba,-1))return 0;for(Ye(ba);Te(ba,-2);){if(ee(ba,-2)===Ge){if(La(ba,Na,-1))return qe(ba,1),1;if(ca(ba,Na,Da-1))return $(ba,-2),F(ba,"."),We(ba,-2),aa(ba,3),1}qe(ba,1)}return 0})(u,V+1,2)){var we=Ee(u,-1);return we[0]===95&&we[1]===71&&we[2]===46&&(Ze(u,we.subarray(3)),$(u,-2)),w(u,-1,V+1),qe(u,2),1}return xa(u,V),0},ue=function(u,g){M(u,g)?(S(u,pa("function '%s'"),Ee(u,-1)),$(u,-2)):g.namewhat.length!==0?S(u,pa("%s '%s'"),g.namewhat,g.name):g.what&&g.what[0]===109?F(u,"main chunk"):g.what&&g.what[0]===76?S(u,pa("function <%s:%d>"),g.short_src,g.linedefined):F(u,"?")},oe=function(u){var g="PANIC: unprotected error in call to Lua API ("+Ra(u,-1)+")";throw new Error(g)},Ta=function(u,g,V){var we=new Q;return Z(u,0,we)?(Oe(u,pa("n"),we),Ia(we.namewhat,pa("method"))&&--g===0?Ae(u,pa("calling '%s' on bad self (%s)"),we.name,V):(we.name===null&&(we.name=M(u,we)?Ee(u,-1):pa("?")),Ae(u,pa("bad argument #%d to '%s' (%s)"),g,we.name,V))):Ae(u,pa("bad argument #%d (%s)"),g,V)},Ve=function(u,g,V){var we;we=Re(u,g,l)===Ge?Ee(u,-1):ee(u,g)===K?pa("light userdata",!0):wa(u,g);var ca=S(u,pa("%s expected, got %s"),V,we);return Ta(u,g,ca)},H=function(u,g){var V=new Q;Z(u,g,V)&&(Oe(u,pa("Sl",!0),V),V.currentline>0)?S(u,pa("%s:%d: "),V.short_src,V.currentline):Ze(u,pa(""))},Ae=function(u,g){H(u,1);for(var V=arguments.length,we=new Array(V>2?V-2:0),ca=2;ca<V;ca++)we[ca-2]=arguments[ca];return ha(u,g,we),aa(u,2),I(u)},He=function(u,g,V,we){return g?(fa(u,1),1):(Ye(u),we?(ca=we.message,ba=-we.errno):(ca="Success",ba=0),V?S(u,pa("%s: %s"),V,pa(ca)):Ze(u,pa(ca)),ve(u,ba),3);var ca,ba},$e=function(u,g){return G(u,pe,g)},ka=function(u,g,V){var we=xe(u,g);return we!==null&&me(u,g)?($e(u,V),La(u,-1,-2)||(we=null),qe(u,2),we):null},Sa=function(u,g,V){Ve(u,g,ra(u,V))},wa=function(u,g){return ra(u,ee(u,g))},Fa=function(u,g){var V=Va(u,g);return V!=null||Sa(u,g,Ge),V},Qa=Fa,v=function(u,g,V){return ee(u,g)<=0?V===null?null:Ea(V):Fa(u,g)},ie=v,Ie=function(u,g){var V=ce(u,g);return V===!1&&Sa(u,g,fe),V},ta=function(u,g){var V=Ua(u,g);return V===!1&&(function(we,ca){P(we,ca)?Ta(we,ca,pa("number has no integer representation",!0)):Sa(we,ca,fe)})(u,g),V},la=function(u,g){var V=u.n+g;if(u.b.length<V){var we=Math.max(2*u.b.length,V),ca=new Uint8Array(we);ca.set(u.b),u.b=ca}return u.b.subarray(u.n,V)},ua=function(u,g){g.L=u,g.b=B},Pa=function(u,g,V){V>0&&(g=Ea(g),la(u,V).set(g.subarray(0,V)),ja(u,V))},za=function(u,g){g=Ea(g),Pa(u,g,g.length)},Xa=function(u){Je(u.L,u.b,u.n),u.n=0,u.b=B},ja=function(u,g){u.n+=g},Ka=function(u,g,V,we){return ee(u,V)<=0?we:g(u,V)},Ga=function(u,g){var V=g.string;return g.string=null,V},Ya=function(u,g,V,we,ca){return X(u,Ga,{string:g},we,ca)},c=function(u,g,V,we){return Ya(u,g,0,we,null)},J=function(u,g){return c(u,g,g.length,g)},Re=function(u,g,V){if(me(u,g)){Ze(u,V);var we=z(u,-2);return we===Y?qe(u,2):$(u,-2),we}return Y},Me=function(u,g,V){return g=ea(u,g),Re(u,g,V)!==Y&&(he(u,g),Xe(u,1,1),!0)},ze=pa("%I"),Be=pa("%f"),Ce=function(u,g,V){var we=V>>>0,ca=g.length,ba=u.length+1-ca;e:for(;we<ba;we++){for(var Na=0;Na<ca;Na++)if(u[we+Na]!==g[Na])continue e;return we}return-1},Ba=function(u,g,V){return G(u,g,V)===te||(qe(u,1),g=ea(u,g),_e(u),he(u,-1),ke(u,g,V),!1)},t=function(u,g,V){for(var we in O(u,V,pa("too many upvalues",!0)),g){for(var ca=0;ca<V;ca++)he(u,-V);va(u,g[we],V),ke(u,-(V+2),pa(we))}qe(u,V)},O=function(u,g,V){De(u,g)||(V?Ae(u,pa("stack overflow (%s)"),V):Ae(u,pa("stack overflow",!0)))},k=function(u,g,V,we){var ca=we.message,ba=Ee(u,V).subarray(1);return S(u,pa("cannot %s %s: %s"),pa(g),ba,pa(ca)),$(u,V),p},D=[239,187,191],ae=function(u){var g=(function(V){var we;V.n=0;var ca=0;do{if((we=s(V))===null||we!==D[ca])return we;ca++,V.buff[V.n++]=we}while(ca<D.length);return V.n=0,s(V)})(u);if(g===35){do g=s(u);while(g&&g!==10);return{skipped:!0,c:s(u)}}return{skipped:!1,c:g}},re=function(u,g){var V=g;if(V.f!==null&&V.n>0){var we=V.n;return V.n=0,V.f=V.f.subarray(V.pos),V.buff.subarray(0,we)}var ca=V.f;return V.f=null,ca};s=function(u){return u.pos<u.f.length?u.f[u.pos++]:null},m=function(u,g,V){var we=new function Wa(){o(this,Wa),this.n=NaN,this.f=null,this.buff=new Uint8Array(1024),this.pos=0,this.err=void 0},ca=de(u)+1;if(g===null)throw new Error("Can't read stdin in the browser");S(u,pa("@%s"),g);var ba=a(g),Na=new XMLHttpRequest;if(Na.open("GET",ba,!1),typeof window>"u"&&(Na.responseType="arraybuffer"),Na.send(),!(Na.status>=200&&Na.status<=299))return we.err=Na.status,k(u,"open",ca,{message:"".concat(Na.status,": ").concat(Na.statusText)});typeof Na.response=="string"?we.f=pa(Na.response):we.f=new Uint8Array(Na.response);var Da=ae(we);Da.c===q[0]&&g||Da.skipped&&(we.buff[we.n++]=10),Da.c!==null&&(we.buff[we.n++]=Da.c);var Za=X(u,re,we,Ee(u,-1),V),qa=we.err;return qa?(xa(u,ca),k(u,"read",ca,qa)):($(u,ca),Za)};var ia=function(u,g){return m(u,g,null)},ma=function(u,g,V){var we=da(u);V!=72&&Ae(u,pa("core and library have incompatible numeric types")),we!=da(null)?Ae(u,pa("multiple Lua VMs detected")):we!==g&&Ae(u,pa("version mismatch: app. needs %f, Lua core provides %f"),g,we)};e.exports.LUA_ERRFILE=p,e.exports.LUA_FILEHANDLE=L,e.exports.LUA_LOADED_TABLE=r,e.exports.LUA_NOREF=-2,e.exports.LUA_PRELOAD_TABLE=n,e.exports.LUA_REFNIL=-1,e.exports.luaL_Buffer=A,e.exports.luaL_addchar=function(u,g){la(u,1),u.b[u.n++]=g},e.exports.luaL_addlstring=Pa,e.exports.luaL_addsize=ja,e.exports.luaL_addstring=za,e.exports.luaL_addvalue=function(u){var g=u.L,V=Ee(g,-1);Pa(u,V,V.length),qe(g,1)},e.exports.luaL_argcheck=function(u,g,V,we){g||Ta(u,V,we)},e.exports.luaL_argerror=Ta,e.exports.luaL_buffinit=ua,e.exports.luaL_buffinitsize=function(u,g,V){return ua(u,g),la(g,V)},e.exports.luaL_callmeta=Me,e.exports.luaL_checkany=function(u,g){ee(u,g)===Le&&Ta(u,g,pa("value expected",!0))},e.exports.luaL_checkinteger=ta,e.exports.luaL_checklstring=Fa,e.exports.luaL_checknumber=Ie,e.exports.luaL_checkoption=function(u,g,V,we){for(var ca=V!==null?ie(u,g,V):Qa(u,g),ba=0;we[ba];ba++)if(Ia(we[ba],ca))return ba;return Ta(u,g,S(u,pa("invalid option '%s'"),ca))},e.exports.luaL_checkstack=O,e.exports.luaL_checkstring=Qa,e.exports.luaL_checktype=function(u,g,V){ee(u,g)!==V&&Sa(u,g,V)},e.exports.luaL_checkudata=function(u,g,V){var we=ka(u,g,V);return we===null&&Ve(u,g,V),we},e.exports.luaL_checkversion=function(u){ma(u,ne,72)},e.exports.luaL_checkversion_=ma,e.exports.luaL_dofile=function(u,g){return ia(u,g)||na(u,0,N,0)},e.exports.luaL_dostring=function(u,g){return J(u,g)||na(u,0,N,0)},e.exports.luaL_error=Ae,e.exports.luaL_execresult=function(u,g){var V,we;if(g===null)return fa(u,1),F(u,"exit"),ve(u,0),3;if(g.status)V="exit",we=g.status;else{if(!g.signal)return He(u,0,null,g);V="signal",we=g.signal}return Ye(u),F(u,V),ve(u,we),3},e.exports.luaL_fileresult=He,e.exports.luaL_getmetafield=Re,e.exports.luaL_getmetatable=$e,e.exports.luaL_getsubtable=Ba,e.exports.luaL_gsub=function(u,g,V,we){var ca,ba=new A;for(ua(u,ba);(ca=Ce(g,V))>=0;)Pa(ba,g,ca),za(ba,we),g=g.subarray(ca+V.length);return za(ba,g),Xa(ba),Ee(u,-1)},e.exports.luaL_len=function(u,g){E(u,g);var V=Ua(u,-1);return V===!1&&Ae(u,pa("object length is not an integer",!0)),qe(u,1),V},e.exports.luaL_loadbuffer=c,e.exports.luaL_loadbufferx=Ya,e.exports.luaL_loadfile=ia,e.exports.luaL_loadfilex=m,e.exports.luaL_loadstring=J,e.exports.luaL_newlib=function(u,g){j(u),t(u,g,0)},e.exports.luaL_newlibtable=function(u){j(u)},e.exports.luaL_newmetatable=function(u,g){return $e(u,g)!==Y?0:(qe(u,1),j(u,0,2),Ze(u,g),ke(u,-2,l),he(u,-1),ke(u,pe,g),1)},e.exports.luaL_newstate=function(){var u=R();return u&&Pe(u,oe),u},e.exports.luaL_opt=Ka,e.exports.luaL_optinteger=function(u,g,V){return Ka(u,ta,g,V)},e.exports.luaL_optlstring=v,e.exports.luaL_optnumber=function(u,g,V){return Ka(u,Ie,g,V)},e.exports.luaL_optstring=ie,e.exports.luaL_prepbuffer=function(u){return la(u,ge)},e.exports.luaL_prepbuffsize=la,e.exports.luaL_pushresult=Xa,e.exports.luaL_pushresultsize=function(u,g){ja(u,g),Xa(u)},e.exports.luaL_ref=function(u,g){var V;return Ue(u,-1)?(qe(u,1),-1):(g=ea(u,g),je(u,g,0),V=_a(u,-1),qe(u,1),V!==0?(je(u,g,V),i(u,g,0)):V=Ke(u,g)+1,i(u,g,V),V)},e.exports.luaL_requiref=function(u,g,V,we){Ba(u,pe,r),G(u,-1,g),Ma(u,-1)||(qe(u,1),U(u,V),Ze(u,g),Xe(u,1,1),he(u,-1),ke(u,-3,g)),$(u,-2),we&&(he(u,-1),Qe(u,g))},e.exports.luaL_setfuncs=t,e.exports.luaL_setmetatable=function(u,g){$e(u,g),sa(u,-2)},e.exports.luaL_testudata=ka,e.exports.luaL_tolstring=function(u,g){if(Me(u,g,_))C(u,-1)||Ae(u,pa("'__tostring' must return a string"));else switch(ee(u,g)){case fe:se(u,g)?S(u,ze,_a(u,g)):S(u,Be,h(u,g));break;case Ge:he(u,g);break;case Ne:F(u,Ma(u,g)?"true":"false");break;case Y:F(u,"nil");break;default:var V=Re(u,g,l),we=V===Ge?Ee(u,-1):wa(u,g);S(u,pa("%s: %p"),we,Se(u,g)),V!==Y&&$(u,-2)}return Va(u,-1)},e.exports.luaL_traceback=function(u,g,V,we){var ca=new Q,ba=de(u),Na=(function(Za){for(var qa=new Q,Wa=1,Ja=1;Z(Za,Ja,qa);)Wa=Ja,Ja*=2;for(;Wa<Ja;){var $a=Math.floor((Wa+Ja)/2);Z(Za,$a,qa)?Wa=$a+1:Ja=$a}return Ja-1})(g),Da=Na-we>21?10:-1;for(V&&S(u,pa(`%s
`),V),O(u,10,null),F(u,"stack traceback:");Z(g,we++,ca);)Da--==0?(F(u,`
	...`),we=Na-11+1):(Oe(g,pa("Slnt",!0),ca),S(u,pa(`
	%s:`),ca.short_src),ca.currentline>0&&F(u,"".concat(ca.currentline,":")),F(u," in "),ue(u,ca),ca.istailcall&&F(u,`
	(...tail calls..)`),aa(u,de(u)-ba));aa(u,de(u)-ba)},e.exports.luaL_typename=wa,e.exports.luaL_unref=function(u,g,V){V>=0&&(g=ea(u,g),je(u,g,0),i(u,g,V),ve(u,V),i(u,g,0))},e.exports.luaL_where=H,e.exports.lua_writestringerror=function(){for(var u=0;u<arguments.length;u++){var g=arguments[u];do{var V=/([^\n]*)\n?([\d\D]*)/.exec(g);console.error(V[1]),g=V[2]}while(g!=="")}}},function(e,ga,d){var o=d(1),s=o.LUA_HOOKCALL,m=o.LUA_HOOKRET,ge=o.LUA_HOOKTAILCALL,b=o.LUA_MASKCALL,y=o.LUA_MASKLINE,N=o.LUA_MASKRET,pe=o.LUA_MINSTACK,q=o.LUA_MULTRET,Ne=o.LUA_SIGNATURE,K=o.constant_types,Y=K.LUA_TCCL,Le=K.LUA_TLCF,fe=K.LUA_TLCL,Ge=K.LUA_TNIL,te=o.thread_status,ne=te.LUA_ERRMEM,Q=te.LUA_ERRERR,ea=te.LUA_ERRRUN,Pe=te.LUA_ERRSYNTAX,Xe=te.LUA_OK,De=te.LUA_YIELD,aa=o.lua_Debug,w=o.luastring_indexOf,j=o.to_luastring,I=d(19),G=d(11),Oe=d(13),me=d(4),Z=me.api_check,de=me.lua_assert,We=me.LUAI_MAXCCALLS,se=d(6),Ue=d(16),P=d(23),C=d(12),T=d(10).luaS_newliteral,E=d(14),X=d(3).LUAI_MAXSTACK,R=d(36),_e=d(15),Te=d(20).MBuffer,na=function(h,ce){if(h.top<ce)for(;h.top<ce;)h.stack[h.top++]=new se.TValue(Ge,null);else for(;h.top>ce;)delete h.stack[--h.top]},qe=function(h,ce,Se){for(var Ee=h.top;h.top<Se+1;)h.stack[h.top++]=new se.TValue(Ge,null);switch(ce){case ne:se.setsvalue2s(h,Se,T(h,"not enough memory"));break;case Q:se.setsvalue2s(h,Se,T(h,"error in error handling"));break;default:se.setobjs2s(h,Se,Ee-1)}for(;h.top>Se+1;)delete h.stack[--h.top]},fa=X+200,va=function(h,ce){de(ce<=X||ce==fa),de(h.stack_last==h.stack.length-C.EXTRA_STACK),h.stack.length=ce,h.stack_last=ce-C.EXTRA_STACK},U=function(h,ce){var Se=h.stack.length;if(Se>X)je(h,Q);else{var Ee=h.top+ce+C.EXTRA_STACK,xe=2*Se;xe>X&&(xe=X),xe<Ee&&(xe=Ee),xe>X?(va(h,fa),G.luaG_runerror(h,j("stack overflow",!0))):va(h,xe)}},S=function(h,ce){h.stack_last-h.top<=ce&&U(h,ce)},ve=function(h){var ce=(function(Ee){for(var xe=Ee.top,ee=Ee.ci;ee!==null;ee=ee.previous)xe<ee.top&&(xe=ee.top);return de(xe<=Ee.stack_last),xe+1})(h),Se=ce+Math.floor(ce/8)+2*C.EXTRA_STACK;Se>X&&(Se=X),h.stack.length>X&&C.luaE_freeCI(h),ce<=X-C.EXTRA_STACK&&Se<h.stack.length&&va(h,Se)},F=function h(ce,Se,Ee){var xe=ce.stack[Se];switch(xe.type){case Y:case Le:var ee=xe.type===Y?xe.value.f:xe.value;S(ce,pe);var ra=C.luaE_extendCI(ce);ra.funcOff=Se,ra.nresults=Ee,ra.func=xe,ra.top=ce.top+pe,de(ra.top<=ce.stack_last),ra.callstatus=0,ce.hookmask&b&&Ze(ce,s,-1);var da=ee(ce);if(typeof da!="number"||da<0||(0|da)!==da)throw Error("invalid return value from JS function (expected integer)");return I.api_checknelems(ce,da),Je(ce,ra,ce.top-da,da),!0;case fe:var Oa,Ea=xe.value.p,Ia=ce.top-Se-1,pa=Ea.maxstacksize;if(S(ce,pa),Ea.is_vararg)Oa=ha(ce,Ea,Ia);else{for(;Ia<Ea.numparams;Ia++)ce.stack[ce.top++]=new se.TValue(Ge,null);Oa=Se+1}var a=C.luaE_extendCI(ce);return a.funcOff=Se,a.nresults=Ee,a.func=xe,a.l_base=Oa,a.top=Oa+pa,na(ce,a.top),a.l_code=Ea.code,a.l_savedpc=0,a.callstatus=C.CIST_LUA,ce.hookmask&b&&he(ce,a),!1;default:return S(ce,1),La(ce,Se,xe),h(ce,Se,Ee)}},Je=function(h,ce,Se,Ee){var xe=ce.nresults;h.hookmask&(N|y)&&(h.hookmask&N&&Ze(h,m,-1),h.oldpc=ce.previous.l_savedpc);var ee=ce.funcOff;return h.ci=ce.previous,h.ci.next=null,Ye(h,Se,ee,Ee,xe)},Ye=function(h,ce,Se,Ee,xe){switch(xe){case 0:break;case 1:Ee===0?h.stack[Se].setnilvalue():se.setobjs2s(h,Se,ce);break;case q:for(var ee=0;ee<Ee;ee++)se.setobjs2s(h,Se+ee,ce+ee);for(var ra=h.top;ra>=Se+Ee;ra--)delete h.stack[ra];return h.top=Se+Ee,!1;default:var da;if(xe<=Ee)for(da=0;da<xe;da++)se.setobjs2s(h,Se+da,ce+da);else{for(da=0;da<Ee;da++)se.setobjs2s(h,Se+da,ce+da);for(;da<xe;da++)Se+da>=h.top?h.stack[Se+da]=new se.TValue(Ge,null):h.stack[Se+da].setnilvalue()}}for(var Oa=Se+xe,Ea=h.top;Ea>=Oa;Ea--)delete h.stack[Ea];return h.top=Oa,!0},Ze=function(h,ce,Se){var Ee=h.hook;if(Ee&&h.allowhook){var xe=h.ci,ee=h.top,ra=xe.top,da=new aa;da.event=ce,da.currentline=Se,da.i_ci=xe,S(h,pe),xe.top=h.top+pe,de(xe.top<=h.stack_last),h.allowhook=0,xe.callstatus|=C.CIST_HOOKED,Ee(h,da),de(!h.allowhook),h.allowhook=1,xe.top=ra,na(h,ee),xe.callstatus&=~C.CIST_HOOKED}},he=function(h,ce){var Se=s;ce.l_savedpc++,ce.previous.callstatus&C.CIST_LUA&&ce.previous.l_code[ce.previous.l_savedpc-1].opcode==Ue.OpCodesI.OP_TAILCALL&&(ce.callstatus|=C.CIST_TAIL,Se=ge),Ze(h,Se,-1),ce.l_savedpc--},ha=function(h,ce,Se){var Ee,xe=ce.numparams,ee=h.top-Se,ra=h.top;for(Ee=0;Ee<xe&&Ee<Se;Ee++)se.pushobj2s(h,h.stack[ee+Ee]),h.stack[ee+Ee].setnilvalue();for(;Ee<xe;Ee++)h.stack[h.top++]=new se.TValue(Ge,null);return ra},La=function(h,ce,Se){var Ee=E.luaT_gettmbyobj(h,Se,E.TMS.TM_CALL);Ee.ttisfunction(Ee)||G.luaG_typeerror(h,Se,j("call",!0)),se.pushobj2s(h,h.stack[h.top-1]);for(var xe=h.top-2;xe>ce;xe--)se.setobjs2s(h,xe,xe-1);se.setobj2s(h,ce,Ee)},z=function(h,ce,Se){++h.nCcalls>=We&&(function(Ee){Ee.nCcalls===We?G.luaG_runerror(Ee,j("JS stack overflow",!0)):Ee.nCcalls>=We+(We>>3)&&je(Ee,Q)})(h),F(h,ce,Se)||_e.luaV_execute(h),h.nCcalls--},je=function h(ce,Se){if(ce.errorJmp)throw ce.errorJmp.status=Se,ce.errorJmp;var Ee=ce.l_G;if(ce.status=Se,!Ee.mainthread.errorJmp){var xe=Ee.panic;throw xe&&(qe(ce,Se,ce.top),ce.ci.top<ce.top&&(ce.ci.top=ce.top),xe(ce)),new Error("Aborted ".concat(Se))}Ee.mainthread.stack[Ee.mainthread.top++]=ce.stack[ce.top-1],h(Ee.mainthread,Se)},Ke=function(h,ce,Se){var Ee=h.nCcalls,xe={status:Xe,previous:h.errorJmp};h.errorJmp=xe;try{ce(h,Se)}catch(da){if(xe.status===Xe){var ee=h.l_G.atnativeerror;if(ee)try{if(xe.status=Xe,I.lua_pushcfunction(h,ee),I.lua_pushlightuserdata(h,da),_a(h,h.top-2,1),h.errfunc!==0){var ra=h.errfunc;se.pushobj2s(h,h.stack[h.top-1]),se.setobjs2s(h,h.top-2,ra),_a(h,h.top-2,1)}xe.status=ea}catch{xe.status===Xe&&(xe.status=-1)}else xe.status=-1}}return h.errorJmp=xe.previous,h.nCcalls=Ee,xe.status},i=function(h,ce){var Se=h.ci;de(Se.c_k!==null&&h.nny===0),de(Se.callstatus&C.CIST_YPCALL||ce===De),Se.callstatus&C.CIST_YPCALL&&(Se.callstatus&=~C.CIST_YPCALL,h.errfunc=Se.c_old_errfunc),Se.nresults===q&&h.ci.top<h.top&&(h.ci.top=h.top);var Ee=(0,Se.c_k)(h,ce,Se.c_ctx);I.api_checknelems(h,Ee),Je(h,Se,h.top-Ee,Ee)},$=function(h,ce){for(ce!==null&&i(h,ce);h.ci!==h.base_ci;)h.ci.callstatus&C.CIST_LUA?(_e.luaV_finishOp(h),_e.luaV_execute(h)):i(h,De)},ke=function(h,ce){var Se=(function(xe){for(var ee=xe.ci;ee!==null;ee=ee.previous)if(ee.callstatus&C.CIST_YPCALL)return ee;return null})(h);if(Se===null)return 0;var Ee=Se.extra;return Oe.luaF_close(h,Ee),qe(h,ce,Ee),h.ci=Se,h.allowhook=Se.callstatus&C.CIST_OAH,h.nny=0,ve(h),h.errfunc=Se.c_old_errfunc,1},Qe=function(h,ce,Se){var Ee=T(h,ce);if(Se===0)se.pushsvalue2s(h,Ee),Z(h,h.top<=h.ci.top,"stack overflow");else{for(var xe=1;xe<Se;xe++)delete h.stack[--h.top];se.setsvalue2s(h,h.top-1,Ee)}return ea},sa=function(h,ce){var Se=h.top-ce,Ee=h.ci;h.status===Xe?F(h,Se-1,q)||_e.luaV_execute(h):(de(h.status===De),h.status=Xe,Ee.funcOff=Ee.extra,Ee.func=h.stack[Ee.funcOff],Ee.callstatus&C.CIST_LUA?_e.luaV_execute(h):(Ee.c_k!==null&&(ce=Ee.c_k(h,De,Ee.c_ctx),I.api_checknelems(h,ce),Se=h.top-ce),Je(h,Ee,Se,ce)),$(h,null))},xa=function(h,ce,Se,Ee){var xe=h.ci;return I.api_checknelems(h,ce),h.nny>0&&(h!==h.l_G.mainthread?G.luaG_runerror(h,j("attempt to yield across a JS-call boundary",!0)):G.luaG_runerror(h,j("attempt to yield from outside a coroutine",!0))),h.status=De,xe.extra=xe.funcOff,xe.callstatus&C.CIST_LUA?Z(h,Ee===null,"hooks cannot continue after yielding"):(xe.c_k=Ee,Ee!==null&&(xe.c_ctx=Se),xe.funcOff=h.top-ce-1,xe.func=h.stack[xe.funcOff],je(h,De)),de(xe.callstatus&C.CIST_HOOKED),0},Ma=function(h,ce,Se,Ee,xe){var ee=h.ci,ra=h.allowhook,da=h.nny,Oa=h.errfunc;h.errfunc=xe;var Ea=Ke(h,ce,Se);return Ea!==Xe&&(Oe.luaF_close(h,Ee),qe(h,Ea,Ee),h.ci=ee,h.allowhook=ra,h.nny=da,ve(h)),h.errfunc=Oa,Ea},_a=function(h,ce,Se){h.nny++,z(h,ce,Se),h.nny--},Ua=function h(ce,Se,Ee){(function(xe,ee){if(!(xe instanceof ee))throw new TypeError("Cannot call a class as a function")})(this,h),this.z=ce,this.buff=new Te,this.dyd=new P.Dyndata,this.mode=Ee,this.name=Se},Ra=function(h,ce,Se){ce&&w(ce,Se[0])===-1&&(se.luaO_pushfstring(h,j("attempt to load a %s chunk (mode is '%s')"),Se,ce),je(h,Pe))},Va=function(h,ce){var Se,Ee=ce.z.zgetc();Ee===Ne[0]?(Ra(h,ce.mode,j("binary",!0)),Se=R.luaU_undump(h,ce.z,ce.name)):(Ra(h,ce.mode,j("text",!0)),Se=P.luaY_parser(h,ce.z,ce.buff,ce.dyd,ce.name,Ee)),de(Se.nupvalues===Se.p.upvalues.length),Oe.luaF_initupvals(h,Se)};e.exports.adjust_top=na,e.exports.luaD_call=z,e.exports.luaD_callnoyield=_a,e.exports.luaD_checkstack=S,e.exports.luaD_growstack=U,e.exports.luaD_hook=Ze,e.exports.luaD_inctop=function(h){S(h,1),h.stack[h.top++]=new se.TValue(Ge,null)},e.exports.luaD_pcall=Ma,e.exports.luaD_poscall=Je,e.exports.luaD_precall=F,e.exports.luaD_protectedparser=function(h,ce,Se,Ee){var xe=new Ua(ce,Se,Ee);h.nny++;var ee=Ma(h,Va,xe,h.top,h.errfunc);return h.nny--,ee},e.exports.luaD_rawrunprotected=Ke,e.exports.luaD_reallocstack=va,e.exports.luaD_throw=je,e.exports.lua_isyieldable=function(h){return h.nny===0},e.exports.lua_resume=function(h,ce,Se){var Ee=h.nny;if(h.status===Xe){if(h.ci!==h.base_ci)return Qe(h,"cannot resume non-suspended coroutine",Se)}else if(h.status!==De)return Qe(h,"cannot resume dead coroutine",Se);if(h.nCcalls=ce?ce.nCcalls+1:1,h.nCcalls>=We)return Qe(h,"JS stack overflow",Se);h.nny=0,I.api_checknelems(h,h.status===Xe?Se+1:Se);var xe=Ke(h,sa,Se);if(xe===-1)xe=ea;else{for(;xe>De&&ke(h,xe);)xe=Ke(h,$,xe);xe>De?(h.status=xe,qe(h,xe,h.top),h.ci.top=h.top):de(xe===h.status)}return h.nny=Ee,h.nCcalls--,de(h.nCcalls===(ce?ce.nCcalls:0)),xe},e.exports.lua_yield=function(h,ce){xa(h,ce,0,null)},e.exports.lua_yieldk=xa},function(e,ga,d){function o(se){return(o=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(Ue){return typeof Ue}:function(Ue){return Ue&&typeof Symbol=="function"&&Ue.constructor===Symbol&&Ue!==Symbol.prototype?"symbol":typeof Ue})(se)}var s=d(1),m=s.constant_types,ge=m.LUA_TBOOLEAN,b=m.LUA_TCCL,y=m.LUA_TLCF,N=m.LUA_TLCL,pe=m.LUA_TLIGHTUSERDATA,q=m.LUA_TLNGSTR,Ne=m.LUA_TNIL,K=m.LUA_TNUMFLT,Y=m.LUA_TNUMINT,Le=m.LUA_TSHRSTR,fe=m.LUA_TTABLE,Ge=m.LUA_TTHREAD,te=m.LUA_TUSERDATA,ne=s.to_luastring,Q=d(4).lua_assert,ea=d(11),Pe=d(6),Xe=d(10),De=Xe.luaS_hashlongstr,aa=Xe.TString,w=d(12),j=new WeakMap,I=function(se){var Ue=j.get(se);return Ue||(Ue={},j.set(se,Ue)),Ue},G=function(se,Ue){switch(Ue.type){case Ne:return ea.luaG_runerror(se,ne("table index is nil",!0));case K:if(isNaN(Ue.value))return ea.luaG_runerror(se,ne("table index is NaN",!0));case Y:case ge:case fe:case N:case y:case b:case te:case Ge:return Ue.value;case Le:case q:return De(Ue.tsvalue());case pe:var P=Ue.value;switch(o(P)){case"string":return"*"+P;case"number":return"#"+P;case"boolean":return P?"?true":"?false";case"function":return I(P);case"object":if(P instanceof w.lua_State&&P.l_G===se.l_G||P instanceof Oe||P instanceof Pe.Udata||P instanceof Pe.LClosure||P instanceof Pe.CClosure)return I(P);default:return P}default:throw new Error("unknown key type: "+Ue.type)}},Oe=function se(Ue){(function(P,C){if(!(P instanceof C))throw new TypeError("Cannot call a class as a function")})(this,se),this.id=Ue.l_G.id_counter++,this.strong=new Map,this.dead_strong=new Map,this.dead_weak=void 0,this.f=void 0,this.l=void 0,this.metatable=null,this.flags=-1},me=function(se,Ue,P,C){se.dead_strong.clear(),se.dead_weak=void 0;var T=null,E={key:P,value:C,p:T=se.l,n:void 0};se.f||(se.f=E),T&&(T.n=E),se.strong.set(Ue,E),se.l=E},Z=function(se,Ue){var P=se.strong.get(Ue);if(P){P.key.setdeadvalue(),P.value=void 0;var C=P.n,T=P.p;P.p=void 0,T&&(T.n=C),C&&(C.p=T),se.f===P&&(se.f=C),se.l===P&&(se.l=T),se.strong.delete(Ue),(function(E){return o(E)==="object"?E!==null:typeof E=="function"})(Ue)?(se.dead_weak||(se.dead_weak=new WeakMap),se.dead_weak.set(Ue,P)):se.dead_strong.set(Ue,P)}},de=function(se,Ue){var P=se.strong.get(Ue);return P?P.value:Pe.luaO_nilobject},We=function(se,Ue){return Q(typeof Ue=="number"&&(0|Ue)===Ue),de(se,Ue)};e.exports.invalidateTMcache=function(se){se.flags=0},e.exports.luaH_get=function(se,Ue,P){return Q(P instanceof Pe.TValue),P.ttisnil()||P.ttisfloat()&&isNaN(P.value)?Pe.luaO_nilobject:de(Ue,G(se,P))},e.exports.luaH_getint=We,e.exports.luaH_getn=function(se){for(var Ue=0,P=se.strong.size+1;P-Ue>1;){var C=Math.floor((Ue+P)/2);We(se,C).ttisnil()?P=C:Ue=C}return Ue},e.exports.luaH_getstr=function(se,Ue){return Q(Ue instanceof aa),de(se,De(Ue))},e.exports.luaH_setfrom=function(se,Ue,P,C){Q(P instanceof Pe.TValue);var T=G(se,P);if(C.ttisnil())Z(Ue,T);else{var E=Ue.strong.get(T);if(E)E.value.setfrom(C);else{var X,R=P.value;X=P.ttisfloat()&&(0|R)===R?new Pe.TValue(Y,R):new Pe.TValue(P.type,R);var _e=new Pe.TValue(C.type,C.value);me(Ue,T,X,_e)}}},e.exports.luaH_setint=function(se,Ue,P){Q(typeof Ue=="number"&&(0|Ue)===Ue&&P instanceof Pe.TValue);var C=Ue;if(P.ttisnil())Z(se,C);else{var T=se.strong.get(C);if(T)T.value.setfrom(P);else{var E=new Pe.TValue(Y,Ue),X=new Pe.TValue(P.type,P.value);me(se,C,E,X)}}},e.exports.luaH_new=function(se){return new Oe(se)},e.exports.luaH_next=function(se,Ue,P){var C,T=se.stack[P];if(T.type===Ne){if(!(C=Ue.f))return!1}else{var E=G(se,T);if(C=Ue.strong.get(E)){if(!(C=C.n))return!1}else{if(!(C=Ue.dead_weak&&Ue.dead_weak.get(E)||Ue.dead_strong.get(E)))return ea.luaG_runerror(se,ne("invalid key to 'next'"));do if(!(C=C.n))return!1;while(C.key.ttisdeadkey())}}return Pe.setobj2s(se,P,C.key),Pe.setobj2s(se,P+1,C.value),!0},e.exports.Table=Oe},function(e,ga,d){function o(K,Y){for(var Le=0;Le<Y.length;Le++){var fe=Y[Le];fe.enumerable=fe.enumerable||!1,fe.configurable=!0,"value"in fe&&(fe.writable=!0),Object.defineProperty(K,fe.key,fe)}}var s=d(1),m=s.is_luastring,ge=s.luastring_eq,b=s.luastring_from,y=s.to_luastring,N=d(4).lua_assert,pe=(function(){function K(Y,Le){(function(fe,Ge){if(!(fe instanceof Ge))throw new TypeError("Cannot call a class as a function")})(this,K),this.hash=null,this.realstring=Le}return(function(Y,Le,fe){Le&&o(Y.prototype,Le)})(K,[{key:"getstr",value:function(){return this.realstring}},{key:"tsslen",value:function(){return this.realstring.length}}]),K})(),q=function(K){N(m(K));for(var Y=K.length,Le="|",fe=0;fe<Y;fe++)Le+=K[fe].toString(16);return Le},Ne=function(K,Y){return N(Y instanceof Uint8Array),new pe(K,Y)};e.exports.luaS_eqlngstr=function(K,Y){return N(K instanceof pe),N(Y instanceof pe),K==Y||ge(K.realstring,Y.realstring)},e.exports.luaS_hash=q,e.exports.luaS_hashlongstr=function(K){return N(K instanceof pe),K.hash===null&&(K.hash=q(K.getstr())),K.hash},e.exports.luaS_bless=Ne,e.exports.luaS_new=function(K,Y){return Ne(K,b(Y))},e.exports.luaS_newliteral=function(K,Y){return Ne(K,y(Y))},e.exports.TString=pe},function(e,ga,d){var o=d(1),s=o.LUA_HOOKCOUNT,m=o.LUA_HOOKLINE,ge=o.LUA_MASKCOUNT,b=o.LUA_MASKLINE,y=o.constant_types,N=y.LUA_TBOOLEAN,pe=y.LUA_TNIL,q=y.LUA_TTABLE,Ne=o.thread_status,K=Ne.LUA_ERRRUN,Y=Ne.LUA_YIELD,Le=o.from_userstring,fe=o.luastring_eq,Ge=o.luastring_indexOf,te=o.to_luastring,ne=d(4),Q=ne.api_check,ea=ne.lua_assert,Pe=d(3).LUA_IDSIZE,Xe=d(19),De=d(8),aa=d(13),w=d(21),j=d(6),I=d(16),G=d(12),Oe=d(9),me=d(14),Z=d(15),de=function(U){return ea(U.callstatus&G.CIST_LUA),U.l_savedpc-1},We=function(U){return U.func.value.p.lineinfo.length!==0?U.func.value.p.lineinfo[de(U)]:-1},se=function(U){if(U.status===Y){var S=U.ci,ve=S.funcOff;S.func=U.stack[S.extra],S.funcOff=S.extra,S.extra=ve}},Ue=function(U,S){ea(S<U.upvalues.length);var ve=U.upvalues[S].name;return ve===null?te("?",!0):ve.getstr()},P=function(U,S,ve){var F,Je=null;if(S.callstatus&G.CIST_LUA){if(ve<0)return(function(Ye,Ze){var he=Ye.func.value.p.numparams;return Ze>=Ye.l_base-Ye.funcOff-he?null:{pos:Ye.funcOff+he+Ze,name:te("(*vararg)",!0)}})(S,-ve);F=S.l_base,Je=aa.luaF_getlocalname(S.func.value.p,ve,de(S))}else F=S.funcOff+1;if(Je===null){if(!((S===U.ci?U.top:S.next.funcOff)-F>=ve&&ve>0))return null;Je=te("(*temporary)",!0)}return{pos:F+(ve-1),name:Je}},C=function(U,S){if(S===null||S instanceof j.CClosure)U.source=te("=[JS]",!0),U.linedefined=-1,U.lastlinedefined=-1,U.what=te("J",!0);else{var ve=S.p;U.source=ve.source?ve.source.getstr():te("=?",!0),U.linedefined=ve.linedefined,U.lastlinedefined=ve.lastlinedefined,U.what=U.linedefined===0?te("main",!0):te("Lua",!0)}U.short_src=j.luaO_chunkid(U.source,Pe)},T=function(U,S){var ve={name:null,funcname:null};return S===null?null:S.callstatus&G.CIST_FIN?(ve.name=te("__gc",!0),ve.funcname=te("metamethod",!0),ve):!(S.callstatus&G.CIST_TAIL)&&S.previous.callstatus&G.CIST_LUA?_e(U,S.previous):null},E=function(U,S,ve){var F={name:null,funcname:null};if(I.ISK(ve)){var Je=U.k[I.INDEXK(ve)];if(Je.ttisstring())return F.name=Je.svalue(),F}else{var Ye=R(U,S,ve);if(Ye&&Ye.funcname[0]===99)return Ye}return F.name=te("?",!0),F},X=function(U,S){return U<S?-1:U},R=function U(S,ve,F){var Je={name:aa.luaF_getlocalname(S,F+1,ve),funcname:null};if(Je.name)return Je.funcname=te("local",!0),Je;var Ye=(function($,ke,Qe){for(var sa=-1,xa=0,Ma=I.OpCodesI,_a=0;_a<ke;_a++){var Ua=$.code[_a],Ra=Ua.A;switch(Ua.opcode){case Ma.OP_LOADNIL:var Va=Ua.B;Ra<=Qe&&Qe<=Ra+Va&&(sa=X(_a,xa));break;case Ma.OP_TFORCALL:Qe>=Ra+2&&(sa=X(_a,xa));break;case Ma.OP_CALL:case Ma.OP_TAILCALL:Qe>=Ra&&(sa=X(_a,xa));break;case Ma.OP_JMP:var h=_a+1+Ua.sBx;_a<h&&h<=ke&&h>xa&&(xa=h);break;default:I.testAMode(Ua.opcode)&&Qe===Ra&&(sa=X(_a,xa))}}return sa})(S,ve,F),Ze=I.OpCodesI;if(Ye!==-1){var he=S.code[Ye];switch(he.opcode){case Ze.OP_MOVE:var ha=he.B;if(ha<he.A)return U(S,Ye,ha);break;case Ze.OP_GETTABUP:case Ze.OP_GETTABLE:var La=he.C,z=he.B,je=he.opcode===Ze.OP_GETTABLE?aa.luaF_getlocalname(S,z+1,Ye):Ue(S,z);return Je.name=E(S,Ye,La).name,Je.funcname=je&&fe(je,w.LUA_ENV)?te("global",!0):te("field",!0),Je;case Ze.OP_GETUPVAL:return Je.name=Ue(S,he.B),Je.funcname=te("upvalue",!0),Je;case Ze.OP_LOADK:case Ze.OP_LOADKX:var Ke=he.opcode===Ze.OP_LOADK?he.Bx:S.code[Ye+1].Ax;if(S.k[Ke].ttisstring())return Je.name=S.k[Ke].svalue(),Je.funcname=te("constant",!0),Je;break;case Ze.OP_SELF:var i=he.C;return Je.name=E(S,Ye,i).name,Je.funcname=te("method",!0),Je}}return null},_e=function(U,S){var ve={name:null,funcname:null},F=0,Je=S.func.value.p,Ye=de(S),Ze=Je.code[Ye],he=I.OpCodesI;if(S.callstatus&G.CIST_HOOKED)return ve.name=te("?",!0),ve.funcname=te("hook",!0),ve;switch(Ze.opcode){case he.OP_CALL:case he.OP_TAILCALL:return R(Je,Ye,Ze.A);case he.OP_TFORCALL:return ve.name=te("for iterator",!0),ve.funcname=te("for iterator",!0),ve;case he.OP_SELF:case he.OP_GETTABUP:case he.OP_GETTABLE:F=me.TMS.TM_INDEX;break;case he.OP_SETTABUP:case he.OP_SETTABLE:F=me.TMS.TM_NEWINDEX;break;case he.OP_ADD:F=me.TMS.TM_ADD;break;case he.OP_SUB:F=me.TMS.TM_SUB;break;case he.OP_MUL:F=me.TMS.TM_MUL;break;case he.OP_MOD:F=me.TMS.TM_MOD;break;case he.OP_POW:F=me.TMS.TM_POW;break;case he.OP_DIV:F=me.TMS.TM_DIV;break;case he.OP_IDIV:F=me.TMS.TM_IDIV;break;case he.OP_BAND:F=me.TMS.TM_BAND;break;case he.OP_BOR:F=me.TMS.TM_BOR;break;case he.OP_BXOR:F=me.TMS.TM_BXOR;break;case he.OP_SHL:F=me.TMS.TM_SHL;break;case he.OP_SHR:F=me.TMS.TM_SHR;break;case he.OP_UNM:F=me.TMS.TM_UNM;break;case he.OP_BNOT:F=me.TMS.TM_BNOT;break;case he.OP_LEN:F=me.TMS.TM_LEN;break;case he.OP_CONCAT:F=me.TMS.TM_CONCAT;break;case he.OP_EQ:F=me.TMS.TM_EQ;break;case he.OP_LT:F=me.TMS.TM_LT;break;case he.OP_LE:F=me.TMS.TM_LE;break;default:return null}return ve.name=U.l_G.tmname[F].getstr(),ve.funcname=te("metamethod",!0),ve},Te=function(U,S){var ve=U.ci,F=null;if(ve.callstatus&G.CIST_LUA){F=(function(Ye,Ze,he){for(var ha=Ze.func.value,La=0;La<ha.nupvalues;La++)if(ha.upvals[La]===he)return{name:Ue(ha.p,La),funcname:te("upvalue",!0)};return null})(0,ve,S);var Je=(function(Ye,Ze,he){for(var ha=Ze.l_base;ha<Ze.top;ha++)if(Ye.stack[ha]===he)return ha;return!1})(U,ve,S);!F&&Je&&(F=R(ve.func.value.p,de(ve),Je-ve.l_base))}return F?j.luaO_pushfstring(U,te(" (%s '%s')",!0),F.funcname,F.name):te("",!0)},na=function(U,S,ve){var F=me.luaT_objtypename(U,S);fa(U,te("attempt to %s a %s value%s",!0),ve,F,Te(U,S))},qe=function(U,S,ve,F){var Je;return Je=ve?j.luaO_chunkid(ve.getstr(),Pe):te("?",!0),j.luaO_pushfstring(U,te("%s:%d: %s",!0),Je,F,S)},fa=function(U,S){for(var ve=U.ci,F=arguments.length,Je=new Array(F>2?F-2:0),Ye=2;Ye<F;Ye++)Je[Ye-2]=arguments[Ye];var Ze=j.luaO_pushvfstring(U,S,Je);ve.callstatus&G.CIST_LUA&&qe(U,Ze,ve.func.value.p.source,We(ve)),va(U)},va=function(U){if(U.errfunc!==0){var S=U.errfunc;j.pushobj2s(U,U.stack[U.top-1]),j.setobjs2s(U,U.top-2,S),De.luaD_callnoyield(U,U.top-2,1)}De.luaD_throw(U,K)};e.exports.luaG_addinfo=qe,e.exports.luaG_concaterror=function(U,S,ve){(S.ttisstring()||Z.cvt2str(S))&&(S=ve),na(U,S,te("concatenate",!0))},e.exports.luaG_errormsg=va,e.exports.luaG_opinterror=function(U,S,ve,F){Z.tonumber(S)===!1&&(ve=S),na(U,ve,F)},e.exports.luaG_ordererror=function(U,S,ve){var F=me.luaT_objtypename(U,S),Je=me.luaT_objtypename(U,ve);fe(F,Je)?fa(U,te("attempt to compare two %s values",!0),F):fa(U,te("attempt to compare %s with %s",!0),F,Je)},e.exports.luaG_runerror=fa,e.exports.luaG_tointerror=function(U,S,ve){Z.tointeger(S)===!1&&(ve=S),fa(U,te("number%s has no integer representation",!0),Te(U,ve))},e.exports.luaG_traceexec=function(U){var S=U.ci,ve=U.hookmask,F=--U.hookcount==0&&ve&ge;if(F)U.hookcount=U.basehookcount;else if(!(ve&b))return;if(S.callstatus&G.CIST_HOOKYIELD)S.callstatus&=~G.CIST_HOOKYIELD;else{if(F&&De.luaD_hook(U,s,-1),ve&b){var Je=S.func.value.p,Ye=S.l_savedpc-1,Ze=Je.lineinfo.length!==0?Je.lineinfo[Ye]:-1;(Ye===0||S.l_savedpc<=U.oldpc||Ze!==(Je.lineinfo.length!==0?Je.lineinfo[U.oldpc-1]:-1))&&De.luaD_hook(U,m,Ze)}U.oldpc=S.l_savedpc,U.status===Y&&(F&&(U.hookcount=1),S.l_savedpc--,S.callstatus|=G.CIST_HOOKYIELD,S.funcOff=U.top-1,S.func=U.stack[S.funcOff],De.luaD_throw(U,Y))}},e.exports.luaG_typeerror=na,e.exports.lua_gethook=function(U){return U.hook},e.exports.lua_gethookcount=function(U){return U.basehookcount},e.exports.lua_gethookmask=function(U){return U.hookmask},e.exports.lua_getinfo=function(U,S,ve){var F,Je,Ye,Ze;return S=Le(S),se(U),S[0]===62?(Ye=null,Ze=U.stack[U.top-1],Q(U,Ze.ttisfunction(),"function expected"),S=S.subarray(1),U.top--):(Ze=(Ye=ve.i_ci).func,ea(Ye.func.ttisfunction())),F=(function(he,ha,La,z,je){for(var Ke=1;ha.length>0;ha=ha.subarray(1))switch(ha[0]){case 83:C(La,z);break;case 108:La.currentline=je&&je.callstatus&G.CIST_LUA?We(je):-1;break;case 117:La.nups=z===null?0:z.nupvalues,z===null||z instanceof j.CClosure?(La.isvararg=!0,La.nparams=0):(La.isvararg=z.p.is_vararg,La.nparams=z.p.numparams);break;case 116:La.istailcall=je?je.callstatus&G.CIST_TAIL:0;break;case 110:var i=T(he,je);i===null?(La.namewhat=te("",!0),La.name=null):(La.namewhat=i.funcname,La.name=i.name);break;case 76:case 102:break;default:Ke=0}return Ke})(U,S,ve,Je=Ze.ttisclosure()?Ze.value:null,Ye),Ge(S,102)>=0&&(j.pushobj2s(U,Ze),Q(U,U.top<=U.ci.top,"stack overflow")),se(U),Ge(S,76)>=0&&(function(he,ha){if(ha===null||ha instanceof j.CClosure)he.stack[he.top]=new j.TValue(pe,null),Xe.api_incr_top(he);else{var La=ha.p.lineinfo,z=Oe.luaH_new(he);he.stack[he.top]=new j.TValue(q,z),Xe.api_incr_top(he);for(var je=new j.TValue(N,!0),Ke=0;Ke<La.length;Ke++)Oe.luaH_setint(z,La[Ke],je)}})(U,Je),F},e.exports.lua_getlocal=function(U,S,ve){var F;if(se(U),S===null)F=U.stack[U.top-1].ttisLclosure()?aa.luaF_getlocalname(U.stack[U.top-1].value.p,ve,0):null;else{var Je=P(U,S.i_ci,ve);Je?(F=Je.name,j.pushobj2s(U,U.stack[Je.pos]),Q(U,U.top<=U.ci.top,"stack overflow")):F=null}return se(U),F},e.exports.lua_getstack=function(U,S,ve){var F,Je;if(S<0)return 0;for(F=U.ci;S>0&&F!==U.base_ci;F=F.previous)S--;return S===0&&F!==U.base_ci?(Je=1,ve.i_ci=F):Je=0,Je},e.exports.lua_sethook=function(U,S,ve,F){S!==null&&ve!==0||(ve=0,S=null),U.ci.callstatus&G.CIST_LUA&&(U.oldpc=U.ci.l_savedpc),U.hook=S,U.basehookcount=F,U.hookcount=U.basehookcount,U.hookmask=ve},e.exports.lua_setlocal=function(U,S,ve){var F;se(U);var Je=P(U,S.i_ci,ve);return Je?(F=Je.name,j.setobjs2s(U,Je.pos,U.top-1),delete U.stack[--U.top]):F=null,se(U),F}},function(e,ga,d){function o(w,j){if(!(w instanceof j))throw new TypeError("Cannot call a class as a function")}var s=d(1),m=s.LUA_MINSTACK,ge=s.LUA_RIDX_GLOBALS,b=s.LUA_RIDX_MAINTHREAD,y=s.constant_types,N=y.LUA_NUMTAGS,pe=y.LUA_TNIL,q=y.LUA_TTABLE,Ne=y.LUA_TTHREAD,K=s.thread_status.LUA_OK,Y=d(6),Le=d(8),fe=d(19),Ge=d(9),te=d(14),ne=2*m,Q=function w(){o(this,w),this.func=null,this.funcOff=NaN,this.top=NaN,this.previous=null,this.next=null,this.l_base=NaN,this.l_code=null,this.l_savedpc=NaN,this.c_k=null,this.c_old_errfunc=null,this.c_ctx=null,this.nresults=NaN,this.callstatus=NaN},ea=function w(j){o(this,w),this.id=j.id_counter++,this.base_ci=new Q,this.top=NaN,this.stack_last=NaN,this.oldpc=NaN,this.l_G=j,this.stack=null,this.ci=null,this.errorJmp=null,this.nCcalls=0,this.hook=null,this.hookmask=0,this.basehookcount=0,this.allowhook=1,this.hookcount=this.basehookcount,this.nny=1,this.status=K,this.errfunc=0},Pe=function(w){w.ci.next=null},Xe=function(w,j){w.stack=new Array(ne),w.top=0,w.stack_last=ne-5;var I=w.base_ci;I.next=I.previous=null,I.callstatus=0,I.funcOff=w.top,I.func=w.stack[w.top],w.stack[w.top++]=new Y.TValue(pe,null),I.top=w.top+m,w.ci=I},De=function(w){w.ci=w.base_ci,Pe(w),w.stack=null},aa=function(w){var j=w.l_G;Xe(w),(function(I,G){var Oe=Ge.luaH_new(I);G.l_registry.sethvalue(Oe),Ge.luaH_setint(Oe,b,new Y.TValue(Ne,I)),Ge.luaH_setint(Oe,ge,new Y.TValue(q,Ge.luaH_new(I)))})(w,j),te.luaT_init(w),j.version=fe.lua_version(null)};e.exports.lua_State=ea,e.exports.CallInfo=Q,e.exports.CIST_OAH=1,e.exports.CIST_LUA=2,e.exports.CIST_HOOKED=4,e.exports.CIST_FRESH=8,e.exports.CIST_YPCALL=16,e.exports.CIST_TAIL=32,e.exports.CIST_HOOKYIELD=64,e.exports.CIST_LEQ=128,e.exports.CIST_FIN=256,e.exports.EXTRA_STACK=5,e.exports.lua_close=function(w){(function(j){De(j)})(w=w.l_G.mainthread)},e.exports.lua_newstate=function(){var w=new function I(){o(this,I),this.id_counter=1,this.ids=new WeakMap,this.mainthread=null,this.l_registry=new Y.TValue(pe,null),this.panic=null,this.atnativeerror=null,this.version=null,this.tmname=new Array(te.TMS.TM_N),this.mt=new Array(N)},j=new ea(w);return w.mainthread=j,Le.luaD_rawrunprotected(j,aa,null)!==K&&(j=null),j},e.exports.lua_newthread=function(w){var j=w.l_G,I=new ea(j);return w.stack[w.top]=new Y.TValue(Ne,I),fe.api_incr_top(w),I.hookmask=w.hookmask,I.basehookcount=w.basehookcount,I.hook=w.hook,I.hookcount=I.basehookcount,Xe(I),I},e.exports.luaE_extendCI=function(w){var j=new Q;return w.ci.next=j,j.previous=w.ci,j.next=null,w.ci=j,j},e.exports.luaE_freeCI=Pe,e.exports.luaE_freethread=function(w,j){De(j)}},function(e,ga,d){var o=d(1).constant_types.LUA_TNIL,s=d(6);e.exports.MAXUPVAL=255,e.exports.Proto=function m(ge){(function(b,y){if(!(b instanceof y))throw new TypeError("Cannot call a class as a function")})(this,m),this.id=ge.l_G.id_counter++,this.k=[],this.p=[],this.code=[],this.cache=null,this.lineinfo=[],this.upvalues=[],this.numparams=0,this.is_vararg=!1,this.maxstacksize=0,this.locvars=[],this.linedefined=0,this.lastlinedefined=0,this.source=null},e.exports.luaF_findupval=function(m,ge){return m.stack[ge]},e.exports.luaF_close=function(m,ge){for(var b=ge;b<m.top;b++){var y=m.stack[b];m.stack[b]=new s.TValue(y.type,y.value)}},e.exports.luaF_getlocalname=function(m,ge,b){for(var y=0;y<m.locvars.length&&m.locvars[y].startpc<=b;y++)if(b<m.locvars[y].endpc&&--ge==0)return m.locvars[y].varname.getstr();return null},e.exports.luaF_initupvals=function(m,ge){for(var b=0;b<ge.nupvalues;b++)ge.upvals[b]=new s.TValue(o,null)},e.exports.luaF_newLclosure=function(m,ge){return new s.LClosure(m,ge)}},function(e,ga,d){var o=d(1),s=o.constant_types,m=s.LUA_TTABLE,ge=s.LUA_TUSERDATA,b=o.to_luastring,y=d(4).lua_assert,N=d(6),pe=d(8),q=d(12),Ne=d(10),K=Ne.luaS_bless,Y=Ne.luaS_new,Le=d(9),fe=d(11),Ge=d(15),te=["no value","nil","boolean","userdata","number","string","table","function","userdata","thread","proto"].map(function(w){return b(w)}),ne=function(w){return te[w+1]},Q={TM_INDEX:0,TM_NEWINDEX:1,TM_GC:2,TM_MODE:3,TM_LEN:4,TM_EQ:5,TM_ADD:6,TM_SUB:7,TM_MUL:8,TM_MOD:9,TM_POW:10,TM_DIV:11,TM_IDIV:12,TM_BAND:13,TM_BOR:14,TM_BXOR:15,TM_SHL:16,TM_SHR:17,TM_UNM:18,TM_BNOT:19,TM_LT:20,TM_LE:21,TM_CONCAT:22,TM_CALL:23,TM_N:24},ea=b("__name",!0),Pe=function(w,j,I,G,Oe,me){var Z=w.top;if(N.pushobj2s(w,j),N.pushobj2s(w,I),N.pushobj2s(w,G),me||N.pushobj2s(w,Oe),w.ci.callstatus&q.CIST_LUA?pe.luaD_call(w,Z,me):pe.luaD_callnoyield(w,Z,me),me){var de=w.stack[w.top-1];delete w.stack[--w.top],Oe.setfrom(de)}},Xe=function(w,j,I,G,Oe){var me=aa(w,j,Oe);return me.ttisnil()&&(me=aa(w,I,Oe)),!me.ttisnil()&&(Pe(w,me,j,I,G,1),!0)},De=function(w,j,I){var G=Le.luaH_getstr(w,I);return y(j<=Q.TM_EQ),G.ttisnil()?(w.flags|=1<<j,null):G},aa=function(w,j,I){var G;switch(j.ttnov()){case m:case ge:G=j.value.metatable;break;default:G=w.l_G.mt[j.ttnov()]}return G?Le.luaH_getstr(G,w.l_G.tmname[I]):N.luaO_nilobject};e.exports.fasttm=function(w,j,I){return j===null||j.flags&1<<I?null:De(j,I,w.l_G.tmname[I])},e.exports.TMS=Q,e.exports.luaT_callTM=Pe,e.exports.luaT_callbinTM=Xe,e.exports.luaT_trybinTM=function(w,j,I,G,Oe){if(!Xe(w,j,I,G,Oe))switch(Oe){case Q.TM_CONCAT:return fe.luaG_concaterror(w,j,I);case Q.TM_BAND:case Q.TM_BOR:case Q.TM_BXOR:case Q.TM_SHL:case Q.TM_SHR:case Q.TM_BNOT:var me=Ge.tonumber(j),Z=Ge.tonumber(I);return me!==!1&&Z!==!1?fe.luaG_tointerror(w,j,I):fe.luaG_opinterror(w,j,I,b("perform bitwise operation on",!0));default:return fe.luaG_opinterror(w,j,I,b("perform arithmetic on",!0))}},e.exports.luaT_callorderTM=function(w,j,I,G){var Oe=new N.TValue;return Xe(w,j,I,Oe,G)?!Oe.l_isfalse():null},e.exports.luaT_gettm=De,e.exports.luaT_gettmbyobj=aa,e.exports.luaT_init=function(w){w.l_G.tmname[Q.TM_INDEX]=new Y(w,b("__index",!0)),w.l_G.tmname[Q.TM_NEWINDEX]=new Y(w,b("__newindex",!0)),w.l_G.tmname[Q.TM_GC]=new Y(w,b("__gc",!0)),w.l_G.tmname[Q.TM_MODE]=new Y(w,b("__mode",!0)),w.l_G.tmname[Q.TM_LEN]=new Y(w,b("__len",!0)),w.l_G.tmname[Q.TM_EQ]=new Y(w,b("__eq",!0)),w.l_G.tmname[Q.TM_ADD]=new Y(w,b("__add",!0)),w.l_G.tmname[Q.TM_SUB]=new Y(w,b("__sub",!0)),w.l_G.tmname[Q.TM_MUL]=new Y(w,b("__mul",!0)),w.l_G.tmname[Q.TM_MOD]=new Y(w,b("__mod",!0)),w.l_G.tmname[Q.TM_POW]=new Y(w,b("__pow",!0)),w.l_G.tmname[Q.TM_DIV]=new Y(w,b("__div",!0)),w.l_G.tmname[Q.TM_IDIV]=new Y(w,b("__idiv",!0)),w.l_G.tmname[Q.TM_BAND]=new Y(w,b("__band",!0)),w.l_G.tmname[Q.TM_BOR]=new Y(w,b("__bor",!0)),w.l_G.tmname[Q.TM_BXOR]=new Y(w,b("__bxor",!0)),w.l_G.tmname[Q.TM_SHL]=new Y(w,b("__shl",!0)),w.l_G.tmname[Q.TM_SHR]=new Y(w,b("__shr",!0)),w.l_G.tmname[Q.TM_UNM]=new Y(w,b("__unm",!0)),w.l_G.tmname[Q.TM_BNOT]=new Y(w,b("__bnot",!0)),w.l_G.tmname[Q.TM_LT]=new Y(w,b("__lt",!0)),w.l_G.tmname[Q.TM_LE]=new Y(w,b("__le",!0)),w.l_G.tmname[Q.TM_CONCAT]=new Y(w,b("__concat",!0)),w.l_G.tmname[Q.TM_CALL]=new Y(w,b("__call",!0))},e.exports.luaT_objtypename=function(w,j){var I;if(j.ttistable()&&(I=j.value.metatable)!==null||j.ttisfulluserdata()&&(I=j.value.metatable)!==null){var G=Le.luaH_getstr(I,K(w,ea));if(G.ttisstring())return G.svalue()}return ne(j.ttnov())},e.exports.ttypename=ne},function(e,ga,d){var o=d(1),s=o.LUA_MASKLINE,m=o.LUA_MASKCOUNT,ge=o.LUA_MULTRET,b=o.constant_types,y=b.LUA_TBOOLEAN,N=b.LUA_TLCF,pe=b.LUA_TLIGHTUSERDATA,q=b.LUA_TLNGSTR,Ne=b.LUA_TNIL,K=b.LUA_TNUMBER,Y=b.LUA_TNUMFLT,Le=b.LUA_TNUMINT,fe=b.LUA_TSHRSTR,Ge=b.LUA_TTABLE,te=b.LUA_TUSERDATA,ne=o.to_luastring,Q=d(16),ea=Q.INDEXK,Pe=Q.ISK,Xe=Q.LFIELDS_PER_FLUSH,De=Q.OpCodesI,aa=De.OP_ADD,w=De.OP_BAND,j=De.OP_BNOT,I=De.OP_BOR,G=De.OP_BXOR,Oe=De.OP_CALL,me=De.OP_CLOSURE,Z=De.OP_CONCAT,de=De.OP_DIV,We=De.OP_EQ,se=De.OP_EXTRAARG,Ue=De.OP_FORLOOP,P=De.OP_FORPREP,C=De.OP_GETTABLE,T=De.OP_GETTABUP,E=De.OP_GETUPVAL,X=De.OP_IDIV,R=De.OP_JMP,_e=De.OP_LE,Te=De.OP_LEN,na=De.OP_LOADBOOL,qe=De.OP_LOADK,fa=De.OP_LOADKX,va=De.OP_LOADNIL,U=De.OP_LT,S=De.OP_MOD,ve=De.OP_MOVE,F=De.OP_MUL,Je=De.OP_NEWTABLE,Ye=De.OP_NOT,Ze=De.OP_POW,he=De.OP_RETURN,ha=De.OP_SELF,La=De.OP_SETLIST,z=De.OP_SETTABLE,je=De.OP_SETTABUP,Ke=De.OP_SETUPVAL,i=De.OP_SHL,$=De.OP_SHR,ke=De.OP_SUB,Qe=De.OP_TAILCALL,sa=De.OP_TEST,xa=De.OP_TESTSET,Ma=De.OP_TFORCALL,_a=De.OP_TFORLOOP,Ua=De.OP_UNM,Ra=De.OP_VARARG,Va=d(3),h=Va.LUA_MAXINTEGER,ce=Va.LUA_MININTEGER,Se=Va.lua_numbertointeger,Ee=d(4),xe=Ee.lua_assert,ee=Ee.luai_nummod,ra=d(6),da=d(13),Oa=d(12),Ea=d(10),Ia=Ea.luaS_bless,pa=Ea.luaS_eqlngstr,a=Ea.luaS_hashlongstr,p=d(8),r=d(14),n=d(9),L=d(11),l=function(c,J,Re){return J+Re.A},_=function(c,J,Re){return J+Re.B},B=function(c,J,Re,Me){return Pe(Me.B)?Re[ea(Me.B)]:c.stack[J+Me.B]},A=function(c,J,Re,Me){return Pe(Me.C)?Re[ea(Me.C)]:c.stack[J+Me.C]},M=function(c,J,Re,Me){var ze=Re.A;ze!==0&&da.luaF_close(c,J.l_base+ze-1),J.l_savedpc+=Re.sBx+Me},ue=function(c,J){M(c,J,J.l_code[J.l_savedpc],1)},oe=function(c,J,Re){if(J.ttisnumber()&&Re.ttisnumber())return ka(J,Re)?1:0;if(J.ttisstring()&&Re.ttisstring())return wa(J.tsvalue(),Re.tsvalue())<0?1:0;var Me=r.luaT_callorderTM(c,J,Re,r.TMS.TM_LT);return Me===null&&L.luaG_ordererror(c,J,Re),Me?1:0},Ta=function(c,J,Re){var Me;return J.ttisnumber()&&Re.ttisnumber()?Sa(J,Re)?1:0:J.ttisstring()&&Re.ttisstring()?wa(J.tsvalue(),Re.tsvalue())<=0?1:0:(Me=r.luaT_callorderTM(c,J,Re,r.TMS.TM_LE))!==null?Me?1:0:(c.ci.callstatus|=Oa.CIST_LEQ,Me=r.luaT_callorderTM(c,Re,J,r.TMS.TM_LT),c.ci.callstatus^=Oa.CIST_LEQ,Me===null&&L.luaG_ordererror(c,J,Re),Me?0:1)},Ve=function(c,J,Re){if(J.ttype()!==Re.ttype())return J.ttnov()!==Re.ttnov()||J.ttnov()!==K?0:J.value===Re.value?1:0;var Me;switch(J.ttype()){case Ne:return 1;case y:return J.value==Re.value?1:0;case pe:case Le:case Y:case N:return J.value===Re.value?1:0;case fe:case q:return pa(J.tsvalue(),Re.tsvalue())?1:0;case te:case Ge:if(J.value===Re.value)return 1;if(c===null)return 0;(Me=r.fasttm(c,J.value.metatable,r.TMS.TM_EQ))===null&&(Me=r.fasttm(c,Re.value.metatable,r.TMS.TM_EQ));break;default:return J.value===Re.value?1:0}if(Me===null)return 0;var ze=new ra.TValue;return r.luaT_callTM(c,Me,J,Re,ze,1),ze.l_isfalse()?0:1},H=function(c,J){var Re=!1,Me=Ae(c,J<0?2:1);if(Me===!1){var ze=$e(c);if(ze===!1)return!1;0<ze?(Me=h,J<0&&(Re=!0)):(Me=ce,J>=0&&(Re=!0))}return{stopnow:Re,ilimit:Me}},Ae=function c(J,Re){if(J.ttisfloat()){var Me=J.value,ze=Math.floor(Me);if(Me!==ze){if(Re===0)return!1;Re>1&&(ze+=1)}return Se(ze)}if(J.ttisinteger())return J.value;if(Pa(J)){var Be=new ra.TValue;if(ra.luaO_str2num(J.svalue(),Be)===J.vslen()+1)return c(Be,Re)}return!1},He=function(c){return c.ttisinteger()?c.value:Ae(c,0)},$e=function(c){if(c.ttnov()===K)return c.value;if(Pa(c)){var J=new ra.TValue;if(ra.luaO_str2num(c.svalue(),J)===c.vslen()+1)return J.value}return!1},ka=function(c,J){return c.value<J.value},Sa=function(c,J){return c.value<=J.value},wa=function(c,J){var Re=a(c),Me=a(J);return Re===Me?0:Re<Me?-1:1},Fa=function(c,J,Re){var Me;switch(Re.ttype()){case Ge:var ze=Re.value;if((Me=r.fasttm(c,ze.metatable,r.TMS.TM_LEN))!==null)break;return void J.setivalue(n.luaH_getn(ze));case fe:case q:return void J.setivalue(Re.vslen());default:(Me=r.luaT_gettmbyobj(c,Re,r.TMS.TM_LEN)).ttisnil()&&L.luaG_typeerror(c,Re,ne("get length of",!0))}r.luaT_callTM(c,Me,Re,Re,J,1)},Qa=Math.imul||function(c,J){var Re=65535&c,Me=65535&J;return Re*Me+((c>>>16&65535)*Me+Re*(J>>>16&65535)<<16>>>0)|0},v=function(c,J,Re){return Re===0&&L.luaG_runerror(c,ne("attempt to divide by zero")),0|Math.floor(J/Re)},ie=function(c,J,Re){return Re===0&&L.luaG_runerror(c,ne("attempt to perform 'n%%0'")),J-Math.floor(J/Re)*Re|0},Ie=function(c,J){return J<0?J<=-32?0:c>>>-J:J>=32?0:c<<J},ta=function(c,J,Re,Me){var ze=c.cache;if(ze!==null)for(var Be=c.upvalues,Ce=Be.length,Ba=0;Ba<Ce;Ba++){var t=Be[Ba].instack?Re[Me+Be[Ba].idx]:J[Be[Ba].idx];if(ze.upvals[Ba]!==t)return null}return ze},la=function(c,J,Re,Me,ze){var Be=J.upvalues.length,Ce=J.upvalues,Ba=new ra.LClosure(c,Be);Ba.p=J,c.stack[ze].setclLvalue(Ba);for(var t=0;t<Be;t++)Ce[t].instack?Ba.upvals[t]=da.luaF_findupval(c,Me+Ce[t].idx):Ba.upvals[t]=Re[Ce[t].idx];J.cache=Ba},ua=function(c){return c.ttisnumber()},Pa=function(c){return c.ttisstring()},za=function(c,J){var Re=c.stack[J];return!!Re.ttisstring()||!!ua(Re)&&(ra.luaO_tostring(c,Re),!0)},Xa=function(c){return c.ttisstring()&&c.vslen()===0},ja=function(c,J,Re,Me){var ze=0;do{var Be=c.stack[J-Re],Ce=Be.vslen(),Ba=Be.svalue();Me.set(Ba,ze),ze+=Ce}while(--Re>0)},Ka=function(c,J){xe(J>=2);do{var Re=c.top,Me=2;if((c.stack[Re-2].ttisstring()||ua(c.stack[Re-2]))&&za(c,Re-1))if(Xa(c.stack[Re-1]))za(c,Re-2);else if(Xa(c.stack[Re-2]))ra.setobjs2s(c,Re-2,Re-1);else{var ze=c.stack[Re-1].vslen();for(Me=1;Me<J&&za(c,Re-Me-1);Me++)ze+=c.stack[Re-Me-1].vslen();var Be=new Uint8Array(ze);ja(c,Re,Me,Be);var Ce=Ia(c,Be);ra.setsvalue2s(c,Re-Me,Ce)}else r.luaT_trybinTM(c,c.stack[Re-2],c.stack[Re-1],c.stack[Re-2],r.TMS.TM_CONCAT);for(J-=Me-1;c.top>Re-(Me-1);)delete c.stack[--c.top]}while(J>1)},Ga=function(c,J,Re,Me){for(var ze=0;ze<2e3;ze++){var Be=void 0;if(J.ttistable()){var Ce=n.luaH_get(c,J.value,Re);if(!Ce.ttisnil())return void ra.setobj2s(c,Me,Ce);if((Be=r.fasttm(c,J.value.metatable,r.TMS.TM_INDEX))===null)return void c.stack[Me].setnilvalue()}else(Be=r.luaT_gettmbyobj(c,J,r.TMS.TM_INDEX)).ttisnil()&&L.luaG_typeerror(c,J,ne("index",!0));if(Be.ttisfunction())return void r.luaT_callTM(c,Be,J,Re,c.stack[Me],1);J=Be}L.luaG_runerror(c,ne("'__index' chain too long; possible loop",!0))},Ya=function(c,J,Re,Me){for(var ze=0;ze<2e3;ze++){var Be=void 0;if(J.ttistable()){var Ce=J.value;if(!n.luaH_get(c,Ce,Re).ttisnil()||(Be=r.fasttm(c,Ce.metatable,r.TMS.TM_NEWINDEX))===null)return n.luaH_setfrom(c,Ce,Re,Me),void n.invalidateTMcache(Ce)}else(Be=r.luaT_gettmbyobj(c,J,r.TMS.TM_NEWINDEX)).ttisnil()&&L.luaG_typeerror(c,J,ne("index",!0));if(Be.ttisfunction())return void r.luaT_callTM(c,Be,J,Re,Me,0);J=Be}L.luaG_runerror(c,ne("'__newindex' chain too long; possible loop",!0))};e.exports.cvt2str=ua,e.exports.cvt2num=Pa,e.exports.luaV_gettable=Ga,e.exports.luaV_concat=Ka,e.exports.luaV_div=v,e.exports.luaV_equalobj=Ve,e.exports.luaV_execute=function(c){var J=c.ci;J.callstatus|=Oa.CIST_FRESH;e:for(;;){xe(J===c.ci);var Re=J.func.value,Me=Re.p.k,ze=J.l_base,Be=J.l_code[J.l_savedpc++];c.hookmask&(s|m)&&L.luaG_traceexec(c);var Ce=l(0,ze,Be);switch(Be.opcode){case ve:ra.setobjs2s(c,Ce,_(0,ze,Be));break;case qe:var Ba=Me[Be.Bx];ra.setobj2s(c,Ce,Ba);break;case fa:xe(J.l_code[J.l_savedpc].opcode===se);var t=Me[J.l_code[J.l_savedpc++].Ax];ra.setobj2s(c,Ce,t);break;case na:c.stack[Ce].setbvalue(Be.B!==0),Be.C!==0&&J.l_savedpc++;break;case va:for(var O=0;O<=Be.B;O++)c.stack[Ce+O].setnilvalue();break;case E:var k=Be.B;ra.setobj2s(c,Ce,Re.upvals[k]);break;case T:var D=Re.upvals[Be.B],ae=A(c,ze,Me,Be);Ga(c,D,ae,Ce);break;case C:var re=c.stack[_(0,ze,Be)],ia=A(c,ze,Me,Be);Ga(c,re,ia,Ce);break;case je:var ma=Re.upvals[Be.A],u=B(c,ze,Me,Be),g=A(c,ze,Me,Be);Ya(c,ma,u,g);break;case Ke:Re.upvals[Be.B].setfrom(c.stack[Ce]);break;case z:var V=c.stack[Ce],we=B(c,ze,Me,Be),ca=A(c,ze,Me,Be);Ya(c,V,we,ca);break;case Je:c.stack[Ce].sethvalue(n.luaH_new(c));break;case ha:var ba=_(0,ze,Be),Na=A(c,ze,Me,Be);ra.setobjs2s(c,Ce+1,ba),Ga(c,c.stack[ba],Na,Ce);break;case aa:var Da=B(c,ze,Me,Be),Za=A(c,ze,Me,Be),qa=void 0,Wa=void 0;Da.ttisinteger()&&Za.ttisinteger()?c.stack[Ce].setivalue(Da.value+Za.value|0):(qa=$e(Da))!==!1&&(Wa=$e(Za))!==!1?c.stack[Ce].setfltvalue(qa+Wa):r.luaT_trybinTM(c,Da,Za,c.stack[Ce],r.TMS.TM_ADD);break;case ke:var Ja=B(c,ze,Me,Be),$a=A(c,ze,Me,Be),tr=void 0,Rr=void 0;Ja.ttisinteger()&&$a.ttisinteger()?c.stack[Ce].setivalue(Ja.value-$a.value|0):(tr=$e(Ja))!==!1&&(Rr=$e($a))!==!1?c.stack[Ce].setfltvalue(tr-Rr):r.luaT_trybinTM(c,Ja,$a,c.stack[Ce],r.TMS.TM_SUB);break;case F:var ir=B(c,ze,Me,Be),hr=A(c,ze,Me,Be),xr=void 0,Lr=void 0;ir.ttisinteger()&&hr.ttisinteger()?c.stack[Ce].setivalue(Qa(ir.value,hr.value)):(xr=$e(ir))!==!1&&(Lr=$e(hr))!==!1?c.stack[Ce].setfltvalue(xr*Lr):r.luaT_trybinTM(c,ir,hr,c.stack[Ce],r.TMS.TM_MUL);break;case S:var nr=B(c,ze,Me,Be),cr=A(c,ze,Me,Be),dr=void 0,br=void 0;nr.ttisinteger()&&cr.ttisinteger()?c.stack[Ce].setivalue(ie(c,nr.value,cr.value)):(dr=$e(nr))!==!1&&(br=$e(cr))!==!1?c.stack[Ce].setfltvalue(ee(c,dr,br)):r.luaT_trybinTM(c,nr,cr,c.stack[Ce],r.TMS.TM_MOD);break;case Ze:var yr,er=B(c,ze,Me,Be),fr=A(c,ze,Me,Be),kr=void 0;(yr=$e(er))!==!1&&(kr=$e(fr))!==!1?c.stack[Ce].setfltvalue(Math.pow(yr,kr)):r.luaT_trybinTM(c,er,fr,c.stack[Ce],r.TMS.TM_POW);break;case de:var Sr,Or=B(c,ze,Me,Be),Er=A(c,ze,Me,Be),wr=void 0;(Sr=$e(Or))!==!1&&(wr=$e(Er))!==!1?c.stack[Ce].setfltvalue(Sr/wr):r.luaT_trybinTM(c,Or,Er,c.stack[Ce],r.TMS.TM_DIV);break;case X:var sr=B(c,ze,Me,Be),_r=A(c,ze,Me,Be),Ir=void 0,mr=void 0;sr.ttisinteger()&&_r.ttisinteger()?c.stack[Ce].setivalue(v(c,sr.value,_r.value)):(Ir=$e(sr))!==!1&&(mr=$e(_r))!==!1?c.stack[Ce].setfltvalue(Math.floor(Ir/mr)):r.luaT_trybinTM(c,sr,_r,c.stack[Ce],r.TMS.TM_IDIV);break;case w:var Mr,Ar=B(c,ze,Me,Be),f=A(c,ze,Me,Be),x=void 0;(Mr=He(Ar))!==!1&&(x=He(f))!==!1?c.stack[Ce].setivalue(Mr&x):r.luaT_trybinTM(c,Ar,f,c.stack[Ce],r.TMS.TM_BAND);break;case I:var W,ye=B(c,ze,Me,Be),be=A(c,ze,Me,Be),le=void 0;(W=He(ye))!==!1&&(le=He(be))!==!1?c.stack[Ce].setivalue(W|le):r.luaT_trybinTM(c,ye,be,c.stack[Ce],r.TMS.TM_BOR);break;case G:var Fe,oa=B(c,ze,Me,Be),Aa=A(c,ze,Me,Be),ya=void 0;(Fe=He(oa))!==!1&&(ya=He(Aa))!==!1?c.stack[Ce].setivalue(Fe^ya):r.luaT_trybinTM(c,oa,Aa,c.stack[Ce],r.TMS.TM_BXOR);break;case i:var Ca,Ha=B(c,ze,Me,Be),ar=A(c,ze,Me,Be),Pr=void 0;(Ca=He(Ha))!==!1&&(Pr=He(ar))!==!1?c.stack[Ce].setivalue(Ie(Ca,Pr)):r.luaT_trybinTM(c,Ha,ar,c.stack[Ce],r.TMS.TM_SHL);break;case $:var Wr,qr=B(c,ze,Me,Be),Qr=A(c,ze,Me,Be),$r=void 0;(Wr=He(qr))!==!1&&($r=He(Qr))!==!1?c.stack[Ce].setivalue(Ie(Wr,-$r)):r.luaT_trybinTM(c,qr,Qr,c.stack[Ce],r.TMS.TM_SHR);break;case Ua:var Ur=c.stack[_(0,ze,Be)],en=void 0;Ur.ttisinteger()?c.stack[Ce].setivalue(0|-Ur.value):(en=$e(Ur))!==!1?c.stack[Ce].setfltvalue(-en):r.luaT_trybinTM(c,Ur,Ur,c.stack[Ce],r.TMS.TM_UNM);break;case j:var Cr=c.stack[_(0,ze,Be)];Cr.ttisinteger()?c.stack[Ce].setivalue(~Cr.value):r.luaT_trybinTM(c,Cr,Cr,c.stack[Ce],r.TMS.TM_BNOT);break;case Ye:var gn=c.stack[_(0,ze,Be)];c.stack[Ce].setbvalue(gn.l_isfalse());break;case Te:Fa(c,c.stack[Ce],c.stack[_(0,ze,Be)]);break;case Z:var an=Be.B,rn=Be.C;c.top=ze+rn+1,Ka(c,rn-an+1);var Tn=ze+an;ra.setobjs2s(c,Ce,Tn),p.adjust_top(c,J.top);break;case R:M(c,J,Be,0);break;case We:Ve(c,B(c,ze,Me,Be),A(c,ze,Me,Be))!==Be.A?J.l_savedpc++:ue(c,J);break;case U:oe(c,B(c,ze,Me,Be),A(c,ze,Me,Be))!==Be.A?J.l_savedpc++:ue(c,J);break;case _e:Ta(c,B(c,ze,Me,Be),A(c,ze,Me,Be))!==Be.A?J.l_savedpc++:ue(c,J);break;case sa:(Be.C?c.stack[Ce].l_isfalse():!c.stack[Ce].l_isfalse())?J.l_savedpc++:ue(c,J);break;case xa:var nn=_(0,ze,Be),un=c.stack[nn];(Be.C?un.l_isfalse():!un.l_isfalse())?J.l_savedpc++:(ra.setobjs2s(c,Ce,nn),ue(c,J));break;case Oe:var tn=Be.B,sn=Be.C-1;if(tn!==0&&p.adjust_top(c,Ce+tn),!p.luaD_precall(c,Ce,sn)){J=c.ci;continue e}sn>=0&&p.adjust_top(c,J.top);break;case Qe:var on=Be.B;if(on!==0&&p.adjust_top(c,Ce+on),!p.luaD_precall(c,Ce,ge)){var pr=c.ci,rr=pr.previous,xn=pr.func,Dr=pr.funcOff,Vr=rr.funcOff,bn=pr.l_base+xn.value.p.numparams;Re.p.p.length>0&&da.luaF_close(c,rr.l_base);for(var Br=0;Dr+Br<bn;Br++)ra.setobjs2s(c,Vr+Br,Dr+Br);rr.l_base=Vr+(pr.l_base-Dr),rr.top=Vr+(c.top-Dr),p.adjust_top(c,rr.top),rr.l_code=pr.l_code,rr.l_savedpc=pr.l_savedpc,rr.callstatus|=Oa.CIST_TAIL,rr.next=null,J=c.ci=rr,xe(c.top===rr.l_base+c.stack[Vr].value.p.maxstacksize);continue e}break;case he:Re.p.p.length>0&&da.luaF_close(c,ze);var kn=p.luaD_poscall(c,J,Ce,Be.B!==0?Be.B-1:c.top-Ce);if(J.callstatus&Oa.CIST_FRESH)return;J=c.ci,kn&&p.adjust_top(c,J.top),xe(J.callstatus&Oa.CIST_LUA),xe(J.l_code[J.l_savedpc-1].opcode===Oe);continue e;case Ue:if(c.stack[Ce].ttisinteger()){var ln=c.stack[Ce+2].value,Gr=c.stack[Ce].value+ln|0,cn=c.stack[Ce+1].value;(0<ln?Gr<=cn:cn<=Gr)&&(J.l_savedpc+=Be.sBx,c.stack[Ce].chgivalue(Gr),c.stack[Ce+3].setivalue(Gr))}else{var fn=c.stack[Ce+2].value,Kr=c.stack[Ce].value+fn,_n=c.stack[Ce+1].value;(0<fn?Kr<=_n:_n<=Kr)&&(J.l_savedpc+=Be.sBx,c.stack[Ce].chgfltvalue(Kr),c.stack[Ce+3].setfltvalue(Kr))}break;case P:var Fr=c.stack[Ce],Xr=c.stack[Ce+1],jr=c.stack[Ce+2],zr=void 0;if(Fr.ttisinteger()&&jr.ttisinteger()&&(zr=H(Xr,jr.value))){var On=zr.stopnow?0:Fr.value;Xr.value=zr.ilimit,Fr.value=On-jr.value|0}else{var pn,Jr,vn;(pn=$e(Xr))===!1&&L.luaG_runerror(c,ne("'for' limit must be a number",!0)),c.stack[Ce+1].setfltvalue(pn),(Jr=$e(jr))===!1&&L.luaG_runerror(c,ne("'for' step must be a number",!0)),c.stack[Ce+2].setfltvalue(Jr),(vn=$e(Fr))===!1&&L.luaG_runerror(c,ne("'for' initial value must be a number",!0)),c.stack[Ce].setfltvalue(vn-Jr)}J.l_savedpc+=Be.sBx;break;case Ma:var Nr=Ce+3;ra.setobjs2s(c,Nr+2,Ce+2),ra.setobjs2s(c,Nr+1,Ce+1),ra.setobjs2s(c,Nr,Ce),p.adjust_top(c,Nr+3),p.luaD_call(c,Nr,Be.C),p.adjust_top(c,J.top),Be=J.l_code[J.l_savedpc++],Ce=l(0,ze,Be),xe(Be.opcode===_a);case _a:c.stack[Ce+1].ttisnil()||(ra.setobjs2s(c,Ce,Ce+1),J.l_savedpc+=Be.sBx);break;case La:var gr=Be.B,Yr=Be.C;gr===0&&(gr=c.top-Ce-1),Yr===0&&(xe(J.l_code[J.l_savedpc].opcode===se),Yr=J.l_code[J.l_savedpc++].Ax);for(var En=c.stack[Ce].value,mn=(Yr-1)*Xe+gr;gr>0;gr--)n.luaH_setint(En,mn--,c.stack[Ce+gr]);p.adjust_top(c,J.top);break;case me:var hn=Re.p.p[Be.Bx],Ln=ta(hn,Re.upvals,c.stack,ze);Ln===null?la(c,hn,Re.upvals,ze,Ce):c.stack[Ce].setclLvalue(Ln);break;case Ra:var Hr=Be.B-1,vr=ze-J.funcOff-Re.p.numparams-1,ur=void 0;for(vr<0&&(vr=0),Hr<0&&(Hr=vr,p.luaD_checkstack(c,vr),p.adjust_top(c,Ce+vr)),ur=0;ur<Hr&&ur<vr;ur++)ra.setobjs2s(c,Ce+ur,ze-vr+ur);for(;ur<Hr;ur++)c.stack[Ce+ur].setnilvalue();break;case se:throw Error("invalid opcode")}}},e.exports.luaV_finishOp=function(c){var J=c.ci,Re=J.l_base,Me=J.l_code[J.l_savedpc-1],ze=Me.opcode;switch(ze){case aa:case ke:case F:case de:case X:case w:case I:case G:case i:case $:case S:case Ze:case Ua:case j:case Te:case T:case C:case ha:ra.setobjs2s(c,Re+Me.A,c.top-1),delete c.stack[--c.top];break;case _e:case U:case We:var Be=!c.stack[c.top-1].l_isfalse();delete c.stack[--c.top],J.callstatus&Oa.CIST_LEQ&&(xe(ze===_e),J.callstatus^=Oa.CIST_LEQ,Be=!Be),xe(J.l_code[J.l_savedpc].opcode===R),Be!==!!Me.A&&J.l_savedpc++;break;case Z:var Ce=c.top-1,Ba=Ce-1-(Re+Me.B);ra.setobjs2s(c,Ce-2,Ce),Ba>1&&(c.top=Ce-1,Ka(c,Ba)),ra.setobjs2s(c,J.l_base+Me.A,c.top-1),p.adjust_top(c,J.top);break;case Ma:xe(J.l_code[J.l_savedpc].opcode===_a),p.adjust_top(c,J.top);break;case Oe:Me.C-1>=0&&p.adjust_top(c,J.top)}},e.exports.luaV_imul=Qa,e.exports.luaV_lessequal=Ta,e.exports.luaV_lessthan=oe,e.exports.luaV_mod=ie,e.exports.luaV_objlen=Fa,e.exports.luaV_rawequalobj=function(c,J){return Ve(null,c,J)},e.exports.luaV_shiftl=Ie,e.exports.luaV_tointeger=Ae,e.exports.settable=Ya,e.exports.tointeger=He,e.exports.tonumber=$e},function(e,ga,d){var o=[96,113,65,84,80,80,92,108,60,16,60,84,108,124,124,124,124,124,124,124,124,124,124,124,124,96,96,96,96,104,34,188,188,188,132,228,84,84,16,98,98,4,98,20,81,80,23],s=function(N,pe){return~(-1<<N)<<pe},m=function(N,pe){return~s(N,pe)},ge=function(N,pe,q,Ne){return N.code=N.code&m(Ne,q)|pe<<q&s(Ne,q),y(N)},b=function(N,pe){return ge(N,pe,14,18)},y=function(N){if(typeof N=="number")return{code:N,opcode:N>>0&s(6,0),A:N>>6&s(8,0),B:N>>23&s(9,0),C:N>>14&s(9,0),Bx:N>>14&s(18,0),Ax:N>>6&s(26,0),sBx:(N>>14&s(18,0))-131071};var pe=N.code;return N.opcode=pe>>0&s(6,0),N.A=pe>>6&s(8,0),N.B=pe>>23&s(9,0),N.C=pe>>14&s(9,0),N.Bx=pe>>14&s(18,0),N.Ax=pe>>6&s(26,0),N.sBx=(pe>>14&s(18,0))-131071,N};e.exports.BITRK=256,e.exports.CREATE_ABC=function(N,pe,q,Ne){return y(N<<0|pe<<6|q<<23|Ne<<14)},e.exports.CREATE_ABx=function(N,pe,q){return y(N<<0|pe<<6|q<<14)},e.exports.CREATE_Ax=function(N,pe){return y(N<<0|pe<<6)},e.exports.GET_OPCODE=function(N){return N.opcode},e.exports.GETARG_A=function(N){return N.A},e.exports.GETARG_B=function(N){return N.B},e.exports.GETARG_C=function(N){return N.C},e.exports.GETARG_Bx=function(N){return N.Bx},e.exports.GETARG_Ax=function(N){return N.Ax},e.exports.GETARG_sBx=function(N){return N.sBx},e.exports.INDEXK=function(N){return-257&N},e.exports.ISK=function(N){return 256&N},e.exports.LFIELDS_PER_FLUSH=50,e.exports.MAXARG_A=255,e.exports.MAXARG_Ax=67108863,e.exports.MAXARG_B=511,e.exports.MAXARG_Bx=262143,e.exports.MAXARG_C=511,e.exports.MAXARG_sBx=131071,e.exports.MAXINDEXRK=255,e.exports.NO_REG=255,e.exports.OpArgK=3,e.exports.OpArgN=0,e.exports.OpArgR=2,e.exports.OpArgU=1,e.exports.OpCodes=["MOVE","LOADK","LOADKX","LOADBOOL","LOADNIL","GETUPVAL","GETTABUP","GETTABLE","SETTABUP","SETUPVAL","SETTABLE","NEWTABLE","SELF","ADD","SUB","MUL","MOD","POW","DIV","IDIV","BAND","BOR","BXOR","SHL","SHR","UNM","BNOT","NOT","LEN","CONCAT","JMP","EQ","LT","LE","TEST","TESTSET","CALL","TAILCALL","RETURN","FORLOOP","FORPREP","TFORCALL","TFORLOOP","SETLIST","CLOSURE","VARARG","EXTRAARG"],e.exports.OpCodesI={OP_MOVE:0,OP_LOADK:1,OP_LOADKX:2,OP_LOADBOOL:3,OP_LOADNIL:4,OP_GETUPVAL:5,OP_GETTABUP:6,OP_GETTABLE:7,OP_SETTABUP:8,OP_SETUPVAL:9,OP_SETTABLE:10,OP_NEWTABLE:11,OP_SELF:12,OP_ADD:13,OP_SUB:14,OP_MUL:15,OP_MOD:16,OP_POW:17,OP_DIV:18,OP_IDIV:19,OP_BAND:20,OP_BOR:21,OP_BXOR:22,OP_SHL:23,OP_SHR:24,OP_UNM:25,OP_BNOT:26,OP_NOT:27,OP_LEN:28,OP_CONCAT:29,OP_JMP:30,OP_EQ:31,OP_LT:32,OP_LE:33,OP_TEST:34,OP_TESTSET:35,OP_CALL:36,OP_TAILCALL:37,OP_RETURN:38,OP_FORLOOP:39,OP_FORPREP:40,OP_TFORCALL:41,OP_TFORLOOP:42,OP_SETLIST:43,OP_CLOSURE:44,OP_VARARG:45,OP_EXTRAARG:46},e.exports.POS_A=6,e.exports.POS_Ax=6,e.exports.POS_B=23,e.exports.POS_Bx=14,e.exports.POS_C=14,e.exports.POS_OP=0,e.exports.RKASK=function(N){return 256|N},e.exports.SETARG_A=function(N,pe){return ge(N,pe,6,8)},e.exports.SETARG_Ax=function(N,pe){return ge(N,pe,6,26)},e.exports.SETARG_B=function(N,pe){return ge(N,pe,23,9)},e.exports.SETARG_Bx=b,e.exports.SETARG_C=function(N,pe){return ge(N,pe,14,9)},e.exports.SETARG_sBx=function(N,pe){return b(N,pe+131071)},e.exports.SET_OPCODE=function(N,pe){return N.code=N.code&m(6,0)|pe<<0&s(6,0),y(N)},e.exports.SIZE_A=8,e.exports.SIZE_Ax=26,e.exports.SIZE_B=9,e.exports.SIZE_Bx=18,e.exports.SIZE_C=9,e.exports.SIZE_OP=6,e.exports.fullins=y,e.exports.getBMode=function(N){return o[N]>>4&3},e.exports.getCMode=function(N){return o[N]>>2&3},e.exports.getOpMode=function(N){return 3&o[N]},e.exports.iABC=0,e.exports.iABx=1,e.exports.iAsBx=2,e.exports.iAx=3,e.exports.testAMode=function(N){return 64&o[N]},e.exports.testTMode=function(N){return 128&o[N]}},function(e,ga,d){var o=d(2),s="_"+o.LUA_VERSION_MAJOR+"_"+o.LUA_VERSION_MINOR;e.exports.LUA_VERSUFFIX=s,e.exports.lua_assert=function(ge){},e.exports.luaopen_base=d(24).luaopen_base,e.exports.LUA_COLIBNAME="coroutine",e.exports.luaopen_coroutine=d(25).luaopen_coroutine,e.exports.LUA_TABLIBNAME="table",e.exports.luaopen_table=d(26).luaopen_table,e.exports.LUA_OSLIBNAME="os",e.exports.luaopen_os=d(27).luaopen_os,e.exports.LUA_STRLIBNAME="string",e.exports.luaopen_string=d(28).luaopen_string,e.exports.LUA_UTF8LIBNAME="utf8",e.exports.luaopen_utf8=d(29).luaopen_utf8,e.exports.LUA_BITLIBNAME="bit32",e.exports.LUA_MATHLIBNAME="math",e.exports.luaopen_math=d(30).luaopen_math,e.exports.LUA_DBLIBNAME="debug",e.exports.luaopen_debug=d(31).luaopen_debug,e.exports.LUA_LOADLIBNAME="package",e.exports.luaopen_package=d(32).luaopen_package,e.exports.LUA_FENGARILIBNAME="fengari",e.exports.luaopen_fengari=d(33).luaopen_fengari;var m=d(39);e.exports.luaL_openlibs=m.luaL_openlibs},function(e,ga,d){function o(v){return(o=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(ie){return typeof ie}:function(ie){return ie&&typeof Symbol=="function"&&ie.constructor===Symbol&&ie!==Symbol.prototype?"symbol":typeof ie})(v)}var s=d(0),m=s.lua,ge=s.lauxlib,b=s.lualib,y=s.to_luastring,N=m.LUA_MULTRET,pe=m.LUA_OK,q=m.LUA_REGISTRYINDEX,Ne=m.LUA_RIDX_MAINTHREAD,K=m.LUA_TBOOLEAN,Y=m.LUA_TFUNCTION,Le=m.LUA_TLIGHTUSERDATA,fe=m.LUA_TNIL,Ge=m.LUA_TNONE,te=m.LUA_TNUMBER,ne=m.LUA_TSTRING,Q=m.LUA_TTABLE,ea=m.LUA_TTHREAD,Pe=m.LUA_TUSERDATA,Xe=m.lua_atnativeerror,De=m.lua_call,aa=m.lua_getfield,w=m.lua_gettable,j=m.lua_gettop,I=m.lua_isnil,G=m.lua_isproxy,Oe=m.lua_newuserdata,me=m.lua_pcall,Z=m.lua_pop,de=m.lua_pushboolean,We=m.lua_pushcfunction,se=m.lua_pushinteger,Ue=m.lua_pushlightuserdata,P=m.lua_pushliteral,C=m.lua_pushnil,T=m.lua_pushnumber,E=m.lua_pushstring,X=m.lua_pushvalue,R=m.lua_rawgeti,_e=m.lua_rawgetp,Te=m.lua_rawsetp,na=m.lua_rotate,qe=m.lua_setfield,fa=m.lua_settable,va=m.lua_settop,U=m.lua_toboolean,S=m.lua_tojsstring,ve=m.lua_tonumber,F=m.lua_toproxy,Je=m.lua_tothread,Ye=m.lua_touserdata,Ze=m.lua_type,he=ge.luaL_argerror,ha=ge.luaL_checkany,La=ge.luaL_checkoption,z=ge.luaL_checkstack,je=ge.luaL_checkudata,Ke=ge.luaL_error,i=ge.luaL_getmetafield,$=ge.luaL_newlib,ke=ge.luaL_newmetatable,Qe=ge.luaL_requiref,sa=ge.luaL_setfuncs,xa=ge.luaL_setmetatable,Ma=ge.luaL_testudata,_a=ge.luaL_tolstring,Ua=b.luaopen_base,Ra,Va,h,ce=typeof window<"u"?window:typeof WorkerGlobalScope<"u"&&self instanceof WorkerGlobalScope?self:(0,eval)("this");if(typeof Reflect<"u")Ra=Reflect.apply,Va=Reflect.construct,h=Reflect.deleteProperty;else{var Se=Function.apply,Ee=Function.bind;Ra=function(v,ie,Ie){return Se.call(v,ie,Ie)},Va=function(v,ie){switch(ie.length){case 0:return new v;case 1:return new v(ie[0]);case 2:return new v(ie[0],ie[1]);case 3:return new v(ie[0],ie[1],ie[2]);case 4:return new v(ie[0],ie[1],ie[2],ie[3])}var Ie=[null];return Ie.push.apply(Ie,ie),new(Ee.apply(v,Ie))},h=Function("t","k","delete t[k]")}var xe=String.prototype.concat.bind(""),ee=function(v){return o(v)==="object"?v!==null:typeof v=="function"},ra=y("js object"),da=function(v,ie){var Ie=Ma(v,ie,ra);return Ie?Ie.data:void 0},Oa=function(v,ie){return je(v,ie,ra).data},Ea=function(v,ie){Oe(v).data=ie,xa(v,ra)},Ia=function(v){R(v,q,Ne);var ie=Je(v,-1);return Z(v,1),ie},pa=new WeakMap,a=function(v,ie){switch(o(ie)){case"undefined":C(v);break;case"number":T(v,ie);break;case"string":E(v,y(ie));break;case"boolean":de(v,ie);break;case"symbol":Ue(v,ie);break;case"function":if(G(ie,v)){ie(v);break}case"object":if(ie===null){if(_e(v,q,null)!==Pe)throw Error("js library not loaded into lua_State");break}default:var Ie=pa.get(Ia(v));if(!Ie)throw Error("js library not loaded into lua_State");var ta=Ie.get(ie);ta?ta(v):(Ea(v,ie),ta=F(v,-1),Ie.set(ie,ta))}},p=function(v){var ie=Ye(v,1);return a(v,ie),1},r=function(v,ie){switch(Ze(v,ie)){case Ge:case fe:return;case K:return U(v,ie);case Le:return Ye(v,ie);case te:return ve(v,ie);case ne:return S(v,ie);case Pe:var Ie=da(v,ie);if(Ie!==void 0)return Ie;case Q:case Y:case ea:default:return Ta(v,F(v,ie))}},n=function(v,ie){var Ie=me(v,ie,1,0),ta=r(v,-1);switch(Z(v,1),Ie){case pe:return ta;default:throw ta}},L=function(v,ie,Ie,ta,la){if(!ee(ta))throw new TypeError("`args` argument must be an object");var ua=+ta.length;ua>=0||(ua=0),z(v,2+ua,null);var Pa=j(v);ie(v),a(v,Ie);for(var za=0;za<ua;za++)a(v,ta[za]);switch(me(v,1+ua,la,0)){case pe:for(var Xa=j(v)-Pa,ja=new Array(Xa),Ka=0;Ka<Xa;Ka++)ja[Ka]=r(v,Pa+Ka+1);return va(v,Pa),ja;default:var Ga=r(v,-1);throw va(v,Pa),Ga}},l=function(v){return w(v,1),1},_=function(v,ie,Ie){return z(v,3,null),We(v,l),ie(v),a(v,Ie),n(v,2)},B=function(v,ie,Ie){switch(z(v,3,null),We(v,l),ie(v),a(v,Ie),me(v,2,1,0)){case pe:var ta=I(v,-1);return Z(v,1),!ta;default:var la=r(v,-1);throw Z(v,1),la}},A=function(v,ie,Ie,ta){switch(z(v,4,null),We(v,function(ua){return fa(ua,1),0}),ie(v),a(v,Ie),a(v,ta),me(v,3,0,0)){case pe:return;default:var la=r(v,-1);throw Z(v,1),la}},M=function(v,ie,Ie){switch(z(v,4,null),We(v,function(la){return fa(la,1),0}),ie(v),a(v,Ie),C(v),me(v,3,0,0)){case pe:return;default:var ta=r(v,-1);throw Z(v,1),ta}},ue=function(v,ie){return z(v,2,null),We(v,function(Ie){return _a(Ie,1),1}),ie(v),n(v,1)},oe=function(){var v=this.L;z(v,3,null);var ie=j(v);switch(this.iter(v),this.state(v),this.last(v),me(v,2,N,0)){case pe:var Ie;if(this.last=F(v,ie+1),I(v,-1))Ie={done:!0,value:void 0};else{for(var ta=j(v)-ie,la=new Array(ta),ua=0;ua<ta;ua++)la[ua]=r(v,ie+ua+1);Ie={done:!1,value:la}}return va(v,ie),Ie;default:var Pa=r(v,-1);throw Z(v,1),Pa}},Ta=function(v,ie){var Ie=Ia(v),ta=function(){return L(Ie,ie,this,arguments,1)[0]};ta.apply=function(ua,Pa){return L(Ie,ie,ua,Pa,1)[0]},ta.invoke=function(ua,Pa){return L(Ie,ie,ua,Pa,N)},ta.get=function(ua){return _(Ie,ie,ua)},ta.has=function(ua){return B(Ie,ie,ua)},ta.set=function(ua,Pa){return A(Ie,ie,ua,Pa)},ta.delete=function(ua){return M(Ie,ie,ua)},ta.toString=function(){return ue(Ie,ie)},typeof Symbol=="function"&&(ta[Symbol.toStringTag]="Fengari object",ta[Symbol.iterator]=function(){return(function(ua,Pa){switch(z(ua,1,null),We(ua,function(Ga){return Qe(Ga,y("_G"),Ua,0),aa(Ga,-1,y("pairs")),Pa(Ga),De(Ga,1,3),3}),me(ua,0,3,0)){case pe:var za=F(ua,-3),Xa=F(ua,-2),ja=F(ua,-1);return Z(ua,3),{L:ua,iter:za,state:Xa,last:ja,next:oe};default:var Ka=r(ua,-1);throw Z(ua,1),Ka}})(Ie,ie)},Symbol.toPrimitive&&(ta[Symbol.toPrimitive]=function(ua){if(ua==="string")return ue(Ie,ie)}));var la=pa.get(Ie);if(!la)throw Error("js library not loaded into lua_State");return la.set(ta,ie),ta},Ve={new:function(v){for(var ie=r(v,1),Ie=j(v)-1,ta=new Array(Ie),la=0;la<Ie;la++)ta[la]=r(v,la+2);return a(v,Va(ie,ta)),1},tonumber:function(v){var ie=r(v,1);return T(v,+ie),1},tostring:function(v){var ie=r(v,1);return P(v,xe(ie)),1},instanceof:function(v){var ie=r(v,1),Ie=r(v,2);return de(v,ie instanceof Ie),1},typeof:function v(ie){var Ie=r(ie,1);return P(ie,v(Ie)),1}};if(typeof Symbol=="function"&&Symbol.iterator){var H=function(v){var ie=r(v,1).next();return ie.done?0:(a(v,ie.value),1)};Ve.of=function(v){var ie=(function(Ie,ta){var la=Oa(Ie,ta),ua=la[Symbol.iterator];ua||he(Ie,ta,y("object not iterable"));var Pa=Ra(ua,la,[]);return ee(Pa)||he(Ie,ta,y("Result of the Symbol.iterator method is not an object")),Pa})(v,1);return We(v,H),a(v,ie),2}}if(typeof Proxy=="function"&&typeof Symbol=="function"){var Ae=Symbol("lua_State"),He=Symbol("fengari-proxy"),$e={apply:function(v,ie,Ie){return L(v[Ae],v[He],ie,Ie,1)[0]},construct:function(v,ie){var Ie=v[Ae],ta=v[He],la=ie.length;z(Ie,2+la,null),ta(Ie);var ua=j(Ie);if(i(Ie,ua,y("construct"))===fe)throw Z(Ie,1),new TypeError("not a constructor");na(Ie,ua,1);for(var Pa=0;Pa<la;Pa++)a(Ie,ie[Pa]);return n(Ie,1+la)},defineProperty:function(v,ie,Ie){var ta=v[Ae],la=v[He];return z(ta,4,null),la(ta),i(ta,-1,y("defineProperty"))===fe?(Z(ta,1),!1):(na(ta,-2,1),a(ta,ie),a(ta,Ie),n(ta,3))},deleteProperty:function(v,ie){return M(v[Ae],v[He],ie)},get:function(v,ie){return _(v[Ae],v[He],ie)},getOwnPropertyDescriptor:function(v,ie){var Ie=v[Ae],ta=v[He];if(z(Ie,3,null),ta(Ie),i(Ie,-1,y("getOwnPropertyDescriptor"))!==fe)return na(Ie,-2,1),a(Ie,ie),n(Ie,2);Z(Ie,1)},getPrototypeOf:function(v){var ie=v[Ae],Ie=v[He];return z(ie,2,null),Ie(ie),i(ie,-1,y("getPrototypeOf"))===fe?(Z(ie,1),null):(na(ie,-2,1),n(ie,1))},has:function(v,ie){return B(v[Ae],v[He],ie)},ownKeys:function(v){var ie=v[Ae],Ie=v[He];if(z(ie,2,null),Ie(ie),i(ie,-1,y("ownKeys"))===fe)throw Z(ie,1),Error("ownKeys unknown for fengari object");return na(ie,-2,1),n(ie,1)},set:function(v,ie,Ie){return A(v[Ae],v[He],ie,Ie),!0},setPrototypeOf:function(v,ie){var Ie=v[Ae],ta=v[He];return z(Ie,3,null),ta(Ie),i(Ie,-1,y("setPrototypeOf"))===fe?(Z(Ie,1),!1):(na(Ie,-2,1),a(Ie,ie),n(Ie,2))}},ka=Function("return ()=>void 0;"),Sa=function(v,ie,Ie){var ta,la=Ia(v);switch(Ie){case"function":ta=(function(){var ua=(function(){}).bind();return delete ua.length,delete ua.name,ua})();break;case"arrow_function":ta=(function(){var ua=ka();return delete ua.length,delete ua.name,ua})();break;case"object":ta={};break;default:throw TypeError("invalid type to createproxy")}return ta[He]=ie,ta[Ae]=la,new Proxy(ta,$e)},wa=["function","arrow_function","object"],Fa=wa.map(function(v){return y(v)});Ve.createproxy=function(v){ha(v,1);var ie=wa[La(v,2,Fa[0],Fa)],Ie=Sa(v,F(v,1),ie);return a(v,Ie),1}}var Qa={__index:function(v){var ie=Oa(v,1),Ie=r(v,2);return a(v,ie[Ie]),1},__newindex:function(v){var ie=Oa(v,1),Ie=r(v,2),ta=r(v,3);return ta===void 0?h(ie,Ie):ie[Ie]=ta,0},__tostring:function(v){var ie=Oa(v,1),Ie=xe(ie);return E(v,y(Ie)),1},__call:function(v){var ie,Ie=Oa(v,1),ta=j(v)-1,la=new Array(Math.max(0,ta-1));if(ta>0&&(ie=r(v,2),ta-- >0))for(var ua=0;ua<ta;ua++)la[ua]=r(v,ua+3);return a(v,Ra(Ie,ie,la)),1},__pairs:function(v){var ie,Ie,ta,la,ua=Oa(v,1);if(typeof Symbol!="function"||(ie=ua[Symbol.for("__pairs")])===void 0)Ie=function(za){if(!(this.index>=this.keys.length)){var Xa=this.keys[this.index++];return[Xa,this.object[Xa]]}},ta={object:ua,keys:Object.keys(ua),index:0};else{var Pa=Ra(ie,ua,[]);Pa===void 0&&Ke(v,y("bad '__pairs' result (object with keys 'iter', 'state', 'first' expected)")),(Ie=Pa.iter)===void 0&&Ke(v,y("bad '__pairs' result (object.iter is missing)")),ta=Pa.state,la=Pa.first}return We(v,function(){var za=r(v,1),Xa=r(v,2),ja=Ra(Ie,za,[Xa]);if(ja===void 0)return 0;Array.isArray(ja)||Ke(v,y("bad iterator result (Array or undefined expected)")),z(v,ja.length,null);for(var Ka=0;Ka<ja.length;Ka++)a(v,ja[Ka]);return ja.length}),a(v,ta),a(v,la),3},__len:function(v){var ie,Ie,ta=Oa(v,1);return Ie=typeof Symbol!="function"||(ie=ta[Symbol.for("__len")])===void 0?ta.length:Ra(ie,ta,[]),a(v,Ie),1}};e.exports.FENGARI_INTEROP_VERSION="0.1",e.exports.FENGARI_INTEROP_VERSION_NUM=1,e.exports.FENGARI_INTEROP_RELEASE="0.1.2",e.exports.checkjs=Oa,e.exports.testjs=da,e.exports.pushjs=Ea,e.exports.push=a,e.exports.tojs=r,e.exports.luaopen_js=function(v){return pa.set(Ia(v),new WeakMap),Xe(v,p),$(v,Ve),P(v,"0.1"),qe(v,-2,y("_VERSION")),se(v,1),qe(v,-2,y("_VERSION_NUM")),P(v,"0.1.2"),qe(v,-2,y("_RELEASE")),ke(v,ra),sa(v,Qa,0),Z(v,1),Ea(v,null),X(v,-1),Te(v,q,null),qe(v,-2,y("null")),a(v,ce),qe(v,-2,y("global")),1}},function(e,ga,d){var o=d(1),s=o.LUA_MULTRET,m=o.LUA_OPBNOT,ge=o.LUA_OPEQ,b=o.LUA_OPLE,y=o.LUA_OPLT,N=o.LUA_OPUNM,pe=o.LUA_REGISTRYINDEX,q=o.LUA_RIDX_GLOBALS,Ne=o.LUA_VERSION_NUM,K=o.constant_types,Y=K.LUA_NUMTAGS,Le=K.LUA_TBOOLEAN,fe=K.LUA_TCCL,Ge=K.LUA_TFUNCTION,te=K.LUA_TLCF,ne=K.LUA_TLCL,Q=K.LUA_TLIGHTUSERDATA,ea=K.LUA_TLNGSTR,Pe=K.LUA_TNIL,Xe=K.LUA_TNONE,De=K.LUA_TNUMFLT,aa=K.LUA_TNUMINT,w=K.LUA_TSHRSTR,j=K.LUA_TTABLE,I=K.LUA_TTHREAD,G=K.LUA_TUSERDATA,Oe=o.thread_status.LUA_OK,me=o.from_userstring,Z=o.to_luastring,de=d(4).api_check,We=d(11),se=d(8),Ue=d(37).luaU_dump,P=d(13),C=d(6),T=d(12),E=d(10),X=E.luaS_bless,R=E.luaS_new,_e=E.luaS_newliteral,Te=d(14),na=d(3).LUAI_MAXSTACK,qe=d(15),fa=d(9),va=d(20).ZIO,U=C.TValue,S=C.CClosure,ve=function(a){a.top++,de(a,a.top<=a.ci.top,"stack overflow")},F=function(a,p){de(a,p<a.top-a.ci.funcOff,"not enough elements in the stack")},Je=function(a){if(!a)throw TypeError("invalid argument")},Ye=function(a){Je(typeof a=="number"&&(0|a)===a)},Ze=function(a){return a!==C.luaO_nilobject},he=function(a,p){var r=a.ci;if(p>0){var n=r.funcOff+p;return de(a,p<=r.top-(r.funcOff+1),"unacceptable index"),n>=a.top?C.luaO_nilobject:a.stack[n]}return p>pe?(de(a,p!==0&&-p<=a.top,"invalid index"),a.stack[a.top+p]):p===pe?a.l_G.l_registry:(de(a,(p=pe-p)<=P.MAXUPVAL+1,"upvalue index too large"),r.func.ttislcf()?C.luaO_nilobject:p<=r.func.value.nupvalues?r.func.value.upvalue[p-1]:C.luaO_nilobject)},ha=function(a,p){var r=a.ci;if(p>0){var n=r.funcOff+p;return de(a,p<=r.top-(r.funcOff+1),"unacceptable index"),n>=a.top?null:n}if(p>pe)return de(a,p!==0&&-p<=a.top,"invalid index"),a.top+p;throw Error("attempt to use pseudo-index")},La=function(a,p){var r,n=a.ci.funcOff;p>=0?(de(a,p<=a.stack_last-(n+1),"new top too large"),r=n+1+p):(de(a,-(p+1)<=a.top-(n+1),"invalid new top"),r=a.top+p+1),se.adjust_top(a,r)},z=function(a,p){La(a,-p-1)},je=function(a,p,r){for(;p<r;p++,r--){var n=a.stack[p],L=new U(n.type,n.value);C.setobjs2s(a,p,r),C.setobj2s(a,r,L)}},Ke=function(a,p,r){var n=a.top-1,L=ha(a,p),l=a.stack[L];de(a,Ze(l)&&p>pe,"index not in the stack"),de(a,(r>=0?r:-r)<=n-L+1,"invalid 'n'");var _=r>=0?n-r:L-r-1;je(a,L,_),je(a,_+1,a.top-1),je(a,L,a.top-1)},i=function(a,p,r){var n=he(a,p);he(a,r).setfrom(n)},$=function(a,p,r){if(Je(typeof p=="function"),Ye(r),r===0)a.stack[a.top]=new U(te,p);else{F(a,r),de(a,r<=P.MAXUPVAL,"upvalue index too large");for(var n=new S(a,p,r),L=0;L<r;L++)n.upvalue[L].setfrom(a.stack[a.top-r+L]);for(var l=1;l<r;l++)delete a.stack[--a.top];r>0&&--a.top,a.stack[a.top].setclCvalue(n)}ve(a)},ke=$,Qe=function(a,p){$(a,p,0)},sa=Qe,xa=function(a,p,r){var n=R(a,me(r));F(a,1),C.pushsvalue2s(a,n),de(a,a.top<=a.ci.top,"stack overflow"),qe.settable(a,p,a.stack[a.top-1],a.stack[a.top-2]),delete a.stack[--a.top],delete a.stack[--a.top]},Ma=function(a,p){xa(a,fa.luaH_getint(a.l_G.l_registry.value,q),p)},_a=function(a,p,r){var n=R(a,me(r));return C.pushsvalue2s(a,n),de(a,a.top<=a.ci.top,"stack overflow"),qe.luaV_gettable(a,p,a.stack[a.top-1],a.top-1),a.stack[a.top-1].ttnov()},Ua=function(a,p,r){var n=he(a,p);return Ye(r),de(a,n.ttistable(),"table expected"),C.pushobj2s(a,fa.luaH_getint(n.value,r)),de(a,a.top<=a.ci.top,"stack overflow"),a.stack[a.top-1].ttnov()},Ra=function(a,p,r){var n=new C.TValue(j,fa.luaH_new(a));a.stack[a.top]=n,ve(a)},Va=function(a,p,r){switch(Ye(r),p.ttype()){case fe:var n=p.value;return 1<=r&&r<=n.nupvalues?{name:Z("",!0),val:n.upvalue[r-1]}:null;case ne:var L=p.value,l=L.p;if(!(1<=r&&r<=l.upvalues.length))return null;var _=l.upvalues[r-1].name;return{name:_?_.getstr():Z("(*no name)",!0),val:L.upvals[r-1]};default:return null}},h=function(a,p){var r=he(a,p);if(!r.ttisstring()){if(!qe.cvt2str(r))return null;C.luaO_tostring(a,r)}return r.svalue()},ce=h,Se=function(a,p){return qe.tointeger(he(a,p))},Ee=function(a,p){return qe.tonumber(he(a,p))},xe=new WeakMap,ee=function(a,p){se.luaD_callnoyield(a,p.funcOff,p.nresults)},ra=function(a,p){var r=he(a,p);return Ze(r)?r.ttnov():Xe},da=Z("?"),Oa=function(a,p,r){de(a,r===s||a.ci.top-a.top>=r-p,"results from function overflow current stack size")},Ea=function(a,p,r,n,L){de(a,L===null||!(a.ci.callstatus&T.CIST_LUA),"cannot use continuations inside hooks"),F(a,p+1),de(a,a.status===Oe,"cannot do calls on non-normal thread"),Oa(a,p,r);var l=a.top-(p+1);L!==null&&a.nny===0?(a.ci.c_k=L,a.ci.c_ctx=n,se.luaD_call(a,l,r)):se.luaD_callnoyield(a,l,r),r===s&&a.ci.top<a.top&&(a.ci.top=a.top)},Ia=function(a,p,r,n,L,l){var _,B;de(a,l===null||!(a.ci.callstatus&T.CIST_LUA),"cannot use continuations inside hooks"),F(a,p+1),de(a,a.status===Oe,"cannot do calls on non-normal thread"),Oa(a,p,r),B=n===0?0:ha(a,n);var A=a.top-(p+1);if(l===null||a.nny>0){var M={funcOff:A,nresults:r};_=se.luaD_pcall(a,ee,M,A,B)}else{var ue=a.ci;ue.c_k=l,ue.c_ctx=L,ue.extra=A,ue.c_old_errfunc=a.errfunc,a.errfunc=B,ue.callstatus&=~T.CIST_OAH|a.allowhook,ue.callstatus|=T.CIST_YPCALL,se.luaD_call(a,A,r),ue.callstatus&=~T.CIST_YPCALL,a.errfunc=ue.c_old_errfunc,_=Oe}return r===s&&a.ci.top<a.top&&(a.ci.top=a.top),_},pa=function(a,p,r){var n=he(a,p);de(a,n.ttisLclosure(),"Lua function expected");var L=n.value;return Ye(r),de(a,1<=r&&r<=L.p.upvalues.length,"invalid upvalue index"),{f:L,i:r-1}};e.exports.api_incr_top=ve,e.exports.api_checknelems=F,e.exports.lua_absindex=function(a,p){return p>0||p<=pe?p:a.top-a.ci.funcOff+p},e.exports.lua_arith=function(a,p){p!==N&&p!==m?F(a,2):(F(a,1),C.pushobj2s(a,a.stack[a.top-1]),de(a,a.top<=a.ci.top,"stack overflow")),C.luaO_arith(a,p,a.stack[a.top-2],a.stack[a.top-1],a.stack[a.top-2]),delete a.stack[--a.top]},e.exports.lua_atpanic=function(a,p){var r=a.l_G.panic;return a.l_G.panic=p,r},e.exports.lua_atnativeerror=function(a,p){var r=a.l_G.atnativeerror;return a.l_G.atnativeerror=p,r},e.exports.lua_call=function(a,p,r){Ea(a,p,r,0,null)},e.exports.lua_callk=Ea,e.exports.lua_checkstack=function(a,p){var r,n=a.ci;return de(a,p>=0,"negative 'n'"),a.stack_last-a.top>p?r=!0:a.top+T.EXTRA_STACK>na-p?r=!1:(se.luaD_growstack(a,p),r=!0),r&&n.top<a.top+p&&(n.top=a.top+p),r},e.exports.lua_compare=function(a,p,r,n){var L=he(a,p),l=he(a,r),_=0;if(Ze(L)&&Ze(l))switch(n){case ge:_=qe.luaV_equalobj(a,L,l);break;case y:_=qe.luaV_lessthan(a,L,l);break;case b:_=qe.luaV_lessequal(a,L,l);break;default:de(a,!1,"invalid option")}return _},e.exports.lua_concat=function(a,p){F(a,p),p>=2?qe.luaV_concat(a,p):p===0&&(C.pushsvalue2s(a,X(a,Z("",!0))),de(a,a.top<=a.ci.top,"stack overflow"))},e.exports.lua_copy=i,e.exports.lua_createtable=Ra,e.exports.lua_dump=function(a,p,r,n){F(a,1);var L=a.stack[a.top-1];return L.ttisLclosure()?Ue(a,L.value.p,p,r,n):1},e.exports.lua_error=function(a){F(a,1),We.luaG_errormsg(a)},e.exports.lua_gc=function(){},e.exports.lua_getallocf=function(){return console.warn("lua_getallocf is not available"),0},e.exports.lua_getextraspace=function(){return console.warn("lua_getextraspace is not available"),0},e.exports.lua_getfield=function(a,p,r){return _a(a,he(a,p),r)},e.exports.lua_getglobal=function(a,p){return _a(a,fa.luaH_getint(a.l_G.l_registry.value,q),p)},e.exports.lua_geti=function(a,p,r){var n=he(a,p);return Ye(r),a.stack[a.top]=new U(aa,r),ve(a),qe.luaV_gettable(a,n,a.stack[a.top-1],a.top-1),a.stack[a.top-1].ttnov()},e.exports.lua_getmetatable=function(a,p){var r,n=he(a,p),L=!1;switch(n.ttnov()){case j:case G:r=n.value.metatable;break;default:r=a.l_G.mt[n.ttnov()]}return r!=null&&(a.stack[a.top]=new U(j,r),ve(a),L=!0),L},e.exports.lua_gettable=function(a,p){var r=he(a,p);return qe.luaV_gettable(a,r,a.stack[a.top-1],a.top-1),a.stack[a.top-1].ttnov()},e.exports.lua_gettop=function(a){return a.top-(a.ci.funcOff+1)},e.exports.lua_getupvalue=function(a,p,r){var n=Va(0,he(a,p),r);if(n){var L=n.name,l=n.val;return C.pushobj2s(a,l),de(a,a.top<=a.ci.top,"stack overflow"),L}return null},e.exports.lua_getuservalue=function(a,p){var r=he(a,p);de(a,r.ttisfulluserdata(),"full userdata expected");var n=r.value.uservalue;return a.stack[a.top]=new U(n.type,n.value),ve(a),a.stack[a.top-1].ttnov()},e.exports.lua_insert=function(a,p){Ke(a,p,1)},e.exports.lua_isboolean=function(a,p){return ra(a,p)===Le},e.exports.lua_iscfunction=function(a,p){var r=he(a,p);return r.ttislcf(r)||r.ttisCclosure()},e.exports.lua_isfunction=function(a,p){return ra(a,p)===Ge},e.exports.lua_isinteger=function(a,p){return he(a,p).ttisinteger()},e.exports.lua_islightuserdata=function(a,p){return ra(a,p)===Q},e.exports.lua_isnil=function(a,p){return ra(a,p)===Pe},e.exports.lua_isnone=function(a,p){return ra(a,p)===Xe},e.exports.lua_isnoneornil=function(a,p){return ra(a,p)<=0},e.exports.lua_isnumber=function(a,p){return qe.tonumber(he(a,p))!==!1},e.exports.lua_isproxy=function(a,p){var r=xe.get(a);return!!r&&(p===null||p.l_G===r)},e.exports.lua_isstring=function(a,p){var r=he(a,p);return r.ttisstring()||qe.cvt2str(r)},e.exports.lua_istable=function(a,p){return he(a,p).ttistable()},e.exports.lua_isthread=function(a,p){return ra(a,p)===I},e.exports.lua_isuserdata=function(a,p){var r=he(a,p);return r.ttisfulluserdata(r)||r.ttislightuserdata()},e.exports.lua_len=function(a,p){var r=he(a,p),n=new U;qe.luaV_objlen(a,n,r),a.stack[a.top]=n,ve(a)},e.exports.lua_load=function(a,p,r,n,L){n=n?me(n):da,L!==null&&(L=me(L));var l=new va(a,p,r),_=se.luaD_protectedparser(a,l,n,L);if(_===Oe){var B=a.stack[a.top-1].value;if(B.nupvalues>=1){var A=fa.luaH_getint(a.l_G.l_registry.value,q);B.upvals[0].setfrom(A)}}return _},e.exports.lua_newtable=function(a){Ra(a)},e.exports.lua_newuserdata=function(a,p){var r=(function(n,L){return new C.Udata(n,L)})(a,p);return a.stack[a.top]=new C.TValue(G,r),ve(a),r.data},e.exports.lua_next=function(a,p){var r=he(a,p);return de(a,r.ttistable(),"table expected"),a.stack[a.top]=new U,fa.luaH_next(a,r.value,a.top-1)?(ve(a),1):(delete a.stack[a.top],delete a.stack[--a.top],0)},e.exports.lua_pcall=function(a,p,r,n){return Ia(a,p,r,n,0,null)},e.exports.lua_pcallk=Ia,e.exports.lua_pop=z,e.exports.lua_pushboolean=function(a,p){a.stack[a.top]=new U(Le,!!p),ve(a)},e.exports.lua_pushcclosure=$,e.exports.lua_pushcfunction=Qe,e.exports.lua_pushfstring=function(a,p){p=me(p);for(var r=arguments.length,n=new Array(r>2?r-2:0),L=2;L<r;L++)n[L-2]=arguments[L];return C.luaO_pushvfstring(a,p,n)},e.exports.lua_pushglobaltable=function(a){Ua(a,pe,q)},e.exports.lua_pushinteger=function(a,p){Ye(p),a.stack[a.top]=new U(aa,p),ve(a)},e.exports.lua_pushjsclosure=ke,e.exports.lua_pushjsfunction=sa,e.exports.lua_pushlightuserdata=function(a,p){a.stack[a.top]=new U(Q,p),ve(a)},e.exports.lua_pushliteral=function(a,p){if(p==null)a.stack[a.top]=new U(Pe,null),a.top++;else{Je(typeof p=="string");var r=_e(a,p);C.pushsvalue2s(a,r),p=r.getstr()}return de(a,a.top<=a.ci.top,"stack overflow"),p},e.exports.lua_pushlstring=function(a,p,r){var n;return Ye(r),r===0?(p=Z("",!0),n=X(a,p)):(p=me(p),de(a,p.length>=r,"invalid length to lua_pushlstring"),n=R(a,p.subarray(0,r))),C.pushsvalue2s(a,n),de(a,a.top<=a.ci.top,"stack overflow"),n.value},e.exports.lua_pushnil=function(a){a.stack[a.top]=new U(Pe,null),ve(a)},e.exports.lua_pushnumber=function(a,p){Je(typeof p=="number"),a.stack[a.top]=new U(De,p),ve(a)},e.exports.lua_pushstring=function(a,p){if(p==null)a.stack[a.top]=new U(Pe,null),a.top++;else{var r=R(a,me(p));C.pushsvalue2s(a,r),p=r.getstr()}return de(a,a.top<=a.ci.top,"stack overflow"),p},e.exports.lua_pushthread=function(a){return a.stack[a.top]=new U(I,a),ve(a),a.l_G.mainthread===a},e.exports.lua_pushvalue=function(a,p){C.pushobj2s(a,he(a,p)),de(a,a.top<=a.ci.top,"stack overflow")},e.exports.lua_pushvfstring=function(a,p,r){return p=me(p),C.luaO_pushvfstring(a,p,r)},e.exports.lua_rawequal=function(a,p,r){var n=he(a,p),L=he(a,r);return Ze(n)&&Ze(L)?qe.luaV_equalobj(null,n,L):0},e.exports.lua_rawget=function(a,p){var r=he(a,p);return de(a,r.ttistable(r),"table expected"),C.setobj2s(a,a.top-1,fa.luaH_get(a,r.value,a.stack[a.top-1])),a.stack[a.top-1].ttnov()},e.exports.lua_rawgeti=Ua,e.exports.lua_rawgetp=function(a,p,r){var n=he(a,p);de(a,n.ttistable(),"table expected");var L=new U(Q,r);return C.pushobj2s(a,fa.luaH_get(a,n.value,L)),de(a,a.top<=a.ci.top,"stack overflow"),a.stack[a.top-1].ttnov()},e.exports.lua_rawlen=function(a,p){var r=he(a,p);switch(r.ttype()){case w:case ea:return r.vslen();case G:return r.value.len;case j:return fa.luaH_getn(r.value);default:return 0}},e.exports.lua_rawset=function(a,p){F(a,2);var r=he(a,p);de(a,r.ttistable(),"table expected");var n=a.stack[a.top-2],L=a.stack[a.top-1];fa.luaH_setfrom(a,r.value,n,L),fa.invalidateTMcache(r.value),delete a.stack[--a.top],delete a.stack[--a.top]},e.exports.lua_rawseti=function(a,p,r){Ye(r),F(a,1);var n=he(a,p);de(a,n.ttistable(),"table expected"),fa.luaH_setint(n.value,r,a.stack[a.top-1]),delete a.stack[--a.top]},e.exports.lua_rawsetp=function(a,p,r){F(a,1);var n=he(a,p);de(a,n.ttistable(),"table expected");var L=new U(Q,r),l=a.stack[a.top-1];fa.luaH_setfrom(a,n.value,L,l),delete a.stack[--a.top]},e.exports.lua_register=function(a,p,r){Qe(a,r),Ma(a,p)},e.exports.lua_remove=function(a,p){Ke(a,p,-1),z(a,1)},e.exports.lua_replace=function(a,p){i(a,-1,p),z(a,1)},e.exports.lua_rotate=Ke,e.exports.lua_setallocf=function(){return console.warn("lua_setallocf is not available"),0},e.exports.lua_setfield=function(a,p,r){xa(a,he(a,p),r)},e.exports.lua_setglobal=Ma,e.exports.lua_seti=function(a,p,r){Ye(r),F(a,1);var n=he(a,p);a.stack[a.top]=new U(aa,r),ve(a),qe.settable(a,n,a.stack[a.top-1],a.stack[a.top-2]),delete a.stack[--a.top],delete a.stack[--a.top]},e.exports.lua_setmetatable=function(a,p){var r;F(a,1);var n=he(a,p);switch(a.stack[a.top-1].ttisnil()?r=null:(de(a,a.stack[a.top-1].ttistable(),"table expected"),r=a.stack[a.top-1].value),n.ttnov()){case G:case j:n.value.metatable=r;break;default:a.l_G.mt[n.ttnov()]=r}return delete a.stack[--a.top],!0},e.exports.lua_settable=function(a,p){F(a,2);var r=he(a,p);qe.settable(a,r,a.stack[a.top-2],a.stack[a.top-1]),delete a.stack[--a.top],delete a.stack[--a.top]},e.exports.lua_settop=La,e.exports.lua_setupvalue=function(a,p,r){var n=he(a,p);F(a,1);var L=Va(0,n,r);if(L){var l=L.name;return L.val.setfrom(a.stack[a.top-1]),delete a.stack[--a.top],l}return null},e.exports.lua_setuservalue=function(a,p){F(a,1);var r=he(a,p);de(a,r.ttisfulluserdata(),"full userdata expected"),r.value.uservalue.setfrom(a.stack[a.top-1]),delete a.stack[--a.top]},e.exports.lua_status=function(a){return a.status},e.exports.lua_stringtonumber=function(a,p){var r=new U,n=C.luaO_str2num(p,r);return n!==0&&(a.stack[a.top]=r,ve(a)),n},e.exports.lua_toboolean=function(a,p){return!he(a,p).l_isfalse()},e.exports.lua_tocfunction=function(a,p){var r=he(a,p);return r.ttislcf()||r.ttisCclosure()?r.value:null},e.exports.lua_todataview=function(a,p){var r=h(a,p);return new DataView(r.buffer,r.byteOffset,r.byteLength)},e.exports.lua_tointeger=function(a,p){var r=Se(a,p);return r===!1?0:r},e.exports.lua_tointegerx=Se,e.exports.lua_tojsstring=function(a,p){var r=he(a,p);if(!r.ttisstring()){if(!qe.cvt2str(r))return null;C.luaO_tostring(a,r)}return r.jsstring()},e.exports.lua_tolstring=h,e.exports.lua_tonumber=function(a,p){var r=Ee(a,p);return r===!1?0:r},e.exports.lua_tonumberx=Ee,e.exports.lua_topointer=function(a,p){var r=he(a,p);switch(r.ttype()){case j:case ne:case fe:case te:case I:case G:case Q:return r.value;default:return null}},e.exports.lua_toproxy=function(a,p){var r=he(a,p);return(function(n,L,l){var _=function(B){de(B,B instanceof T.lua_State&&n===B.l_G,"must be from same global state"),B.stack[B.top]=new U(L,l),ve(B)};return xe.set(_,n),_})(a.l_G,r.type,r.value)},e.exports.lua_tostring=ce,e.exports.lua_tothread=function(a,p){var r=he(a,p);return r.ttisthread()?r.value:null},e.exports.lua_touserdata=function(a,p){var r=he(a,p);switch(r.ttnov()){case G:return r.value.data;case Q:return r.value;default:return null}},e.exports.lua_type=ra,e.exports.lua_typename=function(a,p){return de(a,Xe<=p&&p<Y,"invalid tag"),Te.ttypename(p)},e.exports.lua_upvalueid=function(a,p,r){var n=he(a,p);switch(n.ttype()){case ne:var L=pa(a,p,r);return L.f.upvals[L.i];case fe:var l=n.value;return de(a,(0|r)===r&&r>0&&r<=l.nupvalues,"invalid upvalue index"),l.upvalue[r-1];default:return de(a,!1,"closure expected"),null}},e.exports.lua_upvaluejoin=function(a,p,r,n,L){var l=pa(a,p,r),_=pa(a,n,L),B=_.f.upvals[_.i];l.f.upvals[l.i]=B},e.exports.lua_version=function(a){return a===null?Ne:a.l_G.version},e.exports.lua_xmove=function(a,p,r){if(a!==p){F(a,r),de(a,a.l_G===p.l_G,"moving among independent states"),de(a,p.ci.top-p.top>=r,"stack overflow"),a.top-=r;for(var n=0;n<r;n++)p.stack[p.top]=new C.TValue,C.setobj2s(p,p.top,a.stack[a.top+n]),delete a.stack[a.top+n],p.top++}}},function(e,ga,d){function o(y,N){for(var pe=0;pe<N.length;pe++){var q=N[pe];q.enumerable=q.enumerable||!1,q.configurable=!0,"value"in q&&(q.writable=!0),Object.defineProperty(y,q.key,q)}}function s(y,N){if(!(y instanceof N))throw new TypeError("Cannot call a class as a function")}var m=d(4).lua_assert,ge=(function(){function y(N,pe,q){s(this,y),this.L=N,m(typeof pe=="function","ZIO requires a reader"),this.reader=pe,this.data=q,this.n=0,this.buffer=null,this.off=0}return(function(N,pe,q){pe&&o(N.prototype,pe)})(y,[{key:"zgetc",value:function(){return this.n-- >0?this.buffer[this.off++]:b(this)}}]),y})(),b=function(y){var N=y.reader(y.L,y.data);if(N===null)return-1;m(N instanceof Uint8Array,"Should only load binary of array of bytes");var pe=N.length;return pe===0?-1:(y.buffer=N,y.off=0,y.n=pe-1,y.buffer[y.off++])};e.exports.EOZ=-1,e.exports.luaZ_buffer=function(y){return y.buffer.subarray(0,y.n)},e.exports.luaZ_buffremove=function(y,N){y.n-=N},e.exports.luaZ_fill=b,e.exports.luaZ_read=function(y,N,pe,q){for(;q;){if(y.n===0){if(b(y)===-1)return q;y.n++,y.off--}for(var Ne=q<=y.n?q:y.n,K=0;K<Ne;K++)N[pe++]=y.buffer[y.off++];y.n-=Ne,y.n===0&&(y.buffer=null),q-=Ne}return 0},e.exports.luaZ_resetbuffer=function(y){y.n=0},e.exports.luaZ_resizebuffer=function(y,N,pe){var q=new Uint8Array(pe);N.buffer&&q.set(N.buffer),N.buffer=q},e.exports.MBuffer=function y(){s(this,y),this.buffer=null,this.n=0},e.exports.ZIO=ge},function(e,ga,d){function o(i,$){if(!(i instanceof $))throw new TypeError("Cannot call a class as a function")}var s=d(1),m=s.constant_types,ge=m.LUA_TBOOLEAN,b=m.LUA_TLNGSTR,y=s.thread_status.LUA_ERRSYNTAX,N=s.to_luastring,pe=d(4),q=pe.LUA_MINBUFFER,Ne=pe.MAX_INT,K=pe.lua_assert,Y=d(11),Le=d(8),fe=d(22),Ge=fe.lisdigit,te=fe.lislalnum,ne=fe.lislalpha,Q=fe.lisspace,ea=fe.lisxdigit,Pe=d(6),Xe=d(10),De=Xe.luaS_bless,aa=Xe.luaS_hash,w=Xe.luaS_hashlongstr,j=Xe.luaS_new,I=d(9),G=d(20),Oe=G.EOZ,me=G.luaZ_buffer,Z=G.luaZ_buffremove,de=G.luaZ_resetbuffer,We=G.luaZ_resizebuffer,se=N("_ENV",!0),Ue={TK_AND:257,TK_BREAK:258,TK_DO:259,TK_ELSE:260,TK_ELSEIF:261,TK_END:262,TK_FALSE:263,TK_FOR:264,TK_FUNCTION:265,TK_GOTO:266,TK_IF:267,TK_IN:268,TK_LOCAL:269,TK_NIL:270,TK_NOT:271,TK_OR:272,TK_REPEAT:273,TK_RETURN:274,TK_THEN:275,TK_TRUE:276,TK_UNTIL:277,TK_WHILE:278,TK_IDIV:279,TK_CONCAT:280,TK_DOTS:281,TK_EQ:282,TK_GE:283,TK_LE:284,TK_NE:285,TK_SHL:286,TK_SHR:287,TK_DBCOLON:288,TK_EOS:289,TK_FLT:290,TK_INT:291,TK_NAME:292,TK_STRING:293},P=["and","break","do","else","elseif","end","false","for","function","goto","if","in","local","nil","not","or","repeat","return","then","true","until","while","//","..","...","==",">=","<=","~=","<<",">>","::","<eof>","<number>","<integer>","<name>","<string>"].map(function(i,$){return N(i)}),C=function i(){o(this,i),this.r=NaN,this.i=NaN,this.ts=null},T=function i(){o(this,i),this.token=NaN,this.seminfo=new C},E=function(i,$){var ke=i.buff;if(ke.n+1>ke.buffer.length){ke.buffer.length>=Ne/2&&ve(i,N("lexical element too long",!0),0);var Qe=2*ke.buffer.length;We(i.L,ke,Qe)}ke.buffer[ke.n++]=$<0?255+$+1:$},X=function(i,$){if($<257)return Pe.luaO_pushfstring(i.L,N("'%c'",!0),$);var ke=P[$-257];return $<289?Pe.luaO_pushfstring(i.L,N("'%s'",!0),ke):ke},R=function(i){return i.current===10||i.current===13},_e=function(i){i.current=i.z.zgetc()},Te=function(i){E(i,i.current),_e(i)},na=new Pe.TValue(ge,!0),qe=function(i,$){var ke=i.L,Qe=j(ke,$),sa=i.h.strong.get(w(Qe));if(sa)Qe=sa.key.tsvalue();else{var xa=new Pe.TValue(b,Qe);I.luaH_setfrom(ke,i.h,xa,na)}return Qe},fa=function(i){var $=i.current;K(R(i)),_e(i),R(i)&&i.current!==$&&_e(i),++i.linenumber>=Ne&&ve(i,N("chunk has too many lines",!0),0)},va=function(i,$){return i.current===$&&(_e(i),!0)},U=function(i,$){return(i.current===$[0].charCodeAt(0)||i.current===$[1].charCodeAt(0))&&(Te(i),!0)},S=function(i,$){var ke="Ee",Qe=i.current;for(K(Ge(i.current)),Te(i),Qe===48&&U(i,"xX")&&(ke="Pp");;)if(U(i,ke)&&U(i,"-+"),ea(i.current))Te(i);else{if(i.current!==46)break;Te(i)}var sa=new Pe.TValue;return Pe.luaO_str2num(me(i.buff),sa)===0&&ve(i,N("malformed number",!0),290),sa.ttisinteger()?($.i=sa.value,291):(K(sa.ttisfloat()),$.r=sa.value,290)},ve=function(i,$,ke){$=Y.luaG_addinfo(i.L,$,i.source,i.linenumber),ke&&Pe.luaO_pushfstring(i.L,N("%s near %s"),$,(function(Qe,sa){switch(sa){case 292:case 293:case 290:case 291:return Pe.luaO_pushfstring(Qe.L,N("'%s'",!0),me(Qe.buff));default:return X(Qe,sa)}})(i,ke)),Le.luaD_throw(i.L,y)},F=function(i){var $=0,ke=i.current;for(K(ke===91||ke===93),Te(i);i.current===61;)Te(i),$++;return i.current===ke?$:-$-1},Je=function(i,$,ke){var Qe=i.linenumber;Te(i),R(i)&&fa(i);for(var sa=!1;!sa;)switch(i.current){case Oe:var xa="unfinished long ".concat($?"string":"comment"," (starting at line ").concat(Qe,")");ve(i,N(xa),289);break;case 93:F(i)===ke&&(Te(i),sa=!0);break;case 10:case 13:E(i,10),fa(i),$||de(i.buff);break;default:$?Te(i):_e(i)}$&&($.ts=qe(i,i.buff.buffer.subarray(2+ke,i.buff.n-(2+ke))))},Ye=function(i,$,ke){$||(i.current!==Oe&&Te(i),ve(i,ke,293))},Ze=function(i){return Te(i),Ye(i,ea(i.current),N("hexadecimal digit expected",!0)),Pe.luaO_hexavalue(i.current)},he=function(i){var $=Ze(i);return $=($<<4)+Ze(i),Z(i.buff,2),$},ha=function(i){for(var $=new Uint8Array(Pe.UTF8BUFFSZ),ke=Pe.luaO_utf8esc($,(function(Qe){var sa=4;Te(Qe),Ye(Qe,Qe.current===123,N("missing '{'",!0));var xa=Ze(Qe);for(Te(Qe);ea(Qe.current);)sa++,xa=(xa<<4)+Pe.luaO_hexavalue(Qe.current),Ye(Qe,xa<=1114111,N("UTF-8 value too large",!0)),Te(Qe);return Ye(Qe,Qe.current===125,N("missing '}'",!0)),_e(Qe),Z(Qe.buff,sa),xa})(i));ke>0;ke--)E(i,$[Pe.UTF8BUFFSZ-ke])},La=function(i){var $,ke=0;for($=0;$<3&&Ge(i.current);$++)ke=10*ke+i.current-48,Te(i);return Ye(i,ke<=255,N("decimal escape too large",!0)),Z(i.buff,$),ke},z=function(i,$,ke){for(Te(i);i.current!==$;)switch(i.current){case Oe:ve(i,N("unfinished string",!0),289);break;case 10:case 13:ve(i,N("unfinished string",!0),293);break;case 92:Te(i);var Qe=void 0,sa=void 0;switch(i.current){case 97:sa=7,Qe="read_save";break;case 98:sa=8,Qe="read_save";break;case 102:sa=12,Qe="read_save";break;case 110:sa=10,Qe="read_save";break;case 114:sa=13,Qe="read_save";break;case 116:sa=9,Qe="read_save";break;case 118:sa=11,Qe="read_save";break;case 120:sa=he(i),Qe="read_save";break;case 117:ha(i),Qe="no_save";break;case 10:case 13:fa(i),sa=10,Qe="only_save";break;case 92:case 34:case 39:sa=i.current,Qe="read_save";break;case Oe:Qe="no_save";break;case 122:for(Z(i.buff,1),_e(i);Q(i.current);)R(i)?fa(i):_e(i);Qe="no_save";break;default:Ye(i,Ge(i.current),N("invalid escape sequence",!0)),sa=La(i),Qe="only_save"}Qe==="read_save"&&_e(i),Qe!=="read_save"&&Qe!=="only_save"||(Z(i.buff,1),E(i,sa));break;default:Te(i)}Te(i),ke.ts=qe(i,i.buff.buffer.subarray(1,i.buff.n-1))},je=Object.create(null);P.forEach(function(i,$){return je[aa(i)]=$});var Ke=function(i,$){for(de(i.buff);;)switch(K(typeof i.current=="number"),i.current){case 10:case 13:fa(i);break;case 32:case 12:case 9:case 11:_e(i);break;case 45:if(_e(i),i.current!==45)return 45;if(_e(i),i.current===91){var ke=F(i);if(de(i.buff),ke>=0){Je(i,null,ke),de(i.buff);break}}for(;!R(i)&&i.current!==Oe;)_e(i);break;case 91:var Qe=F(i);return Qe>=0?(Je(i,$,Qe),293):(Qe!==-1&&ve(i,N("invalid long string delimiter",!0),293),91);case 61:return _e(i),va(i,61)?282:61;case 60:return _e(i),va(i,61)?284:va(i,60)?286:60;case 62:return _e(i),va(i,61)?283:va(i,62)?287:62;case 47:return _e(i),va(i,47)?279:47;case 126:return _e(i),va(i,61)?285:126;case 58:return _e(i),va(i,58)?288:58;case 34:case 39:return z(i,i.current,$),293;case 46:return Te(i),va(i,46)?va(i,46)?281:280:Ge(i.current)?S(i,$):46;case 48:case 49:case 50:case 51:case 52:case 53:case 54:case 55:case 56:case 57:return S(i,$);case Oe:return 289;default:if(ne(i.current)){do Te(i);while(te(i.current));var sa=qe(i,me(i.buff));$.ts=sa;var xa=je[w(sa)];return xa!==void 0&&xa<=22?xa+257:292}var Ma=i.current;return _e(i),Ma}};e.exports.FIRST_RESERVED=257,e.exports.LUA_ENV=se,e.exports.LexState=function i(){o(this,i),this.current=NaN,this.linenumber=NaN,this.lastline=NaN,this.t=new T,this.lookahead=new T,this.fs=null,this.L=null,this.z=null,this.buff=null,this.h=null,this.dyd=null,this.source=null,this.envn=null},e.exports.RESERVED=Ue,e.exports.isreserved=function(i){var $=je[w(i)];return $!==void 0&&$<=22},e.exports.luaX_lookahead=function(i){return K(i.lookahead.token===289),i.lookahead.token=Ke(i,i.lookahead.seminfo),i.lookahead.token},e.exports.luaX_newstring=qe,e.exports.luaX_next=function(i){i.lastline=i.linenumber,i.lookahead.token!==289?(i.t.token=i.lookahead.token,i.t.seminfo.i=i.lookahead.seminfo.i,i.t.seminfo.r=i.lookahead.seminfo.r,i.t.seminfo.ts=i.lookahead.seminfo.ts,i.lookahead.token=289):i.t.token=Ke(i,i.t.seminfo)},e.exports.luaX_setinput=function(i,$,ke,Qe,sa){$.t={token:0,seminfo:new C},$.L=i,$.current=sa,$.lookahead={token:289,seminfo:new C},$.z=ke,$.fs=null,$.linenumber=1,$.lastline=1,$.source=Qe,$.envn=De(i,se),We(i,$.buff,q)},e.exports.luaX_syntaxerror=function(i,$){ve(i,$,i.t.token)},e.exports.luaX_token2str=X,e.exports.luaX_tokens=P},function(e,ga,d){var o=(0,d(1).luastring_of)(0,0,0,0,0,0,0,0,0,0,8,8,8,8,8,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,12,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,22,22,22,22,22,22,22,22,22,22,4,4,4,4,4,4,4,21,21,21,21,21,21,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,4,4,4,4,5,4,21,21,21,21,21,21,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,4,4,4,4,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0);e.exports.lisdigit=function(s){return(2&o[s+1])!=0},e.exports.lislalnum=function(s){return(3&o[s+1])!=0},e.exports.lislalpha=function(s){return(1&o[s+1])!=0},e.exports.lisprint=function(s){return(4&o[s+1])!=0},e.exports.lisspace=function(s){return(8&o[s+1])!=0},e.exports.lisxdigit=function(s){return(16&o[s+1])!=0}},function(e,ga,d){function o(f,x){for(var W=0;W<x.length;W++){var ye=x[W];ye.enumerable=ye.enumerable||!1,ye.configurable=!0,"value"in ye&&(ye.writable=!0),Object.defineProperty(f,ye.key,ye)}}function s(f,x){if(!(f instanceof x))throw new TypeError("Cannot call a class as a function")}var m=d(1),ge=m.LUA_MULTRET,b=m.to_luastring,y=d(35),N=y.BinOpr,pe=N.OPR_ADD,q=N.OPR_AND,Ne=N.OPR_BAND,K=N.OPR_BOR,Y=N.OPR_BXOR,Le=N.OPR_CONCAT,fe=N.OPR_DIV,Ge=N.OPR_EQ,te=N.OPR_GE,ne=N.OPR_GT,Q=N.OPR_IDIV,ea=N.OPR_LE,Pe=N.OPR_LT,Xe=N.OPR_MOD,De=N.OPR_MUL,aa=N.OPR_NE,w=N.OPR_NOBINOPR,j=N.OPR_OR,I=N.OPR_POW,G=N.OPR_SHL,Oe=N.OPR_SHR,me=N.OPR_SUB,Z=y.UnOpr,de=Z.OPR_BNOT,We=Z.OPR_LEN,se=Z.OPR_MINUS,Ue=Z.OPR_NOT,P=Z.OPR_NOUNOPR,C=y.NO_JUMP,T=y.getinstruction,E=y.luaK_checkstack,X=y.luaK_codeABC,R=y.luaK_codeABx,_e=y.luaK_codeAsBx,Te=y.luaK_codek,na=y.luaK_concat,qe=y.luaK_dischargevars,fa=y.luaK_exp2RK,va=y.luaK_exp2anyreg,U=y.luaK_exp2anyregup,S=y.luaK_exp2nextreg,ve=y.luaK_exp2val,F=y.luaK_fixline,Je=y.luaK_getlabel,Ye=y.luaK_goiffalse,Ze=y.luaK_goiftrue,he=y.luaK_indexed,ha=y.luaK_infix,La=y.luaK_intK,z=y.luaK_jump,je=y.luaK_jumpto,Ke=y.luaK_nil,i=y.luaK_patchclose,$=y.luaK_patchlist,ke=y.luaK_patchtohere,Qe=y.luaK_posfix,sa=y.luaK_prefix,xa=y.luaK_reserveregs,Ma=y.luaK_ret,_a=y.luaK_self,Ua=y.luaK_setlist,Ra=y.luaK_setmultret,Va=y.luaK_setoneret,h=y.luaK_setreturns,ce=y.luaK_storevar,Se=y.luaK_stringK,Ee=d(8),xe=d(13),ee=d(21),ra=d(4),da=ra.LUAI_MAXCCALLS,Oa=ra.MAX_INT,Ea=ra.lua_assert,Ia=d(6),pa=d(16),a=pa.OpCodesI,p=a.OP_CALL,r=a.OP_CLOSURE,n=a.OP_FORLOOP,L=a.OP_FORPREP,l=a.OP_GETUPVAL,_=a.OP_MOVE,B=a.OP_NEWTABLE,A=a.OP_SETTABLE,M=a.OP_TAILCALL,ue=a.OP_TFORCALL,oe=a.OP_TFORLOOP,Ta=a.OP_VARARG,Ve=pa.LFIELDS_PER_FLUSH,H=pa.SETARG_B,Ae=pa.SETARG_C,He=pa.SET_OPCODE,$e=d(10),ka=$e.luaS_eqlngstr,Sa=$e.luaS_new,wa=$e.luaS_newliteral,Fa=d(9),Qa=xe.Proto,v=ee.RESERVED,ie=function(f){return f===la.VCALL||f===la.VVARARG},Ie=function(f,x){return ka(f,x)},ta=function f(){s(this,f),this.previous=null,this.firstlabel=NaN,this.firstgoto=NaN,this.nactvar=NaN,this.upval=NaN,this.isloop=NaN},la={VVOID:0,VNIL:1,VTRUE:2,VFALSE:3,VK:4,VKFLT:5,VKINT:6,VNONRELOC:7,VLOCAL:8,VUPVAL:9,VINDEXED:10,VJMP:11,VRELOCABLE:12,VCALL:13,VVARARG:14},ua=(function(){function f(){s(this,f),this.k=NaN,this.u={ival:NaN,nval:NaN,info:NaN,ind:{idx:NaN,t:NaN,vt:NaN}},this.t=NaN,this.f=NaN}return(function(x,W,ye){W&&o(x.prototype,W)})(f,[{key:"to",value:function(x){this.k=x.k,this.u=x.u,this.t=x.t,this.f=x.f}}]),f})(),Pa=function f(){s(this,f),this.f=null,this.prev=null,this.ls=null,this.bl=null,this.pc=NaN,this.lasttarget=NaN,this.jpc=NaN,this.nk=NaN,this.np=NaN,this.firstlocal=NaN,this.nlocvars=NaN,this.nactvar=NaN,this.nups=NaN,this.freereg=NaN},za=function f(){s(this,f),this.arr=[],this.n=NaN,this.size=NaN},Xa=function(f,x){f.t.token=0,ee.luaX_syntaxerror(f,x)},ja=function(f,x){ee.luaX_syntaxerror(f,Ia.luaO_pushfstring(f.L,b("%s expected",!0),ee.luaX_token2str(f,x)))},Ka=function(f,x,W,ye){x>W&&(function(be,le,Fe){var oa=be.ls.L,Aa=be.f.linedefined,ya=Aa===0?b("main function",!0):Ia.luaO_pushfstring(oa,b("function at line %d",!0),Aa),Ca=Ia.luaO_pushfstring(oa,b("too many %s (limit is %d) in %s",!0),Fe,le,ya);ee.luaX_syntaxerror(be.ls,Ca)})(f,W,ye)},Ga=function(f,x){return f.t.token===x&&(ee.luaX_next(f),!0)},Ya=function(f,x){f.t.token!==x&&ja(f,x)},c=function(f,x){Ya(f,x),ee.luaX_next(f)},J=function(f,x,W){x||ee.luaX_syntaxerror(f,W)},Re=function(f,x,W,ye){Ga(f,x)||(ye===f.linenumber?ja(f,x):ee.luaX_syntaxerror(f,Ia.luaO_pushfstring(f.L,b("%s expected (to close %s at line %d)"),ee.luaX_token2str(f,x),ee.luaX_token2str(f,W),ye)))},Me=function(f){Ya(f,v.TK_NAME);var x=f.t.seminfo.ts;return ee.luaX_next(f),x},ze=function(f,x,W){f.f=f.t=C,f.k=x,f.u.info=W},Be=function(f,x,W){ze(x,la.VK,Se(f.fs,W))},Ce=function(f,x){Be(f,x,Me(f))},Ba=function(f,x){var W=f.fs,ye=f.dyd,be=(function(le,Fe){var oa=le.fs,Aa=oa.f;return Aa.locvars[oa.nlocvars]=new Ia.LocVar,Aa.locvars[oa.nlocvars].varname=Fe,oa.nlocvars++})(f,x);Ka(W,ye.actvar.n+1-W.firstlocal,200,b("local variables",!0)),ye.actvar.arr[ye.actvar.n]=new function le(){s(this,le),this.idx=NaN},ye.actvar.arr[ye.actvar.n].idx=be,ye.actvar.n++},t=function(f,x){Ba(f,ee.luaX_newstring(f,b(x,!0)))},O=function(f,x){var W=f.ls.dyd.actvar.arr[f.firstlocal+x].idx;return Ea(W<f.nlocvars),f.f.locvars[W]},k=function(f,x){var W=f.fs;for(W.nactvar=W.nactvar+x;x;x--)O(W,W.nactvar-x).startpc=W.pc},D=function(f,x,W){var ye=f.f;return Ka(f,f.nups+1,xe.MAXUPVAL,b("upvalues",!0)),ye.upvalues[f.nups]={instack:W.k===la.VLOCAL,idx:W.u.info,name:x},f.nups++},ae=function f(x,W,ye,be){if(x===null)ze(ye,la.VVOID,0);else{var le=(function(oa,Aa){for(var ya=oa.nactvar-1;ya>=0;ya--)if(Ie(Aa,O(oa,ya).varname))return ya;return-1})(x,W);if(le>=0)ze(ye,la.VLOCAL,le),be||(function(oa,Aa){for(var ya=oa.bl;ya.nactvar>Aa;)ya=ya.previous;ya.upval=1})(x,le);else{var Fe=(function(oa,Aa){for(var ya=oa.f.upvalues,Ca=0;Ca<oa.nups;Ca++)if(Ie(ya[Ca].name,Aa))return Ca;return-1})(x,W);if(Fe<0){if(f(x.prev,W,ye,0),ye.k===la.VVOID)return;Fe=D(x,W,ye)}ze(ye,la.VUPVAL,Fe)}}},re=function(f,x){var W=Me(f),ye=f.fs;if(ae(ye,W,x,1),x.k===la.VVOID){var be=new ua;ae(ye,f.envn,x,1),Ea(x.k!==la.VVOID),Be(f,be,W),he(ye,x,be)}},ia=function(f,x,W,ye){var be=f.fs,le=x-W;if(ie(ye.k))++le<0&&(le=0),h(be,ye,le),le>1&&xa(be,le-1);else if(ye.k!==la.VVOID&&S(be,ye),le>0){var Fe=be.freereg;xa(be,le),Ke(be,Fe,le)}W>x&&(f.fs.freereg-=W-x)},ma=function(f){var x=f.L;++x.nCcalls,Ka(f.fs,x.nCcalls,da,b("JS levels",!0))},u=function(f){return f.L.nCcalls--},g=function(f,x,W){var ye=f.fs,be=f.dyd.gt,le=be.arr[x];if(Ea(Ie(le.name,W.name)),le.nactvar<W.nactvar){var Fe=O(ye,le.nactvar).varname,oa=Ia.luaO_pushfstring(f.L,b("<goto %s> at line %d jumps into the scope of local '%s'"),le.name.getstr(),le.line,Fe.getstr());Xa(f,oa)}$(ye,le.pc,W.pc);for(var Aa=x;Aa<be.n-1;Aa++)be.arr[Aa]=be.arr[Aa+1];be.n--},V=function(f,x){for(var W=f.fs.bl,ye=f.dyd,be=ye.gt.arr[x],le=W.firstlabel;le<ye.label.n;le++){var Fe=ye.label.arr[le];if(Ie(Fe.name,be.name))return be.nactvar>Fe.nactvar&&(W.upval||ye.label.n>W.firstlabel)&&i(f.fs,be.pc,Fe.nactvar),g(f,x,Fe),!0}return!1},we=function(f,x,W,ye,be){var le=x.n;return x.arr[le]=new function Fe(){s(this,Fe),this.name=null,this.pc=NaN,this.line=NaN,this.nactvar=NaN},x.arr[le].name=W,x.arr[le].line=ye,x.arr[le].nactvar=f.fs.nactvar,x.arr[le].pc=be,x.n=le+1,le},ca=function(f,x){for(var W=f.dyd.gt,ye=f.fs.bl.firstgoto;ye<W.n;)Ie(W.arr[ye].name,x.name)?g(f,ye,x):ye++},ba=function(f,x,W){x.isloop=W,x.nactvar=f.nactvar,x.firstlabel=f.ls.dyd.label.n,x.firstgoto=f.ls.dyd.gt.n,x.upval=0,x.previous=f.bl,f.bl=x,Ea(f.freereg===f.nactvar)},Na=function(f,x,W){x.prev=f.fs,x.ls=f,f.fs=x,x.pc=0,x.lasttarget=0,x.jpc=C,x.freereg=0,x.nk=0,x.np=0,x.nups=0,x.nlocvars=0,x.nactvar=0,x.firstlocal=f.dyd.actvar.n,x.bl=null;var ye=x.f;ye.source=f.source,ye.maxstacksize=2,ba(x,W,!1)},Da=function(f){var x=f.bl,W=f.ls;if(x.previous&&x.upval){var ye=z(f);i(f,ye,x.nactvar),ke(f,ye)}x.isloop&&(function(be){var le=wa(be.L,"break"),Fe=we(be,be.dyd.label,le,0,be.fs.pc);ca(be,be.dyd.label.arr[Fe])})(W),f.bl=x.previous,(function(be,le){for(be.ls.dyd.actvar.n-=be.nactvar-le;be.nactvar>le;)O(be,--be.nactvar).endpc=be.pc})(f,x.nactvar),Ea(x.nactvar===f.nactvar),f.freereg=f.nactvar,W.dyd.label.n=x.firstlabel,x.previous?(function(be,le){for(var Fe=le.firstgoto,oa=be.ls.dyd.gt;Fe<oa.n;){var Aa=oa.arr[Fe];Aa.nactvar>le.nactvar&&(le.upval&&i(be,Aa.pc,le.nactvar),Aa.nactvar=le.nactvar),V(be.ls,Fe)||Fe++}})(f,x):x.firstgoto<W.dyd.gt.n&&(function(be,le){var Fe=ee.isreserved(le.name)?"<%s> at line %d not inside a loop":"no visible label '%s' for <goto> at line %d";Fe=Ia.luaO_pushfstring(be.L,b(Fe),le.name.getstr(),le.line),Xa(be,Fe)})(W,W.dyd.gt.arr[x.firstgoto])},Za=function(f){var x=f.fs;Ma(x,0,0),Da(x),Ea(x.bl===null),f.fs=x.prev},qa=function(f,x){switch(f.t.token){case v.TK_ELSE:case v.TK_ELSEIF:case v.TK_END:case v.TK_EOS:return!0;case v.TK_UNTIL:return x;default:return!1}},Wa=function(f){for(;!qa(f,1);){if(f.t.token===v.TK_RETURN)return void Ar(f);Ar(f)}},Ja=function(f,x){var W=f.fs,ye=new ua;U(W,x),ee.luaX_next(f),Ce(f,ye),he(W,x,ye)},$a=function(f,x){ee.luaX_next(f),er(f,x),ve(f.fs,x),c(f,93)},tr=function(f,x){var W=f.fs,ye=f.fs.freereg,be=new ua,le=new ua;f.t.token===v.TK_NAME?(Ka(W,x.nh,Oa,b("items in a constructor",!0)),Ce(f,be)):$a(f,be),x.nh++,c(f,61);var Fe=fa(W,be);er(f,le),X(W,A,x.t.u.info,Fe,fa(W,le)),W.freereg=ye},Rr=function(f,x){x.v.k!==la.VVOID&&(S(f,x.v),x.v.k=la.VVOID,x.tostore===Ve&&(Ua(f,x.t.u.info,x.na,x.tostore),x.tostore=0))},ir=function(f,x){er(f,x.v),Ka(f.fs,x.na,Oa,b("items in a constructor",!0)),x.na++,x.tostore++},hr=function(f,x){switch(f.t.token){case v.TK_NAME:ee.luaX_lookahead(f)!==61?ir(f,x):tr(f,x);break;case 91:tr(f,x);break;default:ir(f,x)}},xr=function(f,x){var W=f.fs,ye=f.linenumber,be=X(W,B,0,0,0),le=new function Fe(){s(this,Fe),this.v=new ua,this.t=new ua,this.nh=NaN,this.na=NaN,this.tostore=NaN};le.na=le.nh=le.tostore=0,le.t=x,ze(x,la.VRELOCABLE,be),ze(le.v,la.VVOID,0),S(f.fs,x),c(f,123);do{if(Ea(le.v.k===la.VVOID||le.tostore>0),f.t.token===125)break;Rr(W,le),hr(f,le)}while(Ga(f,44)||Ga(f,59));Re(f,125,123,ye),(function(Fe,oa){oa.tostore!==0&&(ie(oa.v.k)?(Ra(Fe,oa.v),Ua(Fe,oa.t.u.info,oa.na,ge),oa.na--):(oa.v.k!==la.VVOID&&S(Fe,oa.v),Ua(Fe,oa.t.u.info,oa.na,oa.tostore)))})(W,le),H(W.f.code[be],Ia.luaO_int2fb(le.na)),Ae(W.f.code[be],Ia.luaO_int2fb(le.nh))},Lr=function(f,x,W,ye){var be=new Pa,le=new ta;be.f=(function(Fe){var oa=Fe.L,Aa=new Qa(oa),ya=Fe.fs;return ya.f.p[ya.np++]=Aa,Aa})(f),be.f.linedefined=ye,Na(f,be,le),c(f,40),W&&(t(f,"self"),k(f,1)),(function(Fe){var oa=Fe.fs,Aa=oa.f,ya=0;if(Aa.is_vararg=!1,Fe.t.token!==41)do switch(Fe.t.token){case v.TK_NAME:Ba(Fe,Me(Fe)),ya++;break;case v.TK_DOTS:ee.luaX_next(Fe),Aa.is_vararg=!0;break;default:ee.luaX_syntaxerror(Fe,b("<name> or '...' expected",!0))}while(!Aa.is_vararg&&Ga(Fe,44));k(Fe,ya),Aa.numparams=oa.nactvar,xa(oa,oa.nactvar)})(f),c(f,41),Wa(f),be.f.lastlinedefined=f.linenumber,Re(f,v.TK_END,v.TK_FUNCTION,ye),(function(Fe,oa){var Aa=Fe.fs.prev;ze(oa,la.VRELOCABLE,R(Aa,r,0,Aa.np-1)),S(Aa,oa)})(f,x),Za(f)},nr=function(f,x){var W=1;for(er(f,x);Ga(f,44);)S(f.fs,x),er(f,x),W++;return W},cr=function(f,x,W){var ye,be=f.fs,le=new ua;switch(f.t.token){case 40:ee.luaX_next(f),f.t.token===41?le.k=la.VVOID:(nr(f,le),Ra(be,le)),Re(f,41,40,W);break;case 123:xr(f,le);break;case v.TK_STRING:Be(f,le,f.t.seminfo.ts),ee.luaX_next(f);break;default:ee.luaX_syntaxerror(f,b("function arguments expected",!0))}Ea(x.k===la.VNONRELOC);var Fe=x.u.info;ie(le.k)?ye=ge:(le.k!==la.VVOID&&S(be,le),ye=be.freereg-(Fe+1)),ze(x,la.VCALL,X(be,p,Fe,ye+1,2)),F(be,W),be.freereg=Fe+1},dr=function(f,x){var W=f.fs,ye=f.linenumber;for(!(function(Fe,oa){switch(Fe.t.token){case 40:var Aa=Fe.linenumber;return ee.luaX_next(Fe),er(Fe,oa),Re(Fe,41,40,Aa),void qe(Fe.fs,oa);case v.TK_NAME:return void re(Fe,oa);default:ee.luaX_syntaxerror(Fe,b("unexpected symbol",!0))}})(f,x);;)switch(f.t.token){case 46:Ja(f,x);break;case 91:var be=new ua;U(W,x),$a(f,be),he(W,x,be);break;case 58:var le=new ua;ee.luaX_next(f),Ce(f,le),_a(W,x,le),cr(f,x,ye);break;case 40:case v.TK_STRING:case 123:S(W,x),cr(f,x,ye);break;default:return}},br=[{left:10,right:10},{left:10,right:10},{left:11,right:11},{left:11,right:11},{left:14,right:13},{left:11,right:11},{left:11,right:11},{left:6,right:6},{left:4,right:4},{left:5,right:5},{left:7,right:7},{left:7,right:7},{left:9,right:8},{left:3,right:3},{left:3,right:3},{left:3,right:3},{left:3,right:3},{left:3,right:3},{left:3,right:3},{left:2,right:2},{left:1,right:1}],yr=function f(x,W,ye){ma(x);var be=(function(Ca){switch(Ca){case v.TK_NOT:return Ue;case 45:return se;case 126:return de;case 35:return We;default:return P}})(x.t.token);if(be!==P){var le=x.linenumber;ee.luaX_next(x),f(x,W,12),sa(x.fs,be,W,le)}else(function(Ca,Ha){switch(Ca.t.token){case v.TK_FLT:ze(Ha,la.VKFLT,0),Ha.u.nval=Ca.t.seminfo.r;break;case v.TK_INT:ze(Ha,la.VKINT,0),Ha.u.ival=Ca.t.seminfo.i;break;case v.TK_STRING:Be(Ca,Ha,Ca.t.seminfo.ts);break;case v.TK_NIL:ze(Ha,la.VNIL,0);break;case v.TK_TRUE:ze(Ha,la.VTRUE,0);break;case v.TK_FALSE:ze(Ha,la.VFALSE,0);break;case v.TK_DOTS:var ar=Ca.fs;J(Ca,ar.f.is_vararg,b("cannot use '...' outside a vararg function",!0)),ze(Ha,la.VVARARG,X(ar,Ta,0,1,0));break;case 123:return void xr(Ca,Ha);case v.TK_FUNCTION:return ee.luaX_next(Ca),void Lr(Ca,Ha,0,Ca.linenumber);default:return void dr(Ca,Ha)}ee.luaX_next(Ca)})(x,W);for(var Fe=(function(Ca){switch(Ca){case 43:return pe;case 45:return me;case 42:return De;case 37:return Xe;case 94:return I;case 47:return fe;case v.TK_IDIV:return Q;case 38:return Ne;case 124:return K;case 126:return Y;case v.TK_SHL:return G;case v.TK_SHR:return Oe;case v.TK_CONCAT:return Le;case v.TK_NE:return aa;case v.TK_EQ:return Ge;case 60:return Pe;case v.TK_LE:return ea;case 62:return ne;case v.TK_GE:return te;case v.TK_AND:return q;case v.TK_OR:return j;default:return w}})(x.t.token);Fe!==w&&br[Fe].left>ye;){var oa=new ua,Aa=x.linenumber;ee.luaX_next(x),ha(x.fs,Fe,W);var ya=f(x,oa,br[Fe].right);Qe(x.fs,Fe,W,oa,Aa),Fe=ya}return u(x),Fe},er=function(f,x){yr(f,x,0)},fr=function(f){var x=f.fs,W=new ta;ba(x,W,0),Wa(f),Da(x)},kr=function f(){s(this,f),this.prev=null,this.v=new ua},Sr=function f(x,W,ye){var be=new ua;if(J(x,(function(oa){return la.VLOCAL<=oa&&oa<=la.VINDEXED})(W.v.k),b("syntax error",!0)),Ga(x,44)){var le=new kr;le.prev=W,dr(x,le.v),le.v.k!==la.VINDEXED&&(function(oa,Aa,ya){for(var Ca=oa.fs,Ha=Ca.freereg,ar=!1;Aa;Aa=Aa.prev)Aa.v.k===la.VINDEXED&&(Aa.v.u.ind.vt===ya.k&&Aa.v.u.ind.t===ya.u.info&&(ar=!0,Aa.v.u.ind.vt=la.VLOCAL,Aa.v.u.ind.t=Ha),ya.k===la.VLOCAL&&Aa.v.u.ind.idx===ya.u.info&&(ar=!0,Aa.v.u.ind.idx=Ha));if(ar){var Pr=ya.k===la.VLOCAL?_:l;X(Ca,Pr,Ha,ya.u.info,0),xa(Ca,1)}})(x,W,le.v),Ka(x.fs,ye+x.L.nCcalls,da,b("JS levels",!0)),f(x,le,ye+1)}else{c(x,61);var Fe=nr(x,be);if(Fe===ye)return Va(x.fs,be),void ce(x.fs,W.v,be);ia(x,ye,Fe,be)}ze(be,la.VNONRELOC,x.fs.freereg-1),ce(x.fs,W.v,be)},Or=function(f){var x=new ua;return er(f,x),x.k===la.VNIL&&(x.k=la.VFALSE),Ze(f.fs,x),x.f},Er=function(f,x){var W,ye=f.linenumber;Ga(f,v.TK_GOTO)?W=Me(f):(ee.luaX_next(f),W=wa(f.L,"break"));var be=we(f,f.dyd.gt,W,ye,x);V(f,be)},wr=function(f,x,W){var ye,be=f.fs,le=f.dyd.label;(function(Fe,oa,Aa){for(var ya=Fe.bl.firstlabel;ya<oa.n;ya++)if(Ie(Aa,oa.arr[ya].name)){var Ca=Ia.luaO_pushfstring(Fe.ls.L,b("label '%s' already defined on line %d",!0),Aa.getstr(),oa.arr[ya].line);Xa(Fe.ls,Ca)}})(be,le,x),c(f,v.TK_DBCOLON),ye=we(f,le,x,W,Je(be)),(function(Fe){for(;Fe.t.token===59||Fe.t.token===v.TK_DBCOLON;)Ar(Fe)})(f),qa(f,0)&&(le.arr[ye].nactvar=be.bl.nactvar),ca(f,le.arr[ye])},sr=function(f){var x=new ua;return er(f,x),S(f.fs,x),Ea(x.k===la.VNONRELOC),x.u.info},_r=function(f,x,W,ye,be){var le,Fe=new ta,oa=f.fs;k(f,3),c(f,v.TK_DO);var Aa=be?_e(oa,L,x,C):z(oa);ba(oa,Fe,0),k(f,ye),xa(oa,ye),fr(f),Da(oa),ke(oa,Aa),be?le=_e(oa,n,x,C):(X(oa,ue,x,0,ye),F(oa,W),le=_e(oa,oe,x+2,C)),$(oa,le,Aa+1),F(oa,W)},Ir=function(f,x){var W=f.fs,ye=new ta;ba(W,ye,1),ee.luaX_next(f);var be=Me(f);switch(f.t.token){case 61:(function(le,Fe,oa){var Aa=le.fs,ya=Aa.freereg;t(le,"(for index)"),t(le,"(for limit)"),t(le,"(for step)"),Ba(le,Fe),c(le,61),sr(le),c(le,44),sr(le),Ga(le,44)?sr(le):(Te(Aa,Aa.freereg,La(Aa,1)),xa(Aa,1)),_r(le,ya,oa,1,1)})(f,be,x);break;case 44:case v.TK_IN:(function(le,Fe){var oa=le.fs,Aa=new ua,ya=4,Ca=oa.freereg;for(t(le,"(for generator)"),t(le,"(for state)"),t(le,"(for control)"),Ba(le,Fe);Ga(le,44);)Ba(le,Me(le)),ya++;c(le,v.TK_IN);var Ha=le.linenumber;ia(le,3,nr(le,Aa),Aa),E(oa,3),_r(le,Ca,Ha,ya-3,0)})(f,be);break;default:ee.luaX_syntaxerror(f,b("'=' or 'in' expected",!0))}Re(f,v.TK_END,v.TK_FOR,x),Da(W)},mr=function(f,x){var W,ye=new ta,be=f.fs,le=new ua;if(ee.luaX_next(f),er(f,le),c(f,v.TK_THEN),f.t.token===v.TK_GOTO||f.t.token===v.TK_BREAK){for(Ye(f.fs,le),ba(be,ye,!1),Er(f,le.t);Ga(f,59););if(qa(f,0))return Da(be),x;W=z(be)}else Ze(f.fs,le),ba(be,ye,!1),W=le.f;return Wa(f),Da(be),f.t.token!==v.TK_ELSE&&f.t.token!==v.TK_ELSEIF||(x=na(be,x,z(be))),ke(be,W),x},Mr=function(f,x){var W=new ua,ye=new ua;ee.luaX_next(f);var be=(function(le,Fe){var oa=0;for(re(le,Fe);le.t.token===46;)Ja(le,Fe);return le.t.token===58&&(oa=1,Ja(le,Fe)),oa})(f,W);Lr(f,ye,be,x),ce(f.fs,W,ye),F(f.fs,x)},Ar=function(f){var x=f.linenumber;switch(ma(f),f.t.token){case 59:ee.luaX_next(f);break;case v.TK_IF:(function(W,ye){var be=W.fs,le=C;for(le=mr(W,le);W.t.token===v.TK_ELSEIF;)le=mr(W,le);Ga(W,v.TK_ELSE)&&fr(W),Re(W,v.TK_END,v.TK_IF,ye),ke(be,le)})(f,x);break;case v.TK_WHILE:(function(W,ye){var be=W.fs,le=new ta;ee.luaX_next(W);var Fe=Je(be),oa=Or(W);ba(be,le,1),c(W,v.TK_DO),fr(W),je(be,Fe),Re(W,v.TK_END,v.TK_WHILE,ye),Da(be),ke(be,oa)})(f,x);break;case v.TK_DO:ee.luaX_next(f),fr(f),Re(f,v.TK_END,v.TK_DO,x);break;case v.TK_FOR:Ir(f,x);break;case v.TK_REPEAT:(function(W,ye){var be=W.fs,le=Je(be),Fe=new ta,oa=new ta;ba(be,Fe,1),ba(be,oa,0),ee.luaX_next(W),Wa(W),Re(W,v.TK_UNTIL,v.TK_REPEAT,ye);var Aa=Or(W);oa.upval&&i(be,Aa,oa.nactvar),Da(be),$(be,Aa,le),Da(be)})(f,x);break;case v.TK_FUNCTION:Mr(f,x);break;case v.TK_LOCAL:ee.luaX_next(f),Ga(f,v.TK_FUNCTION)?(function(W){var ye=new ua,be=W.fs;Ba(W,Me(W)),k(W,1),Lr(W,ye,0,W.linenumber),O(be,ye.u.info).startpc=be.pc})(f):(function(W){var ye,be=0,le=new ua;do Ba(W,Me(W)),be++;while(Ga(W,44));Ga(W,61)?ye=nr(W,le):(le.k=la.VVOID,ye=0),ia(W,be,ye,le),k(W,be)})(f);break;case v.TK_DBCOLON:ee.luaX_next(f),wr(f,Me(f),x);break;case v.TK_RETURN:ee.luaX_next(f),(function(W){var ye,be,le=W.fs,Fe=new ua;qa(W,1)||W.t.token===59?ye=be=0:(be=nr(W,Fe),ie(Fe.k)?(Ra(le,Fe),Fe.k===la.VCALL&&be===1&&(He(T(le,Fe),M),Ea(T(le,Fe).A===le.nactvar)),ye=le.nactvar,be=ge):be===1?ye=va(le,Fe):(S(le,Fe),ye=le.nactvar,Ea(be===le.freereg-ye))),Ma(le,ye,be),Ga(W,59)})(f);break;case v.TK_BREAK:case v.TK_GOTO:Er(f,z(f.fs));break;default:(function(W){var ye=W.fs,be=new kr;dr(W,be.v),W.t.token===61||W.t.token===44?(be.prev=null,Sr(W,be,1)):(J(W,be.v.k===la.VCALL,b("syntax error",!0)),Ae(T(ye,be.v),1))})(f)}Ea(f.fs.f.maxstacksize>=f.fs.freereg&&f.fs.freereg>=f.fs.nactvar),f.fs.freereg=f.fs.nactvar,u(f)};e.exports.Dyndata=function f(){s(this,f),this.actvar={arr:[],n:NaN,size:NaN},this.gt=new za,this.label=new za},e.exports.expkind=la,e.exports.expdesc=ua,e.exports.luaY_parser=function(f,x,W,ye,be,le){var Fe=new ee.LexState,oa=new Pa,Aa=xe.luaF_newLclosure(f,1);return Ee.luaD_inctop(f),f.stack[f.top-1].setclLvalue(Aa),Fe.h=Fa.luaH_new(f),Ee.luaD_inctop(f),f.stack[f.top-1].sethvalue(Fe.h),oa.f=Aa.p=new Qa(f),oa.f.source=Sa(f,be),Fe.buff=W,Fe.dyd=ye,ye.actvar.n=ye.gt.n=ye.label.n=0,ee.luaX_setinput(f,Fe,x,oa.f.source,le),(function(ya,Ca){var Ha=new ta,ar=new ua;Na(ya,Ca,Ha),Ca.f.is_vararg=!0,ze(ar,la.VLOCAL,0),D(Ca,ya.envn,ar),ee.luaX_next(ya),Wa(ya),Ya(ya,v.TK_EOS),Za(ya)})(Fe,oa),Ea(!oa.prev&&oa.nups===1&&!Fe.fs),Ea(ye.actvar.n===0&&ye.gt.n===0&&ye.label.n===0),delete f.stack[--f.top],Aa},e.exports.vkisinreg=function(f){return f===la.VNONRELOC||f===la.VLOCAL}},function(e,ga,d){var o,s,m=d(2),ge=m.LUA_MULTRET,b=m.LUA_OK,y=m.LUA_TFUNCTION,N=m.LUA_TNIL,pe=m.LUA_TNONE,q=m.LUA_TNUMBER,Ne=m.LUA_TSTRING,K=m.LUA_TTABLE,Y=m.LUA_VERSION,Le=m.LUA_YIELD,fe=m.lua_call,Ge=m.lua_callk,te=m.lua_concat,ne=m.lua_error,Q=m.lua_getglobal,ea=m.lua_geti,Pe=m.lua_getmetatable,Xe=m.lua_gettop,De=m.lua_insert,aa=m.lua_isnil,w=m.lua_isnone,j=m.lua_isstring,I=m.lua_load,G=m.lua_next,Oe=m.lua_pcallk,me=m.lua_pop,Z=m.lua_pushboolean,de=m.lua_pushcfunction,We=m.lua_pushglobaltable,se=m.lua_pushinteger,Ue=m.lua_pushliteral,P=m.lua_pushnil,C=m.lua_pushstring,T=m.lua_pushvalue,E=m.lua_rawequal,X=m.lua_rawget,R=m.lua_rawlen,_e=m.lua_rawset,Te=m.lua_remove,na=m.lua_replace,qe=m.lua_rotate,fa=m.lua_setfield,va=m.lua_setmetatable,U=m.lua_settop,S=m.lua_setupvalue,ve=m.lua_stringtonumber,F=m.lua_toboolean,Je=m.lua_tolstring,Ye=m.lua_tostring,Ze=m.lua_type,he=m.lua_typename,ha=d(7),La=ha.luaL_argcheck,z=ha.luaL_checkany,je=ha.luaL_checkinteger,Ke=ha.luaL_checkoption,i=ha.luaL_checkstack,$=ha.luaL_checktype,ke=ha.luaL_error,Qe=ha.luaL_getmetafield,sa=ha.luaL_loadbufferx,xa=ha.luaL_loadfile,Ma=ha.luaL_loadfilex,_a=ha.luaL_optinteger,Ua=ha.luaL_optstring,Ra=ha.luaL_setfuncs,Va=ha.luaL_tolstring,h=ha.luaL_where,ce=d(5),Se=ce.to_jsstring,Ee=ce.to_luastring;if(typeof TextDecoder=="function"){var xe="",ee=new TextDecoder("utf-8");o=function(l){xe+=ee.decode(l,{stream:!0})};var ra=new Uint8Array(0);s=function(){xe+=ee.decode(ra),console.log(xe),xe=""}}else{var da=[];o=function(l){try{l=Se(l)}catch{var _=new Uint8Array(l.length);_.set(l),l=_}da.push(l)},s=function(){console.log.apply(console.log,da),da=[]}}var Oa=["stop","restart","collect","count","step","setpause","setstepmul","isrunning"].map(function(l){return Ee(l)}),Ea=function(l){return $(l,1,K),U(l,2),G(l,1)?2:(P(l),1)},Ia=function(l){var _=je(l,2)+1;return se(l,_),ea(l,1,_)===N?1:2},pa=function(l){var _=_a(l,2,1);return U(l,1),Ze(l,1)===Ne&&_>0&&(h(l,_),T(l,1),te(l,2)),ne(l)},a=function(l,_,B){return _!==b&&_!==Le?(Z(l,0),T(l,-2),2):Xe(l)-B},p=function(l,_,B){return _===b?(B!==0&&(T(l,B),S(l,-2,1)||me(l,1)),1):(P(l),De(l,-2),2)},r=function(l,_){return i(l,2,"too many nested functions"),T(l,1),fe(l,0,1),aa(l,-1)?(me(l,1),null):(j(l,-1)||ke(l,Ee("reader function must return a string")),na(l,5),Ye(l,5))},n=function(l,_,B){return Xe(l)-1},L={assert:function(l){return F(l,1)?Xe(l):(z(l,1),Te(l,1),Ue(l,"assertion failed!"),U(l,1),pa(l))},collectgarbage:function(l){Ke(l,1,"collect",Oa),_a(l,2,0),ke(l,Ee("lua_gc not implemented"))},dofile:function(l){var _=Ua(l,1,null);return U(l,1),xa(l,_)!==b?ne(l):(Ge(l,0,ge,0,n),n(l))},error:pa,getmetatable:function(l){return z(l,1),Pe(l,1)?(Qe(l,1,Ee("__metatable",!0)),1):(P(l),1)},ipairs:function(l){return z(l,1),de(l,Ia),T(l,1),se(l,0),3},load:function(l){var _,B=Ye(l,1),A=Ua(l,3,"bt"),M=w(l,4)?0:4;if(B!==null){var ue=Ua(l,2,B);_=sa(l,B,B.length,ue,A)}else{var oe=Ua(l,2,"=(load)");$(l,1,y),U(l,5),_=I(l,r,null,oe,A)}return p(l,_,M)},loadfile:function(l){var _=Ua(l,1,null),B=Ua(l,2,null),A=w(l,3)?0:3,M=Ma(l,_,B);return p(l,M,A)},next:Ea,pairs:function(l){return(function(_,B,A,M){return z(_,1),Qe(_,1,B)===N?(de(_,M),T(_,1),P(_)):(T(_,1),fe(_,1,3)),3})(l,Ee("__pairs",!0),0,Ea)},pcall:function(l){z(l,1),Z(l,1),De(l,1);var _=Oe(l,Xe(l)-2,ge,0,0,a);return a(l,_,0)},print:function(l){var _=Xe(l);Q(l,Ee("tostring",!0));for(var B=1;B<=_;B++){T(l,-1),T(l,B),fe(l,1,1);var A=Je(l,-1);if(A===null)return ke(l,Ee("'tostring' must return a string to 'print'"));B>1&&o(Ee("	")),o(A),me(l,1)}return s(),0},rawequal:function(l){return z(l,1),z(l,2),Z(l,E(l,1,2)),1},rawget:function(l){return $(l,1,K),z(l,2),U(l,2),X(l,1),1},rawlen:function(l){var _=Ze(l,1);return La(l,_===K||_===Ne,1,"table or string expected"),se(l,R(l,1)),1},rawset:function(l){return $(l,1,K),z(l,2),z(l,3),U(l,3),_e(l,1),1},select:function(l){var _=Xe(l);if(Ze(l,1)===Ne&&Ye(l,1)[0]===35)return se(l,_-1),1;var B=je(l,1);return B<0?B=_+B:B>_&&(B=_),La(l,1<=B,1,"index out of range"),_-B},setmetatable:function(l){var _=Ze(l,2);return $(l,1,K),La(l,_===N||_===K,2,"nil or table expected"),Qe(l,1,Ee("__metatable",!0))!==N?ke(l,Ee("cannot change a protected metatable")):(U(l,2),va(l,1),1)},tonumber:function(l){if(Ze(l,2)<=0){if(z(l,1),Ze(l,1)===q)return U(l,1),1;var _=Ye(l,1);if(_!==null&&ve(l,_)===_.length+1)return 1}else{var B=je(l,2);$(l,1,Ne);var A=Ye(l,1);La(l,2<=B&&B<=36,2,"base out of range");var M=(function(ue,oe){try{ue=Se(ue)}catch{return null}var Ta=/^[\t\v\f \n\r]*([+-]?)0*([0-9A-Za-z]+)[\t\v\f \n\r]*$/.exec(ue);if(!Ta)return null;var Ve=parseInt(Ta[1]+Ta[2],oe);return isNaN(Ve)?null:0|Ve})(A,B);if(M!==null)return se(l,M),1}return P(l),1},tostring:function(l){return z(l,1),Va(l,1),1},type:function(l){var _=Ze(l,1);return La(l,_!==pe,1,"value expected"),C(l,he(l,_)),1},xpcall:function(l){var _=Xe(l);$(l,2,y),Z(l,1),T(l,1),qe(l,3,2);var B=Oe(l,_-2,ge,2,2,a);return a(l,B,2)}};e.exports.luaopen_base=function(l){return We(l),Ra(l,L,0),T(l,-1),fa(l,-2,Ee("_G")),Ue(l,Y),fa(l,-2,Ee("_VERSION")),1}},function(e,ga,d){var o=d(2),s=o.LUA_OK,m=o.LUA_TFUNCTION,ge=o.LUA_TSTRING,b=o.LUA_YIELD,y=o.lua_Debug,N=o.lua_checkstack,pe=o.lua_concat,q=o.lua_error,Ne=o.lua_getstack,K=o.lua_gettop,Y=o.lua_insert,Le=o.lua_isyieldable,fe=o.lua_newthread,Ge=o.lua_pop,te=o.lua_pushboolean,ne=o.lua_pushcclosure,Q=o.lua_pushliteral,ea=o.lua_pushthread,Pe=o.lua_pushvalue,Xe=o.lua_resume,De=o.lua_status,aa=o.lua_tothread,w=o.lua_type,j=o.lua_upvalueindex,I=o.lua_xmove,G=o.lua_yield,Oe=d(7),me=Oe.luaL_argcheck,Z=Oe.luaL_checktype,de=Oe.luaL_newlib,We=Oe.luaL_where,se=function(E){var X=aa(E,1);return me(E,X,1,"thread expected"),X},Ue=function(E,X,R){if(!N(X,R))return Q(E,"too many arguments to resume"),-1;if(De(X)===s&&K(X)===0)return Q(E,"cannot resume dead coroutine"),-1;I(E,X,R);var _e=Xe(X,E,R);if(_e===s||_e===b){var Te=K(X);return N(E,Te+1)?(I(X,E,Te),Te):(Ge(X,Te),Q(E,"too many results to resume"),-1)}return I(X,E,1),-1},P=function(E){var X=aa(E,j(1)),R=Ue(E,X,K(E));return R<0?(w(E,-1)===ge&&(We(E,1),Y(E,-2),pe(E,2)),q(E)):R},C=function(E){Z(E,1,m);var X=fe(E);return Pe(E,1),I(E,X,1),1},T={create:C,isyieldable:function(E){return te(E,Le(E)),1},resume:function(E){var X=se(E),R=Ue(E,X,K(E)-1);return R<0?(te(E,0),Y(E,-2),2):(te(E,1),Y(E,-(R+1)),R+1)},running:function(E){return te(E,ea(E)),2},status:function(E){var X=se(E);if(E===X)Q(E,"running");else switch(De(X)){case b:Q(E,"suspended");break;case s:var R=new y;Ne(X,0,R)>0?Q(E,"normal"):K(X)===0?Q(E,"dead"):Q(E,"suspended");break;default:Q(E,"dead")}return 1},wrap:function(E){return C(E),ne(E,P,1),1},yield:function(E){return G(E,K(E))}};e.exports.luaopen_coroutine=function(E){return de(E,T),1}},function(e,ga,d){var o=d(3).LUA_MAXINTEGER,s=d(2),m=s.LUA_OPEQ,ge=s.LUA_OPLT,b=s.LUA_TFUNCTION,y=s.LUA_TNIL,N=s.LUA_TTABLE,pe=s.lua_call,q=s.lua_checkstack,Ne=s.lua_compare,K=s.lua_createtable,Y=s.lua_geti,Le=s.lua_getmetatable,fe=s.lua_gettop,Ge=s.lua_insert,te=s.lua_isnil,ne=s.lua_isnoneornil,Q=s.lua_isstring,ea=s.lua_pop,Pe=s.lua_pushinteger,Xe=s.lua_pushnil,De=s.lua_pushstring,aa=s.lua_pushvalue,w=s.lua_rawget,j=s.lua_setfield,I=s.lua_seti,G=s.lua_settop,Oe=s.lua_toboolean,me=s.lua_type,Z=d(7),de=Z.luaL_Buffer,We=Z.luaL_addlstring,se=Z.luaL_addvalue,Ue=Z.luaL_argcheck,P=Z.luaL_buffinit,C=Z.luaL_checkinteger,T=Z.luaL_checktype,E=Z.luaL_error,X=Z.luaL_len,R=Z.luaL_newlib,_e=Z.luaL_opt,Te=Z.luaL_optinteger,na=Z.luaL_optlstring,qe=Z.luaL_pushresult,fa=Z.luaL_typename,va=d(17),U=d(5).to_luastring,S=function(z,je,Ke){return De(z,je),w(z,-Ke)!==y},ve=function(z,je,Ke){if(me(z,je)!==N){var i=1;!Le(z,je)||1&Ke&&!S(z,U("__index",!0),++i)||2&Ke&&!S(z,U("__newindex",!0),++i)||4&Ke&&!S(z,U("__len",!0),++i)?T(z,je,N):ea(z,i)}},F=function(z,je,Ke){return ve(z,je,4|Ke),X(z,je)},Je=function(z,je,Ke){Y(z,1,Ke),Q(z,-1)||E(z,U("invalid value (%s) at index %d in table for 'concat'"),fa(z,-1),Ke),se(je)},Ye=function(z,je,Ke){I(z,1,je),I(z,1,Ke)},Ze=function(z,je,Ke){if(te(z,2))return Ne(z,je,Ke,ge);aa(z,2),aa(z,je-1),aa(z,Ke-2),pe(z,2,1);var i=Oe(z,-1);return ea(z,1),i},he=function(z,je,Ke){for(var i=je,$=Ke-1;;){for(;Y(z,1,++i),Ze(z,-1,-2);)i==Ke-1&&E(z,U("invalid order function for sorting")),ea(z,1);for(;Y(z,1,--$),Ze(z,-3,-1);)$<i&&E(z,U("invalid order function for sorting")),ea(z,1);if($<i)return ea(z,1),Ye(z,Ke-1,i),i;Ye(z,i,$)}},ha=function(z,je,Ke){var i=Math.floor((je-z)/4),$=Ke%(2*i)+(z+i);return va.lua_assert(z+i<=$&&$<=je-i),$},La={concat:function(z){var je=F(z,1,1),Ke=na(z,2,""),i=Ke.length,$=Te(z,3,1);je=Te(z,4,je);var ke=new de;for(P(z,ke);$<je;$++)Je(z,ke,$),We(ke,Ke,i);return $===je&&Je(z,ke,$),qe(ke),1},insert:function(z){var je,Ke=F(z,1,3)+1;switch(fe(z)){case 2:je=Ke;break;case 3:je=C(z,2),Ue(z,1<=je&&je<=Ke,2,"position out of bounds");for(var i=Ke;i>je;i--)Y(z,1,i-1),I(z,1,i);break;default:return E(z,"wrong number of arguments to 'insert'")}return I(z,1,je),0},move:function(z){var je=C(z,2),Ke=C(z,3),i=C(z,4),$=ne(z,5)?1:5;if(ve(z,1,1),ve(z,$,2),Ke>=je){Ue(z,je>0||Ke<o+je,3,"too many elements to move");var ke=Ke-je+1;if(Ue(z,i<=o-ke+1,4,"destination wrap around"),i>Ke||i<=je||$!==1&&Ne(z,1,$,m)!==1)for(var Qe=0;Qe<ke;Qe++)Y(z,1,je+Qe),I(z,$,i+Qe);else for(var sa=ke-1;sa>=0;sa--)Y(z,1,je+sa),I(z,$,i+sa)}return aa(z,$),1},pack:function(z){var je=fe(z);K(z,je,1),Ge(z,1);for(var Ke=je;Ke>=1;Ke--)I(z,1,Ke);return Pe(z,je),j(z,1,U("n")),1},remove:function(z){var je=F(z,1,3),Ke=Te(z,2,je);for(Ke!==je&&Ue(z,1<=Ke&&Ke<=je+1,1,"position out of bounds"),Y(z,1,Ke);Ke<je;Ke++)Y(z,1,Ke+1),I(z,1,Ke);return Xe(z),I(z,1,Ke),1},sort:function(z){var je=F(z,1,3);return je>1&&(Ue(z,je<o,1,"array too big"),ne(z,2)||T(z,2,b),G(z,2),(function Ke(i,$,ke,Qe){for(;$<ke;){if(Y(i,1,$),Y(i,1,ke),Ze(i,-1,-2)?Ye(i,$,ke):ea(i,2),ke-$==1)return;var sa=void 0;if(sa=ke-$<100||Qe===0?Math.floor(($+ke)/2):ha($,ke,Qe),Y(i,1,sa),Y(i,1,$),Ze(i,-2,-1)?Ye(i,sa,$):(ea(i,1),Y(i,1,ke),Ze(i,-1,-2)?Ye(i,sa,ke):ea(i,2)),ke-$==2)return;Y(i,1,sa),aa(i,-1),Y(i,1,ke-1),Ye(i,sa,ke-1);var xa=void 0;(sa=he(i,$,ke))-$<ke-sa?(Ke(i,$,sa-1,Qe),xa=sa-$,$=sa+1):(Ke(i,sa+1,ke,Qe),xa=ke-sa,ke=sa-1),(ke-$)/128>xa&&(Qe=Math.floor(4294967296*Math.random()))}})(z,1,je,0)),0},unpack:function(z){var je=Te(z,2,1),Ke=_e(z,C,3,X(z,1));if(je>Ke)return 0;var i=Ke-je;if(i>=Number.MAX_SAFE_INTEGER||!q(z,++i))return E(z,U("too many results to unpack"));for(;je<Ke;je++)Y(z,1,je);return Y(z,1,Ke),i}};e.exports.luaopen_table=function(z){return R(z,La),1}},function(e,ga,d){var o=d(2),s=o.LUA_TNIL,m=o.LUA_TTABLE,ge=(o.lua_close,o.lua_createtable),b=o.lua_getfield,y=(o.lua_isboolean,o.lua_isnoneornil),N=o.lua_pop,pe=(o.lua_pushboolean,o.lua_pushfstring),q=o.lua_pushinteger,Ne=(o.lua_pushliteral,o.lua_pushnil,o.lua_pushnumber),K=(o.lua_pushstring,o.lua_setfield),Y=o.lua_settop,Le=(o.lua_toboolean,o.lua_tointegerx),fe=d(7),Ge=fe.luaL_Buffer,te=fe.luaL_addchar,ne=fe.luaL_addstring,Q=fe.luaL_argerror,ea=fe.luaL_buffinit,Pe=fe.luaL_checkinteger,Xe=(fe.luaL_checkstring,fe.luaL_checktype),De=fe.luaL_error,aa=(fe.luaL_execresult,fe.luaL_fileresult,fe.luaL_newlib),w=(fe.luaL_optinteger,fe.luaL_optlstring),j=(fe.luaL_optstring,fe.luaL_pushresult),I=d(5),G=I.luastring_eq,Oe=(I.to_jsstring,I.to_luastring),me=Oe("aAbBcCdDeFhHIjklmMnpPrRStTuUwWxXyYzZ%"),Z=function(R,_e,Te){q(R,Te),K(R,-2,Oe(_e,!0))},de=function(R,_e,Te){Z(R,"sec",Te?_e.getUTCSeconds():_e.getSeconds()),Z(R,"min",Te?_e.getUTCMinutes():_e.getMinutes()),Z(R,"hour",Te?_e.getUTCHours():_e.getHours()),Z(R,"day",Te?_e.getUTCDate():_e.getDate()),Z(R,"month",(Te?_e.getUTCMonth():_e.getMonth())+1),Z(R,"year",Te?_e.getUTCFullYear():_e.getFullYear()),Z(R,"wday",(Te?_e.getUTCDay():_e.getDay())+1),Z(R,"yday",Math.floor((_e-new Date(_e.getFullYear(),0,0))/864e5))},We=Number.MAX_SAFE_INTEGER/2,se=function(R,_e,Te,na){var qe=b(R,-1,Oe(_e,!0)),fa=Le(R,-1);if(fa===!1){if(qe!==s)return De(R,Oe("field '%s' is not an integer"),_e);if(Te<0)return De(R,Oe("field '%s' missing in date table"),_e);fa=Te}else{if(!(-We<=fa&&fa<=We))return De(R,Oe("field '%s' is out-of-bound"),_e);fa-=na}return N(R,1),fa},Ue={days:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"].map(function(R){return Oe(R)}),shortDays:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"].map(function(R){return Oe(R)}),months:["January","February","March","April","May","June","July","August","September","October","November","December"].map(function(R){return Oe(R)}),shortMonths:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"].map(function(R){return Oe(R)}),AM:Oe("AM"),PM:Oe("PM"),am:Oe("am"),pm:Oe("pm"),formats:{c:Oe("%a %b %e %H:%M:%S %Y"),D:Oe("%m/%d/%y"),F:Oe("%Y-%m-%d"),R:Oe("%H:%M"),r:Oe("%I:%M:%S %p"),T:Oe("%H:%M:%S"),X:Oe("%T"),x:Oe("%D")}},P=function(R,_e){var Te=R.getDay();_e==="monday"&&(Te===0?Te=6:Te--);var na=(R-new Date(R.getFullYear(),0,1))/864e5;return Math.floor((na+7-Te)/7)},C=function(R,_e,Te){_e<10&&te(R,Te),ne(R,Oe(String(_e)))},T=function(R,_e,Te){for(var na=me,qe=0,fa=1;qe<na.length&&fa<=_e.length-Te;qe+=fa)if(na[qe]===124)fa++;else if(G(_e.subarray(Te,Te+fa),na.subarray(qe,qe+fa)))return fa;Q(R,1,pe(R,Oe("invalid conversion specifier '%%%s'"),_e))},E=function(R,_e){return Pe(R,_e)},X={date:function(R){var _e=w(R,1,"%c"),Te=y(R,2)?new Date:new Date(1e3*E(R,2)),na=!1,qe=0;if(_e[qe]===33&&(na=!0,qe++),_e[qe]===42&&_e[qe+1]===116)ge(R,0,9),de(R,Te,na);else{new Uint8Array(4)[0]=37;var fa=new Ge;ea(R,fa),(function va(U,S,ve,F){for(var Je=0;Je<ve.length;)if(ve[Je]!==37)te(S,ve[Je++]);else{var Ye=T(U,ve,++Je);switch(ve[Je]){case 37:te(S,37);break;case 65:ne(S,Ue.days[F.getDay()]);break;case 66:ne(S,Ue.months[F.getMonth()]);break;case 67:C(S,Math.floor(F.getFullYear()/100),48);break;case 68:va(U,S,Ue.formats.D,F);break;case 70:va(U,S,Ue.formats.F,F);break;case 72:C(S,F.getHours(),48);break;case 73:C(S,(F.getHours()+11)%12+1,48);break;case 77:C(S,F.getMinutes(),48);break;case 80:ne(S,F.getHours()<12?Ue.am:Ue.pm);break;case 82:va(U,S,Ue.formats.R,F);break;case 83:C(S,F.getSeconds(),48);break;case 84:va(U,S,Ue.formats.T,F);break;case 85:C(S,P(F,"sunday"),48);break;case 87:C(S,P(F,"monday"),48);break;case 88:va(U,S,Ue.formats.X,F);break;case 89:ne(S,Oe(String(F.getFullYear())));break;case 90:var Ze=F.toString().match(/\(([\w\s]+)\)/);Ze&&ne(S,Oe(Ze[1]));break;case 97:ne(S,Ue.shortDays[F.getDay()]);break;case 98:case 104:ne(S,Ue.shortMonths[F.getMonth()]);break;case 99:va(U,S,Ue.formats.c,F);break;case 100:C(S,F.getDate(),48);break;case 101:C(S,F.getDate(),32);break;case 106:var he=Math.floor((F-new Date(F.getFullYear(),0,1))/864e5);he<100&&(he<10&&te(S,48),te(S,48)),ne(S,Oe(String(he)));break;case 107:C(S,F.getHours(),32);break;case 108:C(S,(F.getHours()+11)%12+1,32);break;case 109:C(S,F.getMonth()+1,48);break;case 110:te(S,10);break;case 112:ne(S,F.getHours()<12?Ue.AM:Ue.PM);break;case 114:va(U,S,Ue.formats.r,F);break;case 115:ne(S,Oe(String(Math.floor(F/1e3))));break;case 116:te(S,8);break;case 117:var ha=F.getDay();ne(S,Oe(String(ha===0?7:ha)));break;case 119:ne(S,Oe(String(F.getDay())));break;case 120:va(U,S,Ue.formats.x,F);break;case 121:C(S,F.getFullYear()%100,48);break;case 122:var La=F.getTimezoneOffset();La>0?te(S,45):(La=-La,te(S,43)),C(S,Math.floor(La/60),48),C(S,La%60,48)}Je+=Ye}})(R,fa,_e,Te),j(fa)}return 1},difftime:function(R){var _e=E(R,1),Te=E(R,2);return Ne(R,_e-Te),1},time:function(R){var _e;return y(R,1)?_e=new Date:(Xe(R,1,m),Y(R,1),_e=new Date(se(R,"year",-1,0),se(R,"month",-1,1),se(R,"day",-1,0),se(R,"hour",12,0),se(R,"min",0,0),se(R,"sec",0,0)),de(R,_e)),q(R,Math.floor(_e/1e3)),1}};X.clock=function(R){return Ne(R,performance.now()/1e3),1},e.exports.luaopen_os=function(R){return aa(R,X),1}},function(e,ga,d){function o(t,O){if(!(t instanceof O))throw new TypeError("Cannot call a class as a function")}var s=d(38).sprintf,m=d(3),ge=m.LUA_INTEGER_FMT,b=m.LUA_INTEGER_FRMLEN,y=m.LUA_MININTEGER,N=m.LUA_NUMBER_FMT,pe=m.LUA_NUMBER_FRMLEN,q=m.frexp,Ne=m.lua_getlocaledecpoint,K=d(2),Y=K.LUA_TBOOLEAN,Le=K.LUA_TFUNCTION,fe=K.LUA_TNIL,Ge=K.LUA_TNUMBER,te=K.LUA_TSTRING,ne=K.LUA_TTABLE,Q=K.lua_call,ea=K.lua_createtable,Pe=K.lua_dump,Xe=K.lua_gettable,De=K.lua_gettop,aa=K.lua_isinteger,w=K.lua_isstring,j=K.lua_pop,I=K.lua_pushcclosure,G=K.lua_pushinteger,Oe=K.lua_pushlightuserdata,me=K.lua_pushliteral,Z=K.lua_pushlstring,de=K.lua_pushnil,We=K.lua_pushnumber,se=K.lua_pushstring,Ue=K.lua_pushvalue,P=K.lua_remove,C=K.lua_setfield,T=K.lua_setmetatable,E=K.lua_settop,X=K.lua_toboolean,R=K.lua_tointeger,_e=K.lua_tonumber,Te=K.lua_tostring,na=K.lua_touserdata,qe=K.lua_type,fa=K.lua_upvalueindex,va=d(7),U=va.luaL_Buffer,S=va.luaL_addchar,ve=va.luaL_addlstring,F=va.luaL_addsize,Je=va.luaL_addstring,Ye=va.luaL_addvalue,Ze=va.luaL_argcheck,he=va.luaL_argerror,ha=va.luaL_buffinit,La=va.luaL_buffinitsize,z=va.luaL_checkinteger,je=va.luaL_checknumber,Ke=va.luaL_checkstack,i=va.luaL_checkstring,$=va.luaL_checktype,ke=va.luaL_error,Qe=va.luaL_newlib,sa=va.luaL_optinteger,xa=va.luaL_optstring,Ma=va.luaL_prepbuffsize,_a=va.luaL_pushresult,Ua=va.luaL_pushresultsize,Ra=va.luaL_tolstring,Va=va.luaL_typename,h=d(17),ce=d(5),Se=ce.luastring_eq,Ee=ce.luastring_indexOf,xe=ce.to_jsstring,ee=ce.to_luastring,ra=37,da=function(t){var O=Ee(t,0);return O>-1?O:t.length},Oa=function(t,O){return t>=0?t:0-t>O?0:O+t+1},Ea=function(t,O,k,D){return ve(D,O,k),0},Ia=pe.length+1,pa=function(t,O,k){var D=(function(ia){if(Object.is(ia,1/0))return ee("inf");if(Object.is(ia,-1/0))return ee("-inf");if(Number.isNaN(ia))return ee("nan");if(ia===0){var ma=s(N+"x0p+0",ia);return Object.is(ia,-0)&&(ma="-"+ma),ee(ma)}var u="",g=q(ia),V=g[0],we=g[1];return V<0&&(u+="-",V=-V),u+="0x",u+=(2*V).toString(16),u+=s("p%+d",we-=1),ee(u)})(k);if(O[Ia]===65)for(var ae=0;ae<D.length;ae++){var re=D[ae];re>=97&&(D[ae]=223&re)}else O[Ia]!==97&&ke(t,ee("modifiers for format '%%a'/'%%A' not implemented"));return D},a=ee("-+ #0"),p=function(t){return 97<=t&&t<=122||65<=t&&t<=90},r=function(t){return 48<=t&&t<=57},n=function(t){return 0<=t&&t<=31||t===127},L=function(t){return 33<=t&&t<=126},l=function(t){return 97<=t&&t<=122},_=function(t){return 65<=t&&t<=90},B=function(t){return 97<=t&&t<=122||65<=t&&t<=90||48<=t&&t<=57},A=function(t){return L(t)&&!B(t)},M=function(t){return t===32||t>=9&&t<=13},ue=function(t){return 48<=t&&t<=57||65<=t&&t<=70||97<=t&&t<=102},oe=function(t,O,k){switch(qe(t,k)){case te:var D=Te(t,k);(function(ma,u,g){S(ma,34);for(var V=0;g--;){if(u[V]===34||u[V]===92||u[V]===10)S(ma,92),S(ma,u[V]);else if(n(u[V])){var we=""+u[V];r(u[V+1])&&(we="0".repeat(3-we.length)+we),Je(ma,ee("\\"+we))}else S(ma,u[V]);V++}S(ma,34)})(O,D,D.length);break;case Ge:var ae;if(aa(t,k)){var re=R(t,k);ae=ee(s(re===y?"0x%"+b+"x":ge,re))}else{var ia=_e(t,k);(function(ma){if(Ee(ma,46)<0){var u=Ne(),g=Ee(ma,u);g&&(ma[g]=46)}})(ae=pa(t,ee("%".concat(b,"a")),ia))}Je(O,ae);break;case fe:case Y:Ra(t,k),Ye(O);break;default:he(t,k,ee("value has no literal form"))}},Ta=function(t,O,k,D){for(var ae=k;O[ae]!==0&&Ee(a,O[ae])>=0;)ae++;ae-k>=a.length&&ke(t,ee("invalid format (repeated flags)")),r(O[ae])&&ae++,r(O[ae])&&ae++,O[ae]===46&&(r(O[++ae])&&ae++,r(O[ae])&&ae++),r(O[ae])&&ke(t,ee("invalid format (width or precision too long)")),D[0]=37;for(var re=0;re<ae-k+1;re++)D[re+1]=O[k+re];return ae},Ve=function(t,O){for(var k=t.length,D=O.length,ae=t[k-1],re=0;re<D;re++)t[re+k-1]=O[re];t[k+D-1]=ae},H=function t(O){o(this,t),this.L=O,this.islittle=!0,this.maxalign=1},Ae=r,He=function(t,O){if(t.off>=t.s.length||!Ae(t.s[t.off]))return O;var k=0;do k=10*k+(t.s[t.off++]-48);while(t.off<t.s.length&&Ae(t.s[t.off])&&k<=2147483638e-1);return k},$e=function(t,O,k){var D=He(O,k);return(D>16||D<=0)&&ke(t.L,ee("integral size (%d) out of limits [1,%d]"),D,16),D},ka=function(t,O){var k={opt:O.s[O.off++],size:0};switch(k.opt){case 98:return k.size=1,k.opt=0,k;case 66:return k.size=1,k.opt=1,k;case 104:return k.size=2,k.opt=0,k;case 72:return k.size=2,k.opt=1,k;case 108:return k.size=4,k.opt=0,k;case 76:return k.size=4,k.opt=1,k;case 106:return k.size=4,k.opt=0,k;case 74:case 84:return k.size=4,k.opt=1,k;case 102:return k.size=4,k.opt=2,k;case 100:case 110:return k.size=8,k.opt=2,k;case 105:return k.size=$e(t,O,4),k.opt=0,k;case 73:return k.size=$e(t,O,4),k.opt=1,k;case 115:return k.size=$e(t,O,4),k.opt=4,k;case 99:return k.size=He(O,-1),k.size===-1&&ke(t.L,ee("missing size for format option 'c'")),k.opt=3,k;case 122:return k.opt=5,k;case 120:return k.size=1,k.opt=6,k;case 88:return k.opt=7,k;case 32:break;case 60:t.islittle=!0;break;case 62:t.islittle=!1;break;case 61:t.islittle=!0;break;case 33:t.maxalign=$e(t,O,8);break;default:ke(t.L,ee("invalid format option '%c'"),k.opt)}return k.opt=8,k},Sa=function(t,O,k){var D={opt:NaN,size:NaN,ntoalign:NaN},ae=ka(t,k);D.size=ae.size,D.opt=ae.opt;var re=D.size;if(D.opt===7)if(k.off>=k.s.length||k.s[k.off]===0)he(t.L,1,ee("invalid next option for option 'X'"));else{var ia=ka(t,k);re=ia.size,(ia=ia.opt)!==3&&re!==0||he(t.L,1,ee("invalid next option for option 'X'"))}return re<=1||D.opt===3?D.ntoalign=0:(re>t.maxalign&&(re=t.maxalign),(re&re-1)!=0&&he(t.L,1,ee("format asks for alignment not power of 2")),D.ntoalign=re-(O&re-1)&re-1),D},wa=function(t,O,k,D,ae){var re=Ma(t,D);re[k?0:D-1]=255&O;for(var ia=1;ia<D;ia++)O>>=8,re[k?ia:D-1-ia]=255&O;if(ae&&D>4)for(var ma=4;ma<D;ma++)re[k?ma:D-1-ma]=255;F(t,D)},Fa=function(t,O,k,D,ae){for(var re=0,ia=D<=4?D:4,ma=ia-1;ma>=0;ma--)re<<=8,re|=O[k?ma:D-1-ma];if(D<4){if(ae){var u=1<<8*D-1;re=(re^u)-u}}else if(D>4)for(var g=!ae||re>=0?0:255,V=ia;V<D;V++)O[k?V:D-1-V]!==g&&ke(t,ee("%d-byte integer does not fit into Lua Integer"),D);return re},Qa=function(t,O,k,D){h.lua_assert(O.length>=D);for(var ae=new DataView(new ArrayBuffer(D)),re=0;re<D;re++)ae.setUint8(re,O[re],k);return D==4?ae.getFloat32(0,k):ae.getFloat64(0,k)},v=ee("^$*+?.([%-"),ie=function t(O){o(this,t),this.src=null,this.src_init=null,this.src_end=null,this.p=null,this.p_end=null,this.L=O,this.matchdepth=NaN,this.level=NaN,this.capture=[]},Ie=function(t,O){switch(t.p[O++]){case ra:return O===t.p_end&&ke(t.L,ee("malformed pattern (ends with '%%')")),O+1;case 91:t.p[O]===94&&O++;do O===t.p_end&&ke(t.L,ee("malformed pattern (missing ']')")),t.p[O++]===ra&&O<t.p_end&&O++;while(t.p[O]!==93);return O+1;default:return O}},ta=function(t,O){switch(O){case 97:return p(t);case 65:return!p(t);case 99:return n(t);case 67:return!n(t);case 100:return r(t);case 68:return!r(t);case 103:return L(t);case 71:return!L(t);case 108:return l(t);case 76:return!l(t);case 112:return A(t);case 80:return!A(t);case 115:return M(t);case 83:return!M(t);case 117:return _(t);case 85:return!_(t);case 119:return B(t);case 87:return!B(t);case 120:return ue(t);case 88:return!ue(t);case 122:return t===0;case 90:return t!==0;default:return O===t}},la=function(t,O,k,D){var ae=!0;for(t.p[k+1]===94&&(ae=!1,k++);++k<D;)if(t.p[k]===ra){if(k++,ta(O,t.p[k]))return ae}else if(t.p[k+1]===45&&k+2<D){if(k+=2,t.p[k-2]<=O&&O<=t.p[k])return ae}else if(t.p[k]===O)return ae;return!ae},ua=function(t,O,k,D){if(O>=t.src_end)return!1;var ae=t.src[O];switch(t.p[k]){case 46:return!0;case ra:return ta(ae,t.p[k+1]);case 91:return la(t,ae,k,D-1);default:return t.p[k]===ae}},Pa=function(t,O,k){if(k>=t.p_end-1&&ke(t.L,ee("malformed pattern (missing arguments to '%%b'")),t.src[O]!==t.p[k])return null;for(var D=t.p[k],ae=t.p[k+1],re=1;++O<t.src_end;)if(t.src[O]===ae){if(--re==0)return O+1}else t.src[O]===D&&re++;return null},za=function(t,O,k,D){for(var ae=0;ua(t,O+ae,k,D);)ae++;for(;ae>=0;){var re=Ya(t,O+ae,D+1);if(re)return re;ae--}return null},Xa=function(t,O,k,D){for(;;){var ae=Ya(t,O,D+1);if(ae!==null)return ae;if(!ua(t,O,k,D))return null;O++}},ja=function(t,O,k,D){var ae,re=t.level;return re>=32&&ke(t.L,ee("too many captures")),t.capture[re]=t.capture[re]?t.capture[re]:{},t.capture[re].init=O,t.capture[re].len=D,t.level=re+1,(ae=Ya(t,O,k))===null&&t.level--,ae},Ka=function(t,O,k){var D,ae=(function(re){var ia=re.level;for(ia--;ia>=0;ia--)if(re.capture[ia].len===-1)return ia;return ke(re.L,ee("invalid pattern capture"))})(t);return t.capture[ae].len=O-t.capture[ae].init,(D=Ya(t,O,k))===null&&(t.capture[ae].len=-1),D},Ga=function(t,O,k){k=(function(ae,re){return(re-=49)<0||re>=ae.level||ae.capture[re].len===-1?ke(ae.L,ee("invalid capture index %%%d"),re+1):re})(t,k);var D=t.capture[k].len;return t.src_end-O>=D&&(function(ae,re,ia,ma,u){return Se(ae.subarray(re,re+u),ia.subarray(ma,ma+u))})(t.src,t.capture[k].init,t.src,O,D)?O+D:null},Ya=function t(O,k,D){var ae=!1,re=!0;for(O.matchdepth--==0&&ke(O.L,ee("pattern too complex"));re||ae;)if(re=!1,D!==O.p_end)switch(ae?void 0:O.p[D]){case 40:k=O.p[D+1]===41?ja(O,k,D+2,-2):ja(O,k,D+1,-1);break;case 41:k=Ka(O,k,D+1);break;case 36:if(D+1!==O.p_end){ae=!0;break}k=O.src.length-k==0?k:null;break;case ra:switch(O.p[D+1]){case 98:(k=Pa(O,k,D+2))!==null&&(D+=4,re=!0);break;case 102:D+=2,O.p[D]!==91&&ke(O.L,ee("missing '[' after '%%f' in pattern"));var ia=Ie(O,D),ma=k===O.src_init?0:O.src[k-1];if(!la(O,ma,D,ia-1)&&la(O,k===O.src_end?0:O.src[k],D,ia-1)){D=ia,re=!0;break}k=null;break;case 48:case 49:case 50:case 51:case 52:case 53:case 54:case 55:case 56:case 57:(k=Ga(O,k,O.p[D+1]))!==null&&(D+=2,re=!0);break;default:ae=!0}break;default:ae=!1;var u=Ie(O,D);if(ua(O,k,D,u))switch(O.p[u]){case 63:var g;(g=t(O,k+1,u+1))!==null?k=g:(D=u+1,re=!0);break;case 43:k++;case 42:k=za(O,k,D,u);break;case 45:k=Xa(O,k,D,u);break;default:k++,D=u,re=!0}else{if(O.p[u]===42||O.p[u]===63||O.p[u]===45){D=u+1,re=!0;break}k=null}}return O.matchdepth++,k},c=function(t,O,k,D){if(O>=t.level)O===0?Z(t.L,t.src.subarray(k,D),D-k):ke(t.L,ee("invalid capture index %%%d"),O+1);else{var ae=t.capture[O].len;ae===-1&&ke(t.L,ee("unfinished capture")),ae===-2?G(t.L,t.capture[O].init-t.src_init+1):Z(t.L,t.src.subarray(t.capture[O].init),ae)}},J=function(t,O,k){var D=t.level===0&&t.src.subarray(O)?1:t.level;Ke(t.L,D,"too many captures");for(var ae=0;ae<D;ae++)c(t,ae,O,k);return D},Re=function(t,O,k,D,ae,re){t.L=O,t.matchdepth=200,t.src=k,t.src_init=0,t.src_end=D,t.p=ae,t.p_end=re},Me=function(t){t.level=0,h.lua_assert(t.matchdepth===200)},ze=function(t,O){var k=i(t,1),D=i(t,2),ae=k.length,re=D.length,ia=Oa(sa(t,3,1),ae);if(ia<1)ia=1;else if(ia>ae+1)return de(t),1;if(O&&(X(t,4)||(function(ca,ba){for(var Na=0;Na<ba;Na++)if(Ee(v,ca[Na])!==-1)return!1;return!0})(D,re))){var ma=(function(ca,ba,Na){var Da=Na>>>0,Za=ba.length;if(Za===0)return Da;for(;(Da=ca.indexOf(ba[0],Da))!==-1;Da++)if(Se(ca.subarray(Da,Da+Za),ba))return Da;return-1})(k.subarray(ia-1),D,0);if(ma>-1)return G(t,ia+ma),G(t,ia+ma+re-1),2}else{var u=new ie(t),g=ia-1,V=D[0]===94;V&&(D=D.subarray(1),re--),Re(u,t,k,ae,D,re);do{var we;if(Me(u),(we=Ya(u,g,0))!==null)return O?(G(t,g+1),G(t,we),J(u,null,0)+2):J(u,g,we)}while(g++<u.src_end&&!V)}return de(t),1},Be=function(t){var O=na(t,fa(3));O.ms.L=t;for(var k=O.src;k<=O.ms.src_end;k++){Me(O.ms);var D;if((D=Ya(O.ms,k,O.p))!==null&&D!==O.lastmatch)return O.src=O.lastmatch=D,J(O.ms,k,D)}return 0},Ce=function(t,O,k,D,ae){var re=t.L;switch(ae){case Le:Ue(re,3);var ia=J(t,k,D);Q(re,ia,1);break;case ne:c(t,0,k,D),Xe(re,3);break;default:return void(function(ma,u,g,V){for(var we=ma.L,ca=Te(we,3),ba=ca.length,Na=0;Na<ba;Na++)ca[Na]!==ra?S(u,ca[Na]):r(ca[++Na])?ca[Na]===48?ve(u,ma.src.subarray(g,V),V-g):(c(ma,ca[Na]-49,g,V),Ra(we,-1),P(we,-2),Ye(u)):(ca[Na]!==ra&&ke(we,ee("invalid use of '%c' in replacement string"),ra),S(u,ca[Na]))})(t,O,k,D)}X(re,-1)?w(re,-1)||ke(re,ee("invalid replacement value (a %s)"),Va(re,-1)):(j(re,1),Z(re,t.src.subarray(k,D),D-k)),Ye(O)},Ba={byte:function(t){var O=i(t,1),k=O.length,D=Oa(sa(t,2,1),k),ae=Oa(sa(t,3,D),k);if(D<1&&(D=1),ae>k&&(ae=k),D>ae)return 0;if(ae-D>=Number.MAX_SAFE_INTEGER)return ke(t,"string slice too long");var re=ae-D+1;Ke(t,re,"string slice too long");for(var ia=0;ia<re;ia++)G(t,O[D+ia-1]);return re},char:function(t){for(var O=De(t),k=new U,D=La(t,k,O),ae=1;ae<=O;ae++){var re=z(t,ae);Ze(t,re>=0&&re<=255,"value out of range"),D[ae-1]=re}return Ua(k,O),1},dump:function(t){var O=new U,k=X(t,2);return $(t,1,Le),E(t,1),ha(t,O),Pe(t,Ea,O,k)!==0?ke(t,ee("unable to dump given function")):(_a(O),1)},find:function(t){return ze(t,1)},format:function(t){var O=De(t),k=1,D=i(t,k),ae=0,re=new U;for(ha(t,re);ae<D.length;)if(D[ae]!==ra)S(re,D[ae++]);else if(D[++ae]===ra)S(re,D[ae++]);else{var ia=[];switch(++k>O&&he(t,k,ee("no value")),ae=Ta(t,D,ae,ia),String.fromCharCode(D[ae++])){case"c":S(re,z(t,k));break;case"d":case"i":case"o":case"u":case"x":case"X":var ma=z(t,k);Ve(ia,ee(b,!0)),Je(re,ee(s(String.fromCharCode.apply(String,ia),ma)));break;case"a":case"A":Ve(ia,ee(b,!0)),Je(re,pa(t,ia,je(t,k)));break;case"e":case"E":case"f":case"g":case"G":var u=je(t,k);Ve(ia,ee(b,!0)),Je(re,ee(s(String.fromCharCode.apply(String,ia),u)));break;case"q":oe(t,re,k);break;case"s":var g=Ra(t,k);ia.length<=2||ia[2]===0?Ye(re):(Ze(t,g.length===da(g),k,"string contains zeros"),Ee(ia,46)<0&&g.length>=100?Ye(re):(Je(re,ee(s(String.fromCharCode.apply(String,ia),xe(g)))),j(t,1)));break;default:return ke(t,ee("invalid option '%%%c' to 'format'"),D[ae-1])}}return _a(re),1},gmatch:function(t){var O=i(t,1),k=i(t,2),D=O.length,ae=k.length;E(t,2);var re=new function ia(){o(this,ia),this.src=NaN,this.p=NaN,this.lastmatch=NaN,this.ms=new ie};return Oe(t,re),Re(re.ms,t,O,D,k,ae),re.src=0,re.p=0,re.lastmatch=null,I(t,Be,3),1},gsub:function(t){var O=i(t,1),k=O.length,D=i(t,2),ae=D.length,re=null,ia=qe(t,3),ma=sa(t,4,k+1),u=D[0]===94,g=0,V=new ie(t),we=new U;for(Ze(t,ia===Ge||ia===te||ia===Le||ia===ne,3,"string/function/table expected"),ha(t,we),u&&(D=D.subarray(1),ae--),Re(V,t,O,k,D,ae),O=0,D=0;g<ma;){var ca;if(Me(V),(ca=Ya(V,O,D))!==null&&ca!==re)g++,Ce(V,we,O,ca,ia),O=re=ca;else{if(!(O<V.src_end))break;S(we,V.src[O++])}if(u)break}return ve(we,V.src.subarray(O,V.src_end),V.src_end-O),_a(we),G(t,g),2},len:function(t){return G(t,i(t,1).length),1},lower:function(t){for(var O=i(t,1),k=O.length,D=new Uint8Array(k),ae=0;ae<k;ae++){var re=O[ae];_(re)&&(re|=32),D[ae]=re}return se(t,D),1},match:function(t){return ze(t,0)},pack:function(t){var O=new U,k=new H(t),D={s:i(t,1),off:0},ae=1,re=0;for(de(t),ha(t,O);D.off<D.s.length;){var ia=Sa(k,re,D),ma=ia.opt,u=ia.size,g=ia.ntoalign;for(re+=g+u;g-- >0;)S(O,0);switch(ae++,ma){case 0:var V=z(t,ae);if(u<4){var we=1<<8*u-1;Ze(t,-we<=V&&V<we,ae,"integer overflow")}wa(O,V,k.islittle,u,V<0);break;case 1:var ca=z(t,ae);u<4&&Ze(t,ca>>>0<1<<8*u,ae,"unsigned overflow"),wa(O,ca>>>0,k.islittle,u,!1);break;case 2:var ba=Ma(O,u),Na=je(t,ae),Da=new DataView(ba.buffer,ba.byteOffset,ba.byteLength);u===4?Da.setFloat32(0,Na,k.islittle):Da.setFloat64(0,Na,k.islittle),F(O,u);break;case 3:var Za=i(t,ae),qa=Za.length;for(Ze(t,qa<=u,ae,"string longer than given size"),ve(O,Za,qa);qa++<u;)S(O,0);break;case 4:var Wa=i(t,ae),Ja=Wa.length;Ze(t,u>=4||Ja<1<<8*u,ae,"string length does not fit in given size"),wa(O,Ja,k.islittle,u,0),ve(O,Wa,Ja),re+=Ja;break;case 5:var $a=i(t,ae),tr=$a.length;Ze(t,Ee($a,0)<0,ae,"strings contains zeros"),ve(O,$a,tr),S(O,0),re+=tr+1;break;case 6:S(O,0);case 7:case 8:ae--}}return _a(O),1},packsize:function(t){for(var O=new H(t),k={s:i(t,1),off:0},D=0;k.off<k.s.length;){var ae=Sa(O,D,k),re=ae.opt,ia=ae.size,ma=ae.ntoalign;switch(Ze(t,D<=2147483647-(ia+=ma),1,"format result too large"),D+=ia,re){case 4:case 5:he(t,1,"variable-length format")}}return G(t,D),1},rep:function(t){var O=i(t,1),k=O.length,D=z(t,2),ae=xa(t,3,""),re=ae.length;if(D<=0)me(t,"");else{if(k+re<k||k+re>2147483647/D)return ke(t,ee("resulting string too large"));for(var ia=D*k+(D-1)*re,ma=new U,u=La(t,ma,ia),g=0;D-- >1;)u.set(O,g),g+=k,re>0&&(u.set(ae,g),g+=re);u.set(O,g),Ua(ma,ia)}return 1},reverse:function(t){for(var O=i(t,1),k=O.length,D=new Uint8Array(k),ae=0;ae<k;ae++)D[ae]=O[k-1-ae];return se(t,D),1},sub:function(t){var O=i(t,1),k=O.length,D=Oa(z(t,2),k),ae=Oa(sa(t,3,-1),k);return D<1&&(D=1),ae>k&&(ae=k),D<=ae?se(t,O.subarray(D-1,D-1+(ae-D+1))):me(t,""),1},unpack:function(t){var O=new H(t),k={s:i(t,1),off:0},D=i(t,2),ae=D.length,re=Oa(sa(t,3,1),ae)-1,ia=0;for(Ze(t,re<=ae&&re>=0,3,"initial position out of string");k.off<k.s.length;){var ma=Sa(O,re,k),u=ma.opt,g=ma.size,V=ma.ntoalign;switch(re+V+g>ae&&he(t,2,ee("data string too short")),re+=V,Ke(t,2,"too many results"),ia++,u){case 0:case 1:var we=Fa(t,D.subarray(re),O.islittle,g,u===0);G(t,we);break;case 2:var ca=Qa(0,D.subarray(re),O.islittle,g);We(t,ca);break;case 3:se(t,D.subarray(re,re+g));break;case 4:var ba=Fa(t,D.subarray(re),O.islittle,g,0);Ze(t,re+ba+g<=ae,2,"data string too short"),se(t,D.subarray(re+g,re+g+ba)),re+=ba;break;case 5:var Na=Ee(D,0,re);Na===-1&&(Na=D.length-re),se(t,D.subarray(re,Na)),re=Na+1;break;case 7:case 6:case 8:ia--}re+=g}return G(t,re+1),ia+1},upper:function(t){for(var O=i(t,1),k=O.length,D=new Uint8Array(k),ae=0;ae<k;ae++){var re=O[ae];l(re)&&(re&=223),D[ae]=re}return se(t,D),1}};e.exports.luaopen_string=function(t){return Qe(t,Ba),(function(O){ea(O,0,1),me(O,""),Ue(O,-2),T(O,-2),j(O,1),Ue(O,-2),C(O,-2,ee("__index",!0)),j(O,1)})(t),1}},function(e,ga,d){var o=d(2),s=o.lua_gettop,m=o.lua_pushcfunction,ge=o.lua_pushfstring,b=o.lua_pushinteger,y=o.lua_pushnil,N=o.lua_pushstring,pe=o.lua_pushvalue,q=o.lua_setfield,Ne=o.lua_tointeger,K=d(7),Y=K.luaL_Buffer,Le=K.luaL_addvalue,fe=K.luaL_argcheck,Ge=K.luaL_buffinit,te=K.luaL_checkinteger,ne=K.luaL_checkstack,Q=K.luaL_checkstring,ea=K.luaL_error,Pe=K.luaL_newlib,Xe=K.luaL_optinteger,De=K.luaL_pushresult,aa=d(5),w=aa.luastring_of,j=aa.to_luastring,I=function(P){return(192&P)===128},G=function(P,C){return P>=0?P:0-P>C?0:C+P+1},Oe=[255,127,2047,65535],me=function(P,C){var T=P[C],E=0;if(T<128)E=T;else{for(var X=0;64&T;){var R=P[C+ ++X];if((192&R)!=128)return null;E=E<<6|63&R,T<<=1}if(E|=(127&T)<<5*X,X>3||E>1114111||E<=Oe[X])return null;C+=X}return{code:E,pos:C+1}},Z=j("%U"),de=function(P,C){var T=te(P,C);fe(P,0<=T&&T<=1114111,C,"value out of range"),ge(P,Z,T)},We=function(P){var C=Q(P,1),T=C.length,E=Ne(P,2)-1;if(E<0)E=0;else if(E<T)for(E++;I(C[E]);)E++;if(E>=T)return 0;var X=me(C,E);return X===null||I(C[X.pos])?ea(P,j("invalid UTF-8 code")):(b(P,E+1),b(P,X.code),2)},se={char:function(P){var C=s(P);if(C===1)de(P,1);else{var T=new Y;Ge(P,T);for(var E=1;E<=C;E++)de(P,E),Le(T);De(T)}return 1},codepoint:function(P){var C=Q(P,1),T=G(Xe(P,2,1),C.length),E=G(Xe(P,3,T),C.length);if(fe(P,T>=1,2,"out of range"),fe(P,E<=C.length,3,"out of range"),T>E)return 0;if(E-T>=Number.MAX_SAFE_INTEGER)return ea(P,"string slice too long");var X=E-T+1;for(ne(P,X,"string slice too long"),X=0,T-=1;T<E;){var R=me(C,T);if(R===null)return ea(P,"invalid UTF-8 code");b(P,R.code),T=R.pos,X++}return X},codes:function(P){return Q(P,1),m(P,We),pe(P,1),b(P,0),3},len:function(P){var C=0,T=Q(P,1),E=T.length,X=G(Xe(P,2,1),E),R=G(Xe(P,3,-1),E);for(fe(P,1<=X&&--X<=E,2,"initial position out of string"),fe(P,--R<E,3,"final position out of string");X<=R;){var _e=me(T,X);if(_e===null)return y(P),b(P,X+1),2;X=_e.pos,C++}return b(P,C),1},offset:function(P){var C=Q(P,1),T=te(P,2),E=T>=0?1:C.length+1;if(E=G(Xe(P,3,E),C.length),fe(P,1<=E&&--E<=C.length,3,"position out of range"),T===0)for(;E>0&&I(C[E]);)E--;else if(I(C[E])&&ea(P,"initial position is a continuation byte"),T<0)for(;T<0&&E>0;){do E--;while(E>0&&I(C[E]));T++}else for(T--;T>0&&E<C.length;){do E++;while(I(C[E]));T--}return T===0?b(P,E+1):y(P),1}},Ue=w(91,0,45,127,194,45,244,93,91,128,45,191,93,42);e.exports.luaopen_utf8=function(P){return Pe(P,se),N(P,Ue),q(P,-2,j("charpattern",!0)),1}},function(e,ga,d){var o,s=d(2),m=s.LUA_OPLT,ge=s.LUA_TNUMBER,b=s.lua_compare,y=s.lua_gettop,N=s.lua_isinteger,pe=s.lua_isnoneornil,q=s.lua_pushboolean,Ne=s.lua_pushinteger,K=s.lua_pushliteral,Y=s.lua_pushnil,Le=s.lua_pushnumber,fe=s.lua_pushvalue,Ge=s.lua_setfield,te=s.lua_settop,ne=s.lua_tointeger,Q=s.lua_tointegerx,ea=s.lua_type,Pe=d(7),Xe=Pe.luaL_argcheck,De=Pe.luaL_argerror,aa=Pe.luaL_checkany,w=Pe.luaL_checkinteger,j=Pe.luaL_checknumber,I=Pe.luaL_error,G=Pe.luaL_newlib,Oe=Pe.luaL_optnumber,me=d(3),Z=me.LUA_MAXINTEGER,de=me.LUA_MININTEGER,We=me.lua_numbertointeger,se=d(5).to_luastring,Ue=function(){return o=1103515245*o+12345&2147483647},P=function(T,E){var X=We(E);X!==!1?Ne(T,X):Le(T,E)},C={abs:function(T){if(N(T,1)){var E=ne(T,1);E<0&&(E=0|-E),Ne(T,E)}else Le(T,Math.abs(j(T,1)));return 1},acos:function(T){return Le(T,Math.acos(j(T,1))),1},asin:function(T){return Le(T,Math.asin(j(T,1))),1},atan:function(T){var E=j(T,1),X=Oe(T,2,1);return Le(T,Math.atan2(E,X)),1},ceil:function(T){return N(T,1)?te(T,1):P(T,Math.ceil(j(T,1))),1},cos:function(T){return Le(T,Math.cos(j(T,1))),1},deg:function(T){return Le(T,j(T,1)*(180/Math.PI)),1},exp:function(T){return Le(T,Math.exp(j(T,1))),1},floor:function(T){return N(T,1)?te(T,1):P(T,Math.floor(j(T,1))),1},fmod:function(T){if(N(T,1)&&N(T,2)){var E=ne(T,2);E===0?De(T,2,"zero"):Ne(T,ne(T,1)%E|0)}else{var X=j(T,1),R=j(T,2);Le(T,X%R)}return 1},log:function(T){var E,X=j(T,1);if(pe(T,2))E=Math.log(X);else{var R=j(T,2);E=R===2?Math.log2(X):R===10?Math.log10(X):Math.log(X)/Math.log(R)}return Le(T,E),1},max:function(T){var E=y(T),X=1;Xe(T,E>=1,1,"value expected");for(var R=2;R<=E;R++)b(T,X,R,m)&&(X=R);return fe(T,X),1},min:function(T){var E=y(T),X=1;Xe(T,E>=1,1,"value expected");for(var R=2;R<=E;R++)b(T,R,X,m)&&(X=R);return fe(T,X),1},modf:function(T){if(N(T,1))te(T,1),Le(T,0);else{var E=j(T,1),X=E<0?Math.ceil(E):Math.floor(E);P(T,X),Le(T,E===X?0:E-X)}return 2},rad:function(T){return Le(T,j(T,1)*(Math.PI/180)),1},random:function(T){var E,X,R=o===void 0?Math.random():Ue()/2147483648;switch(y(T)){case 0:return Le(T,R),1;case 1:E=1,X=w(T,1);break;case 2:E=w(T,1),X=w(T,2);break;default:return I(T,"wrong number of arguments")}return Xe(T,E<=X,1,"interval is empty"),Xe(T,E>=0||X<=Z+E,1,"interval too large"),R*=X-E+1,Ne(T,Math.floor(R)+E),1},randomseed:function(T){return(function(E){(o=0|E)==0&&(o=1)})(j(T,1)),Ue(),0},sin:function(T){return Le(T,Math.sin(j(T,1))),1},sqrt:function(T){return Le(T,Math.sqrt(j(T,1))),1},tan:function(T){return Le(T,Math.tan(j(T,1))),1},tointeger:function(T){var E=Q(T,1);return E!==!1?Ne(T,E):(aa(T,1),Y(T)),1},type:function(T){return ea(T,1)===ge?N(T,1)?K(T,"integer"):K(T,"float"):(aa(T,1),Y(T)),1},ult:function(T){var E=w(T,1),X=w(T,2);return q(T,E>=0?X<0||E<X:X<0&&E<X),1}};e.exports.luaopen_math=function(T){return G(T,C),Le(T,Math.PI),Ge(T,-2,se("pi",!0)),Le(T,1/0),Ge(T,-2,se("huge",!0)),Ne(T,Z),Ge(T,-2,se("maxinteger",!0)),Ne(T,de),Ge(T,-2,se("mininteger",!0)),1}},function(e,ga,d){var o,s=d(2),m=s.LUA_MASKCALL,ge=s.LUA_MASKCOUNT,b=s.LUA_MASKLINE,y=s.LUA_MASKRET,N=s.LUA_REGISTRYINDEX,pe=s.LUA_TFUNCTION,q=s.LUA_TNIL,Ne=s.LUA_TTABLE,K=s.LUA_TUSERDATA,Y=s.lua_Debug,Le=s.lua_call,fe=s.lua_checkstack,Ge=s.lua_gethook,te=s.lua_gethookcount,ne=s.lua_gethookmask,Q=s.lua_getinfo,ea=s.lua_getlocal,Pe=s.lua_getmetatable,Xe=s.lua_getstack,De=s.lua_getupvalue,aa=s.lua_getuservalue,w=s.lua_insert,j=s.lua_iscfunction,I=s.lua_isfunction,G=s.lua_isnoneornil,Oe=s.lua_isthread,me=s.lua_newtable,Z=s.lua_pcall,de=s.lua_pop,We=s.lua_pushboolean,se=s.lua_pushfstring,Ue=s.lua_pushinteger,P=s.lua_pushlightuserdata,C=s.lua_pushliteral,T=s.lua_pushnil,E=s.lua_pushstring,X=s.lua_pushvalue,R=s.lua_rawgetp,_e=s.lua_rawsetp,Te=s.lua_rotate,na=s.lua_setfield,qe=s.lua_sethook,fa=s.lua_setlocal,va=s.lua_setmetatable,U=s.lua_settop,S=s.lua_setupvalue,ve=s.lua_setuservalue,F=s.lua_tojsstring,Je=s.lua_toproxy,Ye=s.lua_tostring,Ze=s.lua_tothread,he=s.lua_touserdata,ha=s.lua_type,La=s.lua_upvalueid,z=s.lua_upvaluejoin,je=s.lua_xmove,Ke=d(7),i=Ke.luaL_argcheck,$=Ke.luaL_argerror,ke=Ke.luaL_checkany,Qe=Ke.luaL_checkinteger,sa=Ke.luaL_checkstring,xa=Ke.luaL_checktype,Ma=Ke.luaL_error,_a=Ke.luaL_loadbuffer,Ua=Ke.luaL_newlib,Ra=Ke.luaL_optinteger,Va=Ke.luaL_optstring,h=Ke.luaL_traceback,ce=Ke.lua_writestringerror,Se=d(17),Ee=d(5),xe=Ee.luastring_indexOf,ee=Ee.to_luastring,ra=function(_,B,A){_===B||fe(B,A)||Ma(_,ee("stack overflow",!0))},da=function(_){return Oe(_,1)?{arg:1,thread:Ze(_,1)}:{arg:0,thread:_}},Oa=function(_,B,A){E(_,A),na(_,-2,B)},Ea=function(_,B,A){Ue(_,A),na(_,-2,B)},Ia=function(_,B,A){We(_,A),na(_,-2,B)},pa=function(_,B,A){_==B?Te(_,-2,1):je(B,_,1),na(_,-2,A)},a=function(_,B){var A=Qe(_,2);xa(_,1,pe);var M=B?De(_,1,A):S(_,1,A);return M===null?0:(E(_,M),w(_,-(B+1)),B+1)},p=function(_,B,A){var M=Qe(_,A);return xa(_,B,pe),i(_,De(_,B,M)!==null,A,"invalid upvalue index"),M},r=ee("__hooks__",!0),n=["call","return","line","count","tail call"].map(function(_){return ee(_)}),L=function(_,B){R(_,N,r);var A=he(_,-1).get(_);A&&(A(_),E(_,n[B.event]),B.currentline>=0?Ue(_,B.currentline):T(_),Se.lua_assert(Q(_,ee("lS"),B)),Le(_,2,0))},l={gethook:function(_){var B=da(_).thread,A=new Uint8Array(5),M=ne(B),ue=Ge(B);return ue===null?T(_):ue!==L?C(_,"external hook"):(R(_,N,r),he(_,-1).get(B)(_)),E(_,(function(oe,Ta){var Ve=0;return oe&m&&(Ta[Ve++]=99),oe&y&&(Ta[Ve++]=114),oe&b&&(Ta[Ve++]=108),Ta.subarray(0,Ve)})(M,A)),Ue(_,te(B)),3},getinfo:function(_){var B=new Y,A=da(_),M=A.arg,ue=A.thread,oe=Va(_,M+2,"flnStu");if(ra(_,ue,3),I(_,M+1))oe=se(_,ee(">%s"),oe),X(_,M+1),je(_,ue,1);else if(!Xe(ue,Qe(_,M+1),B))return T(_),1;return Q(ue,oe,B)||$(_,M+2,"invalid option"),me(_),xe(oe,83)>-1&&(Oa(_,ee("source",!0),B.source),Oa(_,ee("short_src",!0),B.short_src),Ea(_,ee("linedefined",!0),B.linedefined),Ea(_,ee("lastlinedefined",!0),B.lastlinedefined),Oa(_,ee("what",!0),B.what)),xe(oe,108)>-1&&Ea(_,ee("currentline",!0),B.currentline),xe(oe,117)>-1&&(Ea(_,ee("nups",!0),B.nups),Ea(_,ee("nparams",!0),B.nparams),Ia(_,ee("isvararg",!0),B.isvararg)),xe(oe,110)>-1&&(Oa(_,ee("name",!0),B.name),Oa(_,ee("namewhat",!0),B.namewhat)),xe(oe,116)>-1&&Ia(_,ee("istailcall",!0),B.istailcall),xe(oe,76)>-1&&pa(_,ue,ee("activelines",!0)),xe(oe,102)>-1&&pa(_,ue,ee("func",!0)),1},getlocal:function(_){var B=da(_),A=B.thread,M=B.arg,ue=new Y,oe=Qe(_,M+2);if(I(_,M+1))return X(_,M+1),E(_,ea(_,null,oe)),1;var Ta=Qe(_,M+1);if(!Xe(A,Ta,ue))return $(_,M+1,"level out of range");ra(_,A,1);var Ve=ea(A,ue,oe);return Ve?(je(A,_,1),E(_,Ve),Te(_,-2,1),2):(T(_),1)},getmetatable:function(_){return ke(_,1),Pe(_,1)||T(_),1},getregistry:function(_){return X(_,N),1},getupvalue:function(_){return a(_,1)},getuservalue:function(_){return ha(_,1)!==K?T(_):aa(_,1),1},sethook:function(_){var B,A,M,ue,oe=da(_),Ta=oe.thread,Ve=oe.arg;if(G(_,Ve+1))U(_,Ve+1),M=null,B=0,A=0;else{var H=sa(_,Ve+2);xa(_,Ve+1,pe),A=Ra(_,Ve+3,0),M=L,B=(function(He,$e){var ka=0;return xe(He,99)>-1&&(ka|=m),xe(He,114)>-1&&(ka|=y),xe(He,108)>-1&&(ka|=b),$e>0&&(ka|=ge),ka})(H,A)}R(_,N,r)===q?(ue=new WeakMap,P(_,ue),_e(_,N,r)):ue=he(_,-1);var Ae=Je(_,Ve+1);return ue.set(Ta,Ae),qe(Ta,M,B,A),0},setlocal:function(_){var B=da(_),A=B.thread,M=B.arg,ue=new Y,oe=Qe(_,M+1),Ta=Qe(_,M+2);if(!Xe(A,oe,ue))return $(_,M+1,"level out of range");ke(_,M+3),U(_,M+3),ra(_,A,1),je(_,A,1);var Ve=fa(A,ue,Ta);return Ve===null&&de(A,1),E(_,Ve),1},setmetatable:function(_){var B=ha(_,2);return i(_,B==q||B==Ne,2,"nil or table expected"),U(_,2),va(_,1),1},setupvalue:function(_){return ke(_,3),a(_,0)},setuservalue:function(_){return xa(_,1,K),ke(_,2),U(_,2),ve(_,1),1},traceback:function(_){var B=da(_),A=B.thread,M=B.arg,ue=Ye(_,M+1);if(ue!==null||G(_,M+1)){var oe=Ra(_,M+2,_===A?1:0);h(_,A,ue,oe)}else X(_,M+1);return 1},upvalueid:function(_){var B=p(_,1,2);return P(_,La(_,1,B)),1},upvaluejoin:function(_){var B=p(_,1,2),A=p(_,3,4);return i(_,!j(_,1),1,"Lua function expected"),i(_,!j(_,3),3,"Lua function expected"),z(_,1,B,3,A),0}};typeof window<"u"&&(o=function(){var _=prompt("lua_debug>","");return _!==null?_:""}),o&&(l.debug=function(_){for(;;){var B=o();if(B==="cont")return 0;if(B.length!==0){var A=ee(B);(_a(_,A,A.length,ee("=(debug command)",!0))||Z(_,0,0,0))&&ce(F(_,-1),`
`),U(_,0)}}}),e.exports.luaopen_debug=function(_){return Ua(_,l),1}},function(e,ga,d){function o(H){return(o=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(Ae){return typeof Ae}:function(Ae){return Ae&&typeof Symbol=="function"&&Ae.constructor===Symbol&&Ae!==Symbol.prototype?"symbol":typeof Ae})(H)}var s,m=d(3),ge=m.LUA_DIRSEP,b=m.LUA_EXEC_DIR,y=m.LUA_JSPATH_DEFAULT,N=m.LUA_PATH_DEFAULT,pe=m.LUA_PATH_MARK,q=m.LUA_PATH_SEP,Ne=d(2),K=Ne.LUA_OK,Y=Ne.LUA_REGISTRYINDEX,Le=Ne.LUA_TNIL,fe=Ne.LUA_TTABLE,Ge=Ne.lua_callk,te=Ne.lua_createtable,ne=Ne.lua_getfield,Q=Ne.lua_insert,ea=Ne.lua_isfunction,Pe=Ne.lua_isnil,Xe=Ne.lua_isstring,De=Ne.lua_newtable,aa=Ne.lua_pop,w=Ne.lua_pushboolean,j=Ne.lua_pushcclosure,I=Ne.lua_pushcfunction,G=Ne.lua_pushfstring,Oe=Ne.lua_pushglobaltable,me=Ne.lua_pushlightuserdata,Z=Ne.lua_pushliteral,de=Ne.lua_pushlstring,We=Ne.lua_pushnil,se=Ne.lua_pushstring,Ue=Ne.lua_pushvalue,P=Ne.lua_rawgeti,C=Ne.lua_rawgetp,T=Ne.lua_rawseti,E=Ne.lua_rawsetp,X=Ne.lua_remove,R=Ne.lua_setfield,_e=Ne.lua_setmetatable,Te=Ne.lua_settop,na=Ne.lua_toboolean,qe=Ne.lua_tostring,fa=Ne.lua_touserdata,va=Ne.lua_upvalueindex,U=d(7),S=U.LUA_LOADED_TABLE,ve=U.LUA_PRELOAD_TABLE,F=U.luaL_Buffer,Je=U.luaL_addvalue,Ye=U.luaL_buffinit,Ze=U.luaL_checkstring,he=U.luaL_error,ha=U.luaL_getsubtable,La=U.luaL_gsub,z=U.luaL_len,je=U.luaL_loadfile,Ke=U.luaL_newlib,i=U.luaL_optstring,$=U.luaL_pushresult,ke=U.luaL_setfuncs,Qe=d(17),sa=d(5),xa=sa.luastring_indexOf,Ma=sa.to_jsstring,_a=sa.to_luastring,Ua=sa.to_uristring,Ra=d(0),Va=typeof window<"u"?window:typeof WorkerGlobalScope<"u"&&self instanceof WorkerGlobalScope?self:(0,eval)("this"),h=_a("__JSLIBS__"),ce=ge,Se=ge,Ee=_a("luaopen_"),xe=_a("_"),ee=_a("");s=function(H,Ae,He){Ae=Ua(Ae);var $e=new XMLHttpRequest;if($e.open("GET",Ae,!1),$e.send(),$e.status<200||$e.status>=300)return se(H,_a("".concat($e.status,": ").concat($e.statusText))),null;var ka,Sa=$e.response;/\/\/[#@] sourceURL=/.test(Sa)||(Sa+=" //# sourceURL="+Ae);try{ka=Function("fengari",Sa)}catch(Fa){return se(H,_a("".concat(Fa.name,": ").concat(Fa.message))),null}var wa=ka(Ra);return typeof wa=="function"||o(wa)==="object"&&wa!==null?wa:wa===void 0?Va:(se(H,_a("library returned unexpected type (".concat(o(wa),")"))),null)};var ra;ra=function(H){H=Ua(H);var Ae=new XMLHttpRequest;return Ae.open("GET",H,!1),Ae.send(),Ae.status>=200&&Ae.status<=299};var da=function(H,Ae,He){var $e=Ia(H,Ae);if($e===null){if(($e=s(H,Ae,He[0]===42))===null)return 1;pa(H,Ae,$e)}if(He[0]===42)return w(H,1),0;var ka=(function(Sa,wa,Fa){var Qa=wa[Ma(Fa)];return Qa&&typeof Qa=="function"?Qa:(G(Sa,_a("undefined symbol: %s"),Fa),null)})(H,$e,He);return ka===null?2:(I(H,ka),0)},Oa=Va,Ea=function(H,Ae,He,$e){var ka="".concat(He).concat(Qe.LUA_VERSUFFIX);se(H,_a(ka));var Sa=Oa[ka];Sa===void 0&&(Sa=Oa[He]),Sa===void 0||(function(wa){ne(wa,Y,_a("LUA_NOENV"));var Fa=na(wa,-1);return aa(wa,1),Fa})(H)?se(H,$e):(Sa=La(H,_a(Sa),_a(q+q,!0),_a(q+Ma(ee)+q,!0)),La(H,Sa,ee,$e),X(H,-2)),R(H,-3,Ae),aa(H,1)},Ia=function(H,Ae){C(H,Y,h),ne(H,-1,Ae);var He=fa(H,-1);return aa(H,2),He},pa=function(H,Ae,He){C(H,Y,h),me(H,He),Ue(H,-1),R(H,-3,Ae),T(H,-2,z(H,-2)+1),aa(H,1)},a=function(H,Ae){for(;Ae[0]===q.charCodeAt(0);)Ae=Ae.subarray(1);if(Ae.length===0)return null;var He=xa(Ae,q.charCodeAt(0));return He<0&&(He=Ae.length),de(H,Ae,He),Ae.subarray(He)},p=function(H,Ae,He,$e,ka){var Sa=new F;for(Ye(H,Sa),$e[0]!==0&&(Ae=La(H,Ae,$e,ka));(He=a(H,He))!==null;){var wa=La(H,qe(H,-1),_a(pe,!0),Ae);if(X(H,-2),ra(wa))return wa;G(H,_a(`
	no file '%s'`),wa),X(H,-2),Je(Sa)}return $(Sa),null},r=function(H,Ae,He,$e){ne(H,va(1),He);var ka=qe(H,-1);return ka===null&&he(H,_a("'package.%s' must be a string"),He),p(H,Ae,ka,_a("."),$e)},n=function(H,Ae,He){return Ae?(se(H,He),2):he(H,_a(`error loading module '%s' from file '%s':
	%s`),qe(H,1),He,qe(H,-1))},L=function(H){var Ae=Ze(H,1),He=r(H,Ae,_a("path",!0),_a(Se,!0));return He===null?1:n(H,je(H,He)===K,He)},l=function(H,Ae,He){var $e;He=La(H,He,_a("."),xe);var ka=xa(He,45);if(ka>=0){$e=de(H,He,ka),$e=G(H,_a("%s%s"),Ee,$e);var Sa=da(H,Ae,$e);if(Sa!==2)return Sa;He=ka+1}return $e=G(H,_a("%s%s"),Ee,He),da(H,Ae,$e)},_=function(H){var Ae=Ze(H,1),He=r(H,Ae,_a("jspath",!0),_a(ce,!0));return He===null?1:n(H,l(H,He,Ae)===0,He)},B=function(H){var Ae,He=Ze(H,1),$e=xa(He,46);if($e<0)return 0;de(H,He,$e);var ka=r(H,qe(H,-1),_a("jspath",!0),_a(ce,!0));return ka===null?1:(Ae=l(H,ka,He))!==0?Ae!=2?n(H,0,ka):(se(H,_a(`
	no module '%s' in file '%s'`),He,ka),1):(se(H,ka),2)},A=function(H){var Ae=Ze(H,1);return ne(H,Y,ve),ne(H,-1,Ae)===Le&&G(H,_a(`
	no field package.preload['%s']`),Ae),1},M=function H(Ae,He,$e){for(;He===K?(P(Ae,3,$e.i)===Le&&(aa(Ae,1),$($e.msg),he(Ae,_a("module '%s' not found:%s"),$e.name,qe(Ae,-1))),se(Ae,$e.name),Ge(Ae,1,2,$e,H)):He=K,!ea(Ae,-2);$e.i++)Xe(Ae,-2)?(aa(Ae,1),Je($e.msg)):aa(Ae,2);return $e.k(Ae,K,$e.ctx)},ue=function(H,Ae,He){return se(H,He),Q(H,-2),Ge(H,2,1,He,oe),oe(H,K,He)},oe=function(H,Ae,He){var $e=He;return Pe(H,-1)||R(H,2,$e),ne(H,2,$e)==Le&&(w(H,1),Ue(H,-1),R(H,2,$e)),1},Ta={loadlib:function(H){var Ae=Ze(H,1),He=Ze(H,2),$e=da(H,Ae,He);return $e===0?1:(We(H),Q(H,-2),Z(H,$e===1?"open":"init"),3)},searchpath:function(H){return p(H,Ze(H,1),Ze(H,2),i(H,3,"."),i(H,4,ge))!==null?1:(We(H),Q(H,-2),2)}},Ve={require:function(H){var Ae=Ze(H,1);return Te(H,1),ne(H,Y,S),ne(H,2,Ae),na(H,-1)?1:(aa(H,1),(function(He,$e,ka,Sa){var wa=new F;return Ye(He,wa),ne(He,va(1),_a("searchers",!0))!==fe&&he(He,_a("'package.searchers' must be a table")),M(He,K,{name:$e,i:1,msg:wa,ctx:ka,k:Sa})})(H,Ae,Ae,ue))}};e.exports.luaopen_package=function(H){return(function(Ae){De(Ae),te(Ae,0,1),_e(Ae,-2),E(Ae,Y,h)})(H),Ke(H,Ta),(function(Ae){var He=[A,L,_,B,null];te(Ae);for(var $e=0;He[$e];$e++)Ue(Ae,-2),j(Ae,He[$e],1),T(Ae,-2,$e+1);R(Ae,-2,_a("searchers",!0))})(H),Ea(H,_a("path",!0),"LUA_PATH",N),Ea(H,_a("jspath",!0),"LUA_JSPATH",y),Z(H,ge+`
`+q+`
`+pe+`
`+b+`
-
`),R(H,-2,_a("config",!0)),ha(H,Y,S),R(H,-2,_a("loaded",!0)),ha(H,Y,ve),R(H,-2,_a("preload",!0)),Oe(H),Ue(H,-2),ke(H,Ve,1),aa(H,1),1}},function(e,ga,d){var o=d(2),s=o.lua_pushinteger,m=o.lua_pushliteral,ge=o.lua_setfield,b=d(7).luaL_newlib,y=d(5),N=y.FENGARI_AUTHORS,pe=y.FENGARI_COPYRIGHT,q=y.FENGARI_RELEASE,Ne=y.FENGARI_VERSION,K=y.FENGARI_VERSION_MAJOR,Y=y.FENGARI_VERSION_MINOR,Le=y.FENGARI_VERSION_NUM,fe=y.FENGARI_VERSION_RELEASE,Ge=y.to_luastring;e.exports.luaopen_fengari=function(te){return b(te,{}),m(te,N),ge(te,-2,Ge("AUTHORS")),m(te,pe),ge(te,-2,Ge("COPYRIGHT")),m(te,q),ge(te,-2,Ge("RELEASE")),m(te,Ne),ge(te,-2,Ge("VERSION")),m(te,K),ge(te,-2,Ge("VERSION_MAJOR")),m(te,Y),ge(te,-2,Ge("VERSION_MINOR")),s(te,Le),ge(te,-2,Ge("VERSION_NUM")),m(te,fe),ge(te,-2,Ge("VERSION_RELEASE")),1}},function(e,ga,d){d.r(ga),d.d(ga,"L",function(){return G}),d.d(ga,"load",function(){return Oe});var o=d(0);d.d(ga,"FENGARI_AUTHORS",function(){return o.FENGARI_AUTHORS}),d.d(ga,"FENGARI_COPYRIGHT",function(){return o.FENGARI_COPYRIGHT}),d.d(ga,"FENGARI_RELEASE",function(){return o.FENGARI_RELEASE}),d.d(ga,"FENGARI_VERSION",function(){return o.FENGARI_VERSION}),d.d(ga,"FENGARI_VERSION_MAJOR",function(){return o.FENGARI_VERSION_MAJOR}),d.d(ga,"FENGARI_VERSION_MINOR",function(){return o.FENGARI_VERSION_MINOR}),d.d(ga,"FENGARI_VERSION_NUM",function(){return o.FENGARI_VERSION_NUM}),d.d(ga,"FENGARI_VERSION_RELEASE",function(){return o.FENGARI_VERSION_RELEASE}),d.d(ga,"luastring_eq",function(){return o.luastring_eq}),d.d(ga,"luastring_indexOf",function(){return o.luastring_indexOf}),d.d(ga,"luastring_of",function(){return o.luastring_of}),d.d(ga,"to_jsstring",function(){return o.to_jsstring}),d.d(ga,"to_luastring",function(){return o.to_luastring}),d.d(ga,"to_uristring",function(){return o.to_uristring}),d.d(ga,"lua",function(){return o.lua}),d.d(ga,"lauxlib",function(){return o.lauxlib}),d.d(ga,"lualib",function(){return o.lualib});var s=d(18);d.d(ga,"interop",function(){return s});var m=o.lua.LUA_ERRRUN,ge=o.lua.LUA_ERRSYNTAX,b=o.lua.LUA_OK,y=o.lua.LUA_VERSION_MAJOR,N=o.lua.LUA_VERSION_MINOR,pe=o.lua.lua_Debug,q=o.lua.lua_getinfo,Ne=o.lua.lua_getstack,K=o.lua.lua_gettop,Y=o.lua.lua_insert,Le=o.lua.lua_pcall,fe=o.lua.lua_pop,Ge=o.lua.lua_pushcfunction,te=o.lua.lua_pushstring,ne=o.lua.lua_remove,Q=o.lua.lua_setglobal,ea=o.lua.lua_tojsstring,Pe=o.lauxlib.luaL_loadbuffer,Xe=o.lauxlib.luaL_newstate,De=o.lauxlib.luaL_requiref,aa=s.checkjs,w=s.luaopen_js,j=s.push,I=s.tojs,G=Xe();function Oe(P,C){if(typeof P=="string")P=Object(o.to_luastring)(P);else if(!(P instanceof Uint8Array))throw new TypeError("expects an array of bytes or javascript string");C=C?Object(o.to_luastring)(C):null;var T,E=Pe(G,P,null,C);if(T=E===ge?new SyntaxError(ea(G,-1)):I(G,-1),fe(G,1),E!==b)throw T;return T}if(o.lualib.luaL_openlibs(G),De(G,Object(o.to_luastring)("js"),w,1),fe(G,1),te(G,Object(o.to_luastring)(o.FENGARI_COPYRIGHT)),Q(G,Object(o.to_luastring)("_COPYRIGHT")),typeof document<"u"&&document instanceof HTMLDocument){var me=function(P){var C=new pe;return Ne(P,2,C)&&q(P,Object(o.to_luastring)("Sl"),C),j(P,new ErrorEvent("error",{bubbles:!0,cancelable:!0,message:ea(P,1),error:I(P,1),filename:C.short_src?Object(o.to_jsstring)(C.short_src):void 0,lineno:C.currentline>0?C.currentline:void 0})),1},Z=function(P,C,T){var E,X=Pe(G,C,null,T);if(X===ge){var R=ea(G,-1),_e=P.src?P.src:document.location,Te=new SyntaxError(R,_e,void 0);E=new ErrorEvent("error",{message:R,error:Te,filename:_e,lineno:void 0})}else if(X===b){var na=K(G);Ge(G,me),Y(G,na),Object.defineProperty(document,"currentScript",{value:P,configurable:!0}),X=Le(G,0,0,na),delete document.currentScript,ne(G,na),X===m&&(E=aa(G,-1))}X!==b&&(E===void 0&&(E=new ErrorEvent("error",{message:ea(G,-1),error:I(G,-1)})),fe(G,1),window.dispatchEvent(E)&&console.error("uncaught exception",E.error))},de=function(P,C,T){if(P.status>=200&&P.status<300){var E=P.response;E=typeof E=="string"?Object(o.to_luastring)(P.response):new Uint8Array(E),Z(C,E,T)}else C.dispatchEvent(new Event("error"))},We=/^(.*?\/.*?)([\t ]*;.*)?$/,se=/^(\d+)\.(\d+)$/,Ue=function(P){if(P.tagName==="SCRIPT"){var C=We.exec(P.type);if(C){var T=C[1];if(T==="application/lua"||T==="text/lua"){if(P.hasAttribute("lua-version")){var E=se.exec(P.getAttribute("lua-version"));if(!E||E[1]!==y||E[2]!==N)return}(function(X){if(X.src){var R=Object(o.to_luastring)("@"+X.src);if(document.readyState==="complete"||X.async)if(typeof fetch=="function")fetch(X.src,{method:"GET",credentials:(function(fa){switch(fa){case"anonymous":return"omit";case"use-credentials":return"include";default:return"same-origin"}})(X.crossorigin),redirect:"follow",integrity:X.integrity}).then(function(fa){if(fa.ok)return fa.arrayBuffer();throw new Error("unable to fetch")}).then(function(fa){var va=new Uint8Array(fa);Z(X,va,R)}).catch(function(fa){X.dispatchEvent(new Event("error"))});else{var _e=new XMLHttpRequest;_e.open("GET",X.src,!0),_e.responseType="arraybuffer",_e.onreadystatechange=function(){_e.readyState===4&&de(_e,X,R)},_e.send()}else{var Te=new XMLHttpRequest;Te.open("GET",X.src,!1),Te.send(),de(Te,X,R)}}else{var na=Object(o.to_luastring)(X.innerHTML),qe=X.id?Object(o.to_luastring)("="+X.id):na;Z(X,na,qe)}})(P)}}}};typeof MutationObserver<"u"?new MutationObserver(function(P,C){for(var T=0;T<P.length;T++)for(var E=P[T],X=0;X<E.addedNodes.length;X++)Ue(E.addedNodes[X])}).observe(document,{childList:!0,subtree:!0}):console.warn&&console.warn("fengari-web: MutationObserver not found; lua script tags will not be run when inserted"),Array.prototype.forEach.call(document.querySelectorAll('script[type^="application/lua"], script[type^="text/lua"]'),Ue)}},function(e,ga,d){var o=d(1),s=o.LUA_MULTRET,m=o.LUA_OPADD,ge=o.LUA_OPBAND,b=o.LUA_OPBNOT,y=o.LUA_OPBOR,N=o.LUA_OPBXOR,pe=o.LUA_OPDIV,q=o.LUA_OPIDIV,Ne=o.LUA_OPMOD,K=o.LUA_OPSHL,Y=o.LUA_OPSHR,Le=o.LUA_OPUNM,fe=o.constant_types,Ge=fe.LUA_TBOOLEAN,te=fe.LUA_TLIGHTUSERDATA,ne=fe.LUA_TLNGSTR,Q=fe.LUA_TNIL,ea=fe.LUA_TNUMFLT,Pe=fe.LUA_TNUMINT,Xe=fe.LUA_TTABLE,De=o.to_luastring,aa=d(4).lua_assert,w=d(21),j=d(6),I=d(16),G=d(23),Oe=d(9),me=d(15),Z=I.OpCodesI,de=j.TValue,We={OPR_ADD:0,OPR_SUB:1,OPR_MUL:2,OPR_MOD:3,OPR_POW:4,OPR_DIV:5,OPR_IDIV:6,OPR_BAND:7,OPR_BOR:8,OPR_BXOR:9,OPR_SHL:10,OPR_SHR:11,OPR_CONCAT:12,OPR_EQ:13,OPR_LT:14,OPR_LE:15,OPR_NE:16,OPR_GT:17,OPR_GE:18,OPR_AND:19,OPR_OR:20,OPR_NOBINOPR:21},se={OPR_MINUS:0,OPR_BNOT:1,OPR_NOT:2,OPR_LEN:3,OPR_NOUNOPR:4},Ue=function(r){return r.t!==r.f},P=function(r,n){var L=G.expkind;if(Ue(r))return!1;switch(r.k){case L.VKINT:return!n||new de(Pe,r.u.ival);case L.VKFLT:return!n||new de(ea,r.u.nval);default:return!1}},C=function(r,n,L){var l,_=n+L-1;if(r.pc>r.lasttarget&&(l=r.f.code[r.pc-1]).opcode===Z.OP_LOADNIL){var B=l.A,A=B+l.B;if(B<=n&&n<=A+1||n<=B&&B<=_+1)return B<n&&(n=B),A>_&&(_=A),I.SETARG_A(l,n),void I.SETARG_B(l,_-n)}Ye(r,Z.OP_LOADNIL,n,L-1,0)},T=function(r,n){return r.f.code[n.u.info]},E=function(r,n){var L=r.f.code[n].sBx;return L===-1?-1:n+1+L},X=function(r,n,L){var l=r.f.code[n],_=L-(n+1);aa(L!==-1),Math.abs(_)>I.MAXARG_sBx&&w.luaX_syntaxerror(r.ls,De("control structure too long",!0)),I.SETARG_sBx(l,_)},R=function(r,n,L){if(L===-1)return n;if(n===-1)n=L;else{for(var l=n,_=E(r,l);_!==-1;)_=E(r,l=_);X(r,l,L)}return n},_e=function(r){var n=r.jpc;r.jpc=-1;var L=he(r,Z.OP_JMP,0,-1);return L=R(r,L,n)},Te=function(r,n,L,l,_){return Ye(r,n,L,l,_),_e(r)},na=function(r){return r.lasttarget=r.pc,r.pc},qe=function(r,n){return n>=1&&I.testTMode(r.f.code[n-1].opcode)?n-1:n},fa=function(r,n){return r.f.code[qe(r,n)]},va=function(r,n,L){var l=qe(r,n),_=r.f.code[l];return _.opcode===Z.OP_TESTSET&&(L!==I.NO_REG&&L!==_.B?I.SETARG_A(_,L):r.f.code[l]=I.CREATE_ABC(Z.OP_TEST,_.B,0,_.C),!0)},U=function(r,n){for(;n!==-1;n=E(r,n))va(r,n,I.NO_REG)},S=function(r,n,L,l,_){for(;n!==-1;){var B=E(r,n);va(r,n,l)?X(r,n,L):X(r,n,_),n=B}},ve=function(r,n){na(r),r.jpc=R(r,r.jpc,n)},F=function(r,n,L){L===r.pc?ve(r,n):(aa(L<r.pc),S(r,n,L,I.NO_REG,L))},Je=function(r,n){var L=r.f;return(function(l){S(l,l.jpc,l.pc,I.NO_REG,l.pc),l.jpc=-1})(r),L.code[r.pc]=n,L.lineinfo[r.pc]=r.ls.lastline,r.pc++},Ye=function(r,n,L,l,_){return aa(I.getOpMode(n)===I.iABC),aa(I.getBMode(n)!==I.OpArgN||l===0),aa(I.getCMode(n)!==I.OpArgN||_===0),aa(L<=I.MAXARG_A&&l<=I.MAXARG_B&&_<=I.MAXARG_C),Je(r,I.CREATE_ABC(n,L,l,_))},Ze=function(r,n,L,l){return aa(I.getOpMode(n)===I.iABx||I.getOpMode(n)===I.iAsBx),aa(I.getCMode(n)===I.OpArgN),aa(L<=I.MAXARG_A&&l<=I.MAXARG_Bx),Je(r,I.CREATE_ABx(n,L,l))},he=function(r,n,L,l){return Ze(r,n,L,l+I.MAXARG_sBx)},ha=function(r,n){return aa(n<=I.MAXARG_Ax),Je(r,I.CREATE_Ax(Z.OP_EXTRAARG,n))},La=function(r,n,L){if(L<=I.MAXARG_Bx)return Ze(r,Z.OP_LOADK,n,L);var l=Ze(r,Z.OP_LOADKX,n,0);return ha(r,L),l},z=function(r,n){var L=r.freereg+n;L>r.f.maxstacksize&&(L>=255&&w.luaX_syntaxerror(r.ls,De("function or expression needs too many registers",!0)),r.f.maxstacksize=L)},je=function(r,n){z(r,n),r.freereg+=n},Ke=function(r,n){!I.ISK(n)&&n>=r.nactvar&&(r.freereg--,aa(n===r.freereg))},i=function(r,n){n.k===G.expkind.VNONRELOC&&Ke(r,n.u.info)},$=function(r,n,L){var l=n.k===G.expkind.VNONRELOC?n.u.info:-1,_=L.k===G.expkind.VNONRELOC?L.u.info:-1;l>_?(Ke(r,l),Ke(r,_)):(Ke(r,_),Ke(r,l))},ke=function(r,n,L){var l=r.f,_=Oe.luaH_get(r.L,r.ls.h,n);if(_.ttisinteger()){var B=_.value;if(B<r.nk&&l.k[B].ttype()===L.ttype()&&l.k[B].value===L.value)return B}var A=r.nk;return Oe.luaH_setfrom(r.L,r.ls.h,n,new j.TValue(Pe,A)),l.k[A]=L,r.nk++,A},Qe=function(r,n){var L=new de(te,n),l=new de(Pe,n);return ke(r,L,l)},sa=function(r,n){var L=new de(ea,n);return ke(r,L,L)},xa=function(r,n){var L=new de(Ge,n);return ke(r,L,L)},Ma=function(r,n,L){var l=G.expkind;if(n.k===l.VCALL)I.SETARG_C(T(r,n),L+1);else if(n.k===l.VVARARG){var _=T(r,n);I.SETARG_B(_,L+1),I.SETARG_A(_,r.freereg),je(r,1)}else aa(L===s)},_a=function(r,n){var L=G.expkind;n.k===L.VCALL?(aa(T(r,n).C===2),n.k=L.VNONRELOC,n.u.info=T(r,n).A):n.k===L.VVARARG&&(I.SETARG_B(T(r,n),2),n.k=L.VRELOCABLE)},Ua=function(r,n){var L=G.expkind;switch(n.k){case L.VLOCAL:n.k=L.VNONRELOC;break;case L.VUPVAL:n.u.info=Ye(r,Z.OP_GETUPVAL,0,n.u.info,0),n.k=L.VRELOCABLE;break;case L.VINDEXED:var l;Ke(r,n.u.ind.idx),n.u.ind.vt===L.VLOCAL?(Ke(r,n.u.ind.t),l=Z.OP_GETTABLE):(aa(n.u.ind.vt===L.VUPVAL),l=Z.OP_GETTABUP),n.u.info=Ye(r,l,0,n.u.ind.t,n.u.ind.idx),n.k=L.VRELOCABLE;break;case L.VVARARG:case L.VCALL:_a(r,n)}},Ra=function(r,n,L,l){return na(r),Ye(r,Z.OP_LOADBOOL,n,L,l)},Va=function(r,n,L){var l=G.expkind;switch(Ua(r,n),n.k){case l.VNIL:C(r,L,1);break;case l.VFALSE:case l.VTRUE:Ye(r,Z.OP_LOADBOOL,L,n.k===l.VTRUE,0);break;case l.VK:La(r,L,n.u.info);break;case l.VKFLT:La(r,L,sa(r,n.u.nval));break;case l.VKINT:La(r,L,Qe(r,n.u.ival));break;case l.VRELOCABLE:var _=T(r,n);I.SETARG_A(_,L);break;case l.VNONRELOC:L!==n.u.info&&Ye(r,Z.OP_MOVE,L,n.u.info,0);break;default:return void aa(n.k===l.VJMP)}n.u.info=L,n.k=l.VNONRELOC},h=function(r,n){n.k!==G.expkind.VNONRELOC&&(je(r,1),Va(r,n,r.freereg-1))},ce=function(r,n){for(;n!==-1;n=E(r,n))if(fa(r,n).opcode!==Z.OP_TESTSET)return!0;return!1},Se=function(r,n,L){var l=G.expkind;if(Va(r,n,L),n.k===l.VJMP&&(n.t=R(r,n.t,n.u.info)),Ue(n)){var _,B=-1,A=-1;if(ce(r,n.t)||ce(r,n.f)){var M=n.k===l.VJMP?-1:_e(r);B=Ra(r,L,0,1),A=Ra(r,L,1,0),ve(r,M)}_=na(r),S(r,n.f,_,L,B),S(r,n.t,_,L,A)}n.f=n.t=-1,n.u.info=L,n.k=l.VNONRELOC},Ee=function(r,n){Ua(r,n),i(r,n),je(r,1),Se(r,n,r.freereg-1)},xe=function(r,n){if(Ua(r,n),n.k===G.expkind.VNONRELOC){if(!Ue(n))return n.u.info;if(n.u.info>=r.nactvar)return Se(r,n,n.u.info),n.u.info}return Ee(r,n),n.u.info},ee=function(r,n){Ue(n)?xe(r,n):Ua(r,n)},ra=function(r,n){var L=G.expkind,l=!1;switch(ee(r,n),n.k){case L.VTRUE:n.u.info=xa(r,!0),l=!0;break;case L.VFALSE:n.u.info=xa(r,!1),l=!0;break;case L.VNIL:n.u.info=(function(_){var B=new de(Q,null),A=new de(Xe,_.ls.h);return ke(_,A,B)})(r),l=!0;break;case L.VKINT:n.u.info=Qe(r,n.u.ival),l=!0;break;case L.VKFLT:n.u.info=sa(r,n.u.nval),l=!0;break;case L.VK:l=!0}return l&&(n.k=L.VK,n.u.info<=I.MAXINDEXRK)?I.RKASK(n.u.info):xe(r,n)},da=function(r,n){var L=fa(r,n.u.info);aa(I.testTMode(L.opcode)&&L.opcode!==Z.OP_TESTSET&&L.opcode!==Z.OP_TEST),I.SETARG_A(L,!L.A)},Oa=function(r,n,L){if(n.k===G.expkind.VRELOCABLE){var l=T(r,n);if(l.opcode===Z.OP_NOT)return r.pc--,Te(r,Z.OP_TEST,l.B,0,!L)}return h(r,n),i(r,n),Te(r,Z.OP_TESTSET,I.NO_REG,n.u.info,L)},Ea=function(r,n){var L,l=G.expkind;switch(Ua(r,n),n.k){case l.VJMP:da(r,n),L=n.u.info;break;case l.VK:case l.VKFLT:case l.VKINT:case l.VTRUE:L=-1;break;default:L=Oa(r,n,0)}n.f=R(r,n.f,L),ve(r,n.t),n.t=-1},Ia=function(r,n){var L,l=G.expkind;switch(Ua(r,n),n.k){case l.VJMP:L=n.u.info;break;case l.VNIL:case l.VFALSE:L=-1;break;default:L=Oa(r,n,1)}n.t=R(r,n.t,L),ve(r,n.f),n.f=-1},pa=function(r,n,L){var l,_,B=G.expkind;if(!(l=P(n,!0))||!(_=P(L,!0))||!(function(ue,oe,Ta){switch(ue){case ge:case y:case N:case K:case Y:case b:return me.tointeger(oe)!==!1&&me.tointeger(Ta)!==!1;case pe:case q:case Ne:return Ta.value!==0;default:return 1}})(r,l,_))return 0;var A=new de;if(j.luaO_arith(null,r,l,_,A),A.ttisinteger())n.k=B.VKINT,n.u.ival=A.value;else{var M=A.value;if(isNaN(M)||M===0)return!1;n.k=B.VKFLT,n.u.nval=M}return!0},a=function(r,n,L,l,_){var B=ra(r,l),A=ra(r,L);$(r,L,l),L.u.info=Ye(r,n,0,A,B),L.k=G.expkind.VRELOCABLE,p(r,_)},p=function(r,n){r.f.lineinfo[r.pc-1]=n};e.exports.BinOpr=We,e.exports.NO_JUMP=-1,e.exports.UnOpr=se,e.exports.getinstruction=T,e.exports.luaK_checkstack=z,e.exports.luaK_code=Je,e.exports.luaK_codeABC=Ye,e.exports.luaK_codeABx=Ze,e.exports.luaK_codeAsBx=he,e.exports.luaK_codek=La,e.exports.luaK_concat=R,e.exports.luaK_dischargevars=Ua,e.exports.luaK_exp2RK=ra,e.exports.luaK_exp2anyreg=xe,e.exports.luaK_exp2anyregup=function(r,n){(n.k!==G.expkind.VUPVAL||Ue(n))&&xe(r,n)},e.exports.luaK_exp2nextreg=Ee,e.exports.luaK_exp2val=ee,e.exports.luaK_fixline=p,e.exports.luaK_getlabel=na,e.exports.luaK_goiffalse=Ia,e.exports.luaK_goiftrue=Ea,e.exports.luaK_indexed=function(r,n,L){var l=G.expkind;aa(!Ue(n)&&(G.vkisinreg(n.k)||n.k===l.VUPVAL)),n.u.ind.t=n.u.info,n.u.ind.idx=ra(r,L),n.u.ind.vt=n.k===l.VUPVAL?l.VUPVAL:l.VLOCAL,n.k=l.VINDEXED},e.exports.luaK_infix=function(r,n,L){switch(n){case We.OPR_AND:Ea(r,L);break;case We.OPR_OR:Ia(r,L);break;case We.OPR_CONCAT:Ee(r,L);break;case We.OPR_ADD:case We.OPR_SUB:case We.OPR_MUL:case We.OPR_DIV:case We.OPR_IDIV:case We.OPR_MOD:case We.OPR_POW:case We.OPR_BAND:case We.OPR_BOR:case We.OPR_BXOR:case We.OPR_SHL:case We.OPR_SHR:P(L,!1)||ra(r,L);break;default:ra(r,L)}},e.exports.luaK_intK=Qe,e.exports.luaK_jump=_e,e.exports.luaK_jumpto=function(r,n){return F(r,_e(r),n)},e.exports.luaK_nil=C,e.exports.luaK_numberK=sa,e.exports.luaK_patchclose=function(r,n,L){for(L++;n!==-1;n=E(r,n)){var l=r.f.code[n];aa(l.opcode===Z.OP_JMP&&(l.A===0||l.A>=L)),I.SETARG_A(l,L)}},e.exports.luaK_patchlist=F,e.exports.luaK_patchtohere=ve,e.exports.luaK_posfix=function(r,n,L,l,_){var B=G.expkind;switch(n){case We.OPR_AND:aa(L.t===-1),Ua(r,l),l.f=R(r,l.f,L.f),L.to(l);break;case We.OPR_OR:aa(L.f===-1),Ua(r,l),l.t=R(r,l.t,L.t),L.to(l);break;case We.OPR_CONCAT:ee(r,l);var A=T(r,l);l.k===B.VRELOCABLE&&A.opcode===Z.OP_CONCAT?(aa(L.u.info===A.B-1),i(r,L),I.SETARG_B(A,L.u.info),L.k=B.VRELOCABLE,L.u.info=l.u.info):(Ee(r,l),a(r,Z.OP_CONCAT,L,l,_));break;case We.OPR_ADD:case We.OPR_SUB:case We.OPR_MUL:case We.OPR_DIV:case We.OPR_IDIV:case We.OPR_MOD:case We.OPR_POW:case We.OPR_BAND:case We.OPR_BOR:case We.OPR_BXOR:case We.OPR_SHL:case We.OPR_SHR:pa(n+m,L,l)||a(r,n+Z.OP_ADD,L,l,_);break;case We.OPR_EQ:case We.OPR_LT:case We.OPR_LE:case We.OPR_NE:case We.OPR_GT:case We.OPR_GE:(function(M,ue,oe,Ta){var Ve,H=G.expkind;oe.k===H.VK?Ve=I.RKASK(oe.u.info):(aa(oe.k===H.VNONRELOC),Ve=oe.u.info);var Ae=ra(M,Ta);switch($(M,oe,Ta),ue){case We.OPR_NE:oe.u.info=Te(M,Z.OP_EQ,0,Ve,Ae);break;case We.OPR_GT:case We.OPR_GE:var He=ue-We.OPR_NE+Z.OP_EQ;oe.u.info=Te(M,He,1,Ae,Ve);break;default:var $e=ue-We.OPR_EQ+Z.OP_EQ;oe.u.info=Te(M,$e,1,Ve,Ae)}oe.k=H.VJMP})(r,n,L,l)}return L},e.exports.luaK_prefix=function(r,n,L,l){var _=new G.expdesc;switch(_.k=G.expkind.VKINT,_.u.ival=_.u.nval=_.u.info=0,_.t=-1,_.f=-1,n){case se.OPR_MINUS:case se.OPR_BNOT:if(pa(n+Le,L,_))break;case se.OPR_LEN:(function(B,A,M,ue){var oe=xe(B,M);i(B,M),M.u.info=Ye(B,A,0,oe,0),M.k=G.expkind.VRELOCABLE,p(B,ue)})(r,n+Z.OP_UNM,L,l);break;case se.OPR_NOT:(function(B,A){var M=G.expkind;switch(Ua(B,A),A.k){case M.VNIL:case M.VFALSE:A.k=M.VTRUE;break;case M.VK:case M.VKFLT:case M.VKINT:case M.VTRUE:A.k=M.VFALSE;break;case M.VJMP:da(B,A);break;case M.VRELOCABLE:case M.VNONRELOC:h(B,A),i(B,A),A.u.info=Ye(B,Z.OP_NOT,0,A.u.info,0),A.k=M.VRELOCABLE}var ue=A.f;A.f=A.t,A.t=ue,U(B,A.f),U(B,A.t)})(r,L)}},e.exports.luaK_reserveregs=je,e.exports.luaK_ret=function(r,n,L){Ye(r,Z.OP_RETURN,n,L+1,0)},e.exports.luaK_self=function(r,n,L){xe(r,n);var l=n.u.info;i(r,n),n.u.info=r.freereg,n.k=G.expkind.VNONRELOC,je(r,2),Ye(r,Z.OP_SELF,n.u.info,l,ra(r,L)),i(r,L)},e.exports.luaK_setlist=function(r,n,L,l){var _=(L-1)/I.LFIELDS_PER_FLUSH+1,B=l===s?0:l;aa(l!==0&&l<=I.LFIELDS_PER_FLUSH),_<=I.MAXARG_C?Ye(r,Z.OP_SETLIST,n,B,_):_<=I.MAXARG_Ax?(Ye(r,Z.OP_SETLIST,n,B,0),ha(r,_)):w.luaX_syntaxerror(r.ls,De("constructor too long",!0)),r.freereg=n+1},e.exports.luaK_setmultret=function(r,n){Ma(r,n,s)},e.exports.luaK_setoneret=_a,e.exports.luaK_setreturns=Ma,e.exports.luaK_storevar=function(r,n,L){var l=G.expkind;switch(n.k){case l.VLOCAL:return i(r,L),void Se(r,L,n.u.info);case l.VUPVAL:var _=xe(r,L);Ye(r,Z.OP_SETUPVAL,_,n.u.info,0);break;case l.VINDEXED:var B=n.u.ind.vt===l.VLOCAL?Z.OP_SETTABLE:Z.OP_SETTABUP,A=ra(r,L);Ye(r,B,n.u.ind.t,n.u.ind.idx,A)}i(r,L)},e.exports.luaK_stringK=function(r,n){var L=new de(ne,n);return ke(r,L,L)}},function(e,ga,d){function o(X,R){for(var _e=0;_e<R.length;_e++){var Te=R[_e];Te.enumerable=Te.enumerable||!1,Te.configurable=!0,"value"in Te&&(Te.writable=!0),Object.defineProperty(X,Te.key,Te)}}var s=d(1),m=s.LUA_SIGNATURE,ge=s.constant_types,b=ge.LUA_TBOOLEAN,y=ge.LUA_TLNGSTR,N=ge.LUA_TNIL,pe=ge.LUA_TNUMFLT,q=ge.LUA_TNUMINT,Ne=ge.LUA_TSHRSTR,K=s.thread_status.LUA_ERRSYNTAX,Y=s.is_luastring,Le=s.luastring_eq,fe=s.to_luastring,Ge=d(8),te=d(13),ne=d(6),Q=d(16),ea=Q.MAXARG_sBx,Pe=Q.POS_A,Xe=Q.POS_Ax,De=Q.POS_B,aa=Q.POS_Bx,w=Q.POS_C,j=Q.POS_OP,I=Q.SIZE_A,G=Q.SIZE_Ax,Oe=Q.SIZE_B,me=Q.SIZE_Bx,Z=Q.SIZE_C,de=Q.SIZE_OP,We=d(4).lua_assert,se=d(10).luaS_bless,Ue=d(20),P=Ue.luaZ_read,C=Ue.ZIO,T=[25,147,13,10,26,10],E=(function(){function X(R,_e,Te){(function(na,qe){if(!(na instanceof qe))throw new TypeError("Cannot call a class as a function")})(this,X),this.intSize=4,this.size_tSize=4,this.instructionSize=4,this.integerSize=4,this.numberSize=8,We(_e instanceof C,"BytecodeParser only operates on a ZIO"),We(Y(Te)),Te[0]===64||Te[0]===61?this.name=Te.subarray(1):Te[0]==m[0]?this.name=fe("binary string",!0):this.name=Te,this.L=R,this.Z=_e,this.arraybuffer=new ArrayBuffer(Math.max(this.intSize,this.size_tSize,this.instructionSize,this.integerSize,this.numberSize)),this.dv=new DataView(this.arraybuffer),this.u8=new Uint8Array(this.arraybuffer)}return(function(R,_e,Te){_e&&o(R.prototype,_e),Te&&o(R,Te)})(X,[{key:"read",value:function(R){var _e=new Uint8Array(R);return P(this.Z,_e,0,R)!==0&&this.error("truncated"),_e}},{key:"LoadByte",value:function(){return P(this.Z,this.u8,0,1)!==0&&this.error("truncated"),this.u8[0]}},{key:"LoadInt",value:function(){return P(this.Z,this.u8,0,this.intSize)!==0&&this.error("truncated"),this.dv.getInt32(0,!0)}},{key:"LoadNumber",value:function(){return P(this.Z,this.u8,0,this.numberSize)!==0&&this.error("truncated"),this.dv.getFloat64(0,!0)}},{key:"LoadInteger",value:function(){return P(this.Z,this.u8,0,this.integerSize)!==0&&this.error("truncated"),this.dv.getInt32(0,!0)}},{key:"LoadSize_t",value:function(){return this.LoadInteger()}},{key:"LoadString",value:function(){var R=this.LoadByte();return R===255&&(R=this.LoadSize_t()),R===0?null:se(this.L,this.read(R-1))}},{key:"LoadCode",value:function(R){for(var _e=this.LoadInt(),Te=X,na=0;na<_e;na++){P(this.Z,this.u8,0,this.instructionSize)!==0&&this.error("truncated");var qe=this.dv.getUint32(0,!0);R.code[na]={code:qe,opcode:qe>>j&Te.MASK1(de,0),A:qe>>Pe&Te.MASK1(I,0),B:qe>>De&Te.MASK1(Oe,0),C:qe>>w&Te.MASK1(Z,0),Bx:qe>>aa&Te.MASK1(me,0),Ax:qe>>Xe&Te.MASK1(G,0),sBx:(qe>>aa&Te.MASK1(me,0))-ea}}}},{key:"LoadConstants",value:function(R){for(var _e=this.LoadInt(),Te=0;Te<_e;Te++){var na=this.LoadByte();switch(na){case N:R.k.push(new ne.TValue(N,null));break;case b:R.k.push(new ne.TValue(b,this.LoadByte()!==0));break;case pe:R.k.push(new ne.TValue(pe,this.LoadNumber()));break;case q:R.k.push(new ne.TValue(q,this.LoadInteger()));break;case Ne:case y:R.k.push(new ne.TValue(y,this.LoadString()));break;default:this.error("unrecognized constant '".concat(na,"'"))}}}},{key:"LoadProtos",value:function(R){for(var _e=this.LoadInt(),Te=0;Te<_e;Te++)R.p[Te]=new te.Proto(this.L),this.LoadFunction(R.p[Te],R.source)}},{key:"LoadUpvalues",value:function(R){for(var _e=this.LoadInt(),Te=0;Te<_e;Te++)R.upvalues[Te]={name:null,instack:this.LoadByte(),idx:this.LoadByte()}}},{key:"LoadDebug",value:function(R){for(var _e=this.LoadInt(),Te=0;Te<_e;Te++)R.lineinfo[Te]=this.LoadInt();_e=this.LoadInt();for(var na=0;na<_e;na++)R.locvars[na]={varname:this.LoadString(),startpc:this.LoadInt(),endpc:this.LoadInt()};_e=this.LoadInt();for(var qe=0;qe<_e;qe++)R.upvalues[qe].name=this.LoadString()}},{key:"LoadFunction",value:function(R,_e){R.source=this.LoadString(),R.source===null&&(R.source=_e),R.linedefined=this.LoadInt(),R.lastlinedefined=this.LoadInt(),R.numparams=this.LoadByte(),R.is_vararg=this.LoadByte()!==0,R.maxstacksize=this.LoadByte(),this.LoadCode(R),this.LoadConstants(R),this.LoadUpvalues(R),this.LoadProtos(R),this.LoadDebug(R)}},{key:"checkliteral",value:function(R,_e){var Te=this.read(R.length);Le(Te,R)||this.error(_e)}},{key:"checkHeader",value:function(){this.checkliteral(m.subarray(1),"not a"),this.LoadByte()!==83&&this.error("version mismatch in"),this.LoadByte()!==0&&this.error("format mismatch in"),this.checkliteral(T,"corrupted"),this.intSize=this.LoadByte(),this.size_tSize=this.LoadByte(),this.instructionSize=this.LoadByte(),this.integerSize=this.LoadByte(),this.numberSize=this.LoadByte(),this.checksize(this.intSize,4,"int"),this.checksize(this.size_tSize,4,"size_t"),this.checksize(this.instructionSize,4,"instruction"),this.checksize(this.integerSize,4,"integer"),this.checksize(this.numberSize,8,"number"),this.LoadInteger()!==22136&&this.error("endianness mismatch in"),this.LoadNumber()!==370.5&&this.error("float format mismatch in")}},{key:"error",value:function(R){ne.luaO_pushfstring(this.L,fe("%s: %s precompiled chunk"),this.name,fe(R)),Ge.luaD_throw(this.L,K)}},{key:"checksize",value:function(R,_e,Te){R!==_e&&this.error("".concat(Te," size mismatch in"))}}],[{key:"MASK1",value:function(R,_e){return~(-1<<R)<<_e}}]),X})();e.exports.luaU_undump=function(X,R,_e){var Te=new E(X,R,_e);Te.checkHeader();var na=te.luaF_newLclosure(X,Te.LoadByte());return Ge.luaD_inctop(X),X.stack[X.top-1].setclLvalue(na),na.p=new te.Proto(X),Te.LoadFunction(na.p,null),We(na.nupvalues===na.p.upvalues.length),na}},function(e,ga,d){var o=d(1),s=o.LUA_SIGNATURE,m=o.LUA_VERSION_MAJOR,ge=o.LUA_VERSION_MINOR,b=o.constant_types,y=b.LUA_TBOOLEAN,N=b.LUA_TLNGSTR,pe=b.LUA_TNIL,q=b.LUA_TNUMFLT,Ne=b.LUA_TNUMINT,K=b.LUA_TSHRSTR,Y=o.luastring_of,Le=Y(25,147,13,10,26,10),fe=16*Number(m)+Number(ge),Ge=function w(){(function(j,I){if(!(j instanceof I))throw new TypeError("Cannot call a class as a function")})(this,w),this.L=null,this.write=null,this.data=null,this.strip=NaN,this.status=NaN},te=function(w,j,I){I.status===0&&j>0&&(I.status=I.writer(I.L,w,j,I.data))},ne=function(w,j){te(Y(w),1,j)},Q=function(w,j){var I=new ArrayBuffer(4);new DataView(I).setInt32(0,w,!0);var G=new Uint8Array(I);te(G,4,j)},ea=function(w,j){var I=new ArrayBuffer(4);new DataView(I).setInt32(0,w,!0);var G=new Uint8Array(I);te(G,4,j)},Pe=function(w,j){var I=new ArrayBuffer(8);new DataView(I).setFloat64(0,w,!0);var G=new Uint8Array(I);te(G,8,j)},Xe=function(w,j){if(w===null)ne(0,j);else{var I=w.tsslen()+1,G=w.getstr();I<255?ne(I,j):(ne(255,j),ea(I,j)),te(G,I-1,j)}},De=function(w,j){var I=w.p.length;Q(I,j);for(var G=0;G<I;G++)aa(w.p[G],w.source,j)},aa=function(w,j,I){I.strip||w.source===j?Xe(null,I):Xe(w.source,I),Q(w.linedefined,I),Q(w.lastlinedefined,I),ne(w.numparams,I),ne(w.is_vararg?1:0,I),ne(w.maxstacksize,I),(function(G,Oe){var me=G.code.map(function(de){return de.code});Q(me.length,Oe);for(var Z=0;Z<me.length;Z++)Q(me[Z],Oe)})(w,I),(function(G,Oe){var me=G.k.length;Q(me,Oe);for(var Z=0;Z<me;Z++){var de=G.k[Z];switch(ne(de.ttype(),Oe),de.ttype()){case pe:break;case y:ne(de.value?1:0,Oe);break;case q:Pe(de.value,Oe);break;case Ne:ea(de.value,Oe);break;case K:case N:Xe(de.tsvalue(),Oe)}}})(w,I),(function(G,Oe){var me=G.upvalues.length;Q(me,Oe);for(var Z=0;Z<me;Z++)ne(G.upvalues[Z].instack?1:0,Oe),ne(G.upvalues[Z].idx,Oe)})(w,I),De(w,I),(function(G,Oe){var me=Oe.strip?0:G.lineinfo.length;Q(me,Oe);for(var Z=0;Z<me;Z++)Q(G.lineinfo[Z],Oe);me=Oe.strip?0:G.locvars.length,Q(me,Oe);for(var de=0;de<me;de++)Xe(G.locvars[de].varname,Oe),Q(G.locvars[de].startpc,Oe),Q(G.locvars[de].endpc,Oe);me=Oe.strip?0:G.upvalues.length,Q(me,Oe);for(var We=0;We<me;We++)Xe(G.upvalues[We].name,Oe)})(w,I)};e.exports.luaU_dump=function(w,j,I,G,Oe){var me=new Ge;return me.L=w,me.writer=I,me.data=G,me.strip=Oe,me.status=0,(function(Z){te(s,s.length,Z),ne(fe,Z),ne(0,Z),te(Le,Le.length,Z),ne(4,Z),ne(4,Z),ne(4,Z),ne(4,Z),ne(8,Z),ea(22136,Z),Pe(370.5,Z)})(me),ne(j.upvalues.length,me),aa(j,null,me),me.status}},function(e,ga,d){var o;(function(){var s={not_type:/[^T]/,not_primitive:/[^v]/,number:/[diefg]/,numeric_arg:/[bcdiefguxX]/,json:/[j]/,text:/^[^\x25]+/,modulo:/^\x25{2}/,placeholder:/^\x25(?:([1-9]\d*)\$|\(([^\)]+)\))?(\+)?(0|'[^$])?(-)?(\d+)?(?:\.(\d+))?([b-gijostTuvxX])/,key:/^([a-z_][a-z_\d]*)/i,key_access:/^\.([a-z_][a-z_\d]*)/i,index_access:/^\[(\d+)\]/,sign:/^[\+\-]/};function m(y){return(function(N,pe){var q,Ne,K,Y,Le,fe,Ge,te,ne,Q=1,ea=N.length,Pe="";for(Ne=0;Ne<ea;Ne++)if(typeof N[Ne]=="string")Pe+=N[Ne];else if(Array.isArray(N[Ne])){if((Y=N[Ne])[2])for(q=pe[Q],K=0;K<Y[2].length;K++){if(!q.hasOwnProperty(Y[2][K]))throw new Error(m('[sprintf] property "%s" does not exist',Y[2][K]));q=q[Y[2][K]]}else q=Y[1]?pe[Y[1]]:pe[Q++];if(s.not_type.test(Y[8])&&s.not_primitive.test(Y[8])&&q instanceof Function&&(q=q()),s.numeric_arg.test(Y[8])&&typeof q!="number"&&isNaN(q))throw new TypeError(m("[sprintf] expecting number but found %T",q));switch(s.number.test(Y[8])&&(te=q>=0),Y[8]){case"b":q=parseInt(q,10).toString(2);break;case"c":q=String.fromCharCode(parseInt(q,10));break;case"d":case"i":q=parseInt(q,10);break;case"j":q=JSON.stringify(q,null,Y[6]?parseInt(Y[6]):0);break;case"e":q=Y[7]?parseFloat(q).toExponential(Y[7]):parseFloat(q).toExponential();break;case"f":q=Y[7]?parseFloat(q).toFixed(Y[7]):parseFloat(q);break;case"g":q=Y[7]?String(Number(q.toPrecision(Y[7]))):parseFloat(q);break;case"o":q=(parseInt(q,10)>>>0).toString(8);break;case"s":q=String(q),q=Y[7]?q.substring(0,Y[7]):q;break;case"t":q=String(!!q),q=Y[7]?q.substring(0,Y[7]):q;break;case"T":q=Object.prototype.toString.call(q).slice(8,-1).toLowerCase(),q=Y[7]?q.substring(0,Y[7]):q;break;case"u":q=parseInt(q,10)>>>0;break;case"v":q=q.valueOf(),q=Y[7]?q.substring(0,Y[7]):q;break;case"x":q=(parseInt(q,10)>>>0).toString(16);break;case"X":q=(parseInt(q,10)>>>0).toString(16).toUpperCase()}s.json.test(Y[8])?Pe+=q:(!s.number.test(Y[8])||te&&!Y[3]?ne="":(ne=te?"+":"-",q=q.toString().replace(s.sign,"")),fe=Y[4]?Y[4]==="0"?"0":Y[4].charAt(1):" ",Ge=Y[6]-(ne+q).length,Le=Y[6]&&Ge>0?fe.repeat(Ge):"",Pe+=Y[5]?ne+q+Le:fe==="0"?ne+Le+q:Le+ne+q)}return Pe})((function(N){if(b[N])return b[N];for(var pe,q=N,Ne=[],K=0;q;){if((pe=s.text.exec(q))!==null)Ne.push(pe[0]);else if((pe=s.modulo.exec(q))!==null)Ne.push("%");else{if((pe=s.placeholder.exec(q))===null)throw new SyntaxError("[sprintf] unexpected placeholder");if(pe[2]){K|=1;var Y=[],Le=pe[2],fe=[];if((fe=s.key.exec(Le))===null)throw new SyntaxError("[sprintf] failed to parse named argument key");for(Y.push(fe[1]);(Le=Le.substring(fe[0].length))!=="";)if((fe=s.key_access.exec(Le))!==null)Y.push(fe[1]);else{if((fe=s.index_access.exec(Le))===null)throw new SyntaxError("[sprintf] failed to parse named argument key");Y.push(fe[1])}pe[2]=Y}else K|=2;if(K===3)throw new Error("[sprintf] mixing positional and named placeholders is not (yet) supported");Ne.push(pe)}q=q.substring(pe[0].length)}return b[N]=Ne})(y),arguments)}function ge(y,N){return m.apply(null,[y].concat(N||[]))}var b=Object.create(null);ga.sprintf=m,ga.vsprintf=ge,typeof window<"u"&&(window.sprintf=m,window.vsprintf=ge,(o=(function(){return{sprintf:m,vsprintf:ge}}).call(ga,d,ga,e))===void 0||(e.exports=o))})()},function(e,ga,d){var o=d(2).lua_pop,s=d(7).luaL_requiref,m=d(5).to_luastring,ge={};e.exports.luaL_openlibs=function(te){for(var ne in ge)s(te,m(ne),ge[ne],1),o(te,1)};var b=d(17),y=d(24).luaopen_base,N=d(25).luaopen_coroutine,pe=d(31).luaopen_debug,q=d(30).luaopen_math,Ne=d(32).luaopen_package,K=d(27).luaopen_os,Y=d(28).luaopen_string,Le=d(26).luaopen_table,fe=d(29).luaopen_utf8;ge._G=y,ge[b.LUA_LOADLIBNAME]=Ne,ge[b.LUA_COLIBNAME]=N,ge[b.LUA_TABLIBNAME]=Le,ge[b.LUA_OSLIBNAME]=K,ge[b.LUA_STRLIBNAME]=Y,ge[b.LUA_MATHLIBNAME]=q,ge[b.LUA_UTF8LIBNAME]=fe,ge[b.LUA_DBLIBNAME]=pe;var Ge=d(33).luaopen_fengari;ge[b.LUA_FENGARILIBNAME]=Ge}])})})(or)),or.exports}var An=dn();return Tr(An)}));
